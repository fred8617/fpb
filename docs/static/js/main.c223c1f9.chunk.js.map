{"version":3,"sources":["../node_modules/graphql-language-service-interface/dist sync /^.*$","FPB/utils.ts","FPB/ItemSettingForm.tsx","FPB/CommonInput.tsx","FPB/FPBForm.tsx","FPB/FullScreenModal.tsx","FPB/ErrorWrapper.tsx","FPB/GraphqlEditor.tsx","FPB/useFPBStore.tsx","FPB/CalTag.tsx","FPB/Block.tsx","FPB/useSizeMe.tsx","FPB/FormContext.tsx","FPB/FormConsumerComponent.tsx","FPB/ObservableBlock.tsx","FPB/ObservableBlockContainer.tsx","FPB/BreakpointForm.tsx","FPB/CalText.tsx","FPB/FPB.tsx","FPB/ContainerQuery.tsx","demo-components/input.tsx","demo-components/checkbox.tsx","demo-components/radio.tsx","demo-components/button.tsx","demo-components/tabs.tsx","demo-components/table.tsx","components/GqlTable.tsx","demo-components/gql-table.tsx","data.ts","App.tsx","serviceWorker.ts","index.tsx"],"names":["map","webpackContext","req","id","webpackContextResolve","__webpack_require__","o","e","Error","code","keys","Object","resolve","module","exports","doWindowResize","debounce","window","event","document","createEvent","initEvent","dispatchEvent","Size","findRequiredRules","componentProps","entries","key","value","find","propName","rule","required","filter","Boolean","getObjectKeysWhenIsArray","obj","prev","returnValue","defaultPush","Array","forEach","i","index","CommonInput","forwardRef","props","ref","allowClear","Item","create","FPBForm","useRef","footerRef","store","useLocalStore","visible","destory","setVisible","setTimeout","minuHeight","current","clientHeight","onClick","_","drawerStyle","height","style","transform","bodyStyle","padding","width","onClose","destroyOnClose","renderActions","type","onChange","config","renderDelay","components","defaultDatas","FullScreenModal","allProps","useState","setHeight","useMemo","footer","minuHeightRef","useEffect","caclHeight","screenHeight","documentElement","addEventListener","removeEventListener","margin","maxWidth","overflow","centered","ErrorWrapper","state","error","info","this","setState","console","log","message","description","componentStack","showIcon","children","React","Component","GraphqlEditor","client","useApolloClient","closable","onOk","layout","getQueryEditor","getValue","onCancel","query","storage","getItem","setItem","operationName","fetcher","param","gql","Logo","TreeNode","Option","OptGroup","Panel","getCol","size","col","span","LARGE","MIDDLE","SMALL","ItemSettingForm","observer","form","item","toJS","initialKeyCounter","keyCounter","setKeyCounter","recordItem","resetFields","getFieldsValue","length","setFieldsValue","initialValue","recurseEverything","getFieldDecorator","renderTypeTreeNode","getFieldValue","component","title","label","componentTypeDec","componentId","autoHeightDec","valuePropName","autoHeight","isFormFieldDec","isFormField","$idDec","$id","labelDec","flatComponents","formField","sortProps","destination","source","values","arr","get","droppableId","dragValue","splice","deleteProp","propsDecModels","createComponentPropsForm","prefix","componentPropsEntries","indexOf","setting","name","prop","options","rules","accordion","destroyInactivePanel","mapedArr","renderAfterAddButtonComponent","onDragEnd","provided","droppableProps","innerRef","p","pi","draggableId","draggableProps","actions","dragHandleProps","placeholder","className","color","cursor","forceRender","header","icon","push","parentStore","settingWidth","labelCol","wrapperCol","defaultActiveKey","gutter","showSearch","dropdownStyle","maxHeight","autoClearSearchValue","treeDefaultExpandAll","componentGroup","groupOrComponent","disabled","checkedChildren","unCheckedChildren","displayName","memo","onValuesChange","changedValues","allValues","field","onItemTypeChange","onItemPropsChange","onFieldsChange","fields","Mode","CalTag","timeout","opacity","transition","showCalTag","hideCalTag","clearTimeout","position","zIndex","top","left","Math","round","Block","showTag","render","currentSize","setSize","useSizeMe","monitorHeight","sized","setParent","useCallback","onParentHeightChange","breakpoint","createContext","Provider","Consumer","FormConsumerComponent","trim","renderComponent","getComponent","datas","editingItem","rest","finalComponentProps","defaultValue","renderComponentChildren","comp","chil","child","Comp","FPR","shouldHaveOne","ObservableBlock","finalComponent","isPreview","operatedItem","h","getItemHeight","renderedComponent","ObservableBlockContainer","hasEditingItem","isEditing","isEditingItem","itemKey","hasBorder","border","boxSizing","trigger","content","setEditingItem","data","deleteItem","draggableCancel","initialData","breakpointsDec","breakpoints","Group","point","cols","emptyLayouts","xxl","xl","lg","md","sm","xs","breakpointsStandard","defaultbreakpoints","defaultCols","useFPBStore","force","useForceUpdate","rowHeight","layouts","shortid","generate","draggableCancelClassName","breakpointsArr","mode","DESIGN","PRIVIEW","changeMode","target","defaultFormField","fromEntries","hasLayout","setDatas","setLayouts","_currentLayout","JSON","stringify","setBreakpoint","_col","setBreakpointFromEntry","breakpointDiff","setBreakpointConfig","setBreakpointSettingVisible","remove","computedLayout","onBreakpointChange","onLayoutChange","onResize","onResizeStop","setOperatedItem","_layout","_oldItem","newItem","findItem","b","findItemInAllBreakpoints","itemData","breakpointsItems","undefined","ceil","maxH","minH","createItem","set","dealChildren","parent","componentsHasGroup","group","componentsNoGroup","allGroup","Set","returnGroup","filterGroup","breakpointSettingVisible","CalText","showCalText","hideCalText","right","fontWeight","ResponsiveGridLayout","WidthProvider","Responsive","FormFPB","isInit","settingRef","breakpointFormRef","localStore","configVisible","setConfigVisible","mainWidth","setMainWidth","setSettingWidth","clientWidth","func","FPRPart","display","jsConfig","isDesign","showPart","builderPart","paddingLeft","paddingTop","paddingRight","onDragFinished","pane1Style","paneStyle","defaultSize","contentDefaultSize","minSize","maxSize","background","editingTitle","placement","getContainer","buttonStyle","Button","maskClosable","validateFieldsAndScroll","err","breakpointsConfig","collapsed","indentWidth","src","n","ApolloFPB","applyContainerQuery","containerQuery","nowBreakpoint","isMobile","childrenProps","minWidth","input","isDefault","path","TextArea","checkbox","radio","button","tabs","TabPane","tab","table","Column","dataIndex","ApolloClient","uri","headers","Authorization","useQuery","fetchPolicy","loading","columns","c","Function","pagination","pageSize","rowKey","dataSource","gqltable","App","setBreakDiff","breakpointDiff1","bottom","location","hostname","match","root","getElementById","ReactDOM","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"+EAAA,IAAIA,EAAM,CACT,IAAK,IACL,KAAM,IACN,2BAA4B,IAC5B,6BAA8B,IAC9B,gCAAiC,IACjC,oCAAqC,IACrC,8BAA+B,IAC/B,kCAAmC,IACnC,sBAAuB,GACvB,wBAAyB,IACzB,2BAA4B,IAC5B,+BAAgC,IAChC,yBAA0B,GAC1B,6BAA8B,IAC9B,+BAAgC,IAChC,iCAAkC,IAClC,oCAAqC,IACrC,wCAAyC,IACzC,kCAAmC,IACnC,sCAAuC,IACvC,kBAAmB,IACnB,oBAAqB,IACrB,uBAAwB,IACxB,2BAA4B,IAC5B,qBAAsB,IACtB,yBAA0B,IAC1B,mBAAoB,IACpB,qBAAsB,IACtB,wBAAyB,IACzB,4BAA6B,IAC7B,sBAAuB,IACvB,0BAA2B,IAC3B,wBAAyB,IACzB,0BAA2B,IAC3B,6BAA8B,IAC9B,iCAAkC,IAClC,2BAA4B,IAC5B,+BAAgC,IAChC,eAAgB,IAChB,iBAAkB,IAClB,oBAAqB,IACrB,wBAAyB,IACzB,kBAAmB,IACnB,sBAAuB,IACvB,UAAW,IACX,YAAa,IACb,eAAgB,IAChB,mBAAoB,IACpB,aAAc,IACd,iBAAkB,KAInB,SAASC,EAAeC,GACvB,IAAIC,EAAKC,EAAsBF,GAC/B,OAAOG,EAAoBF,GAE5B,SAASC,EAAsBF,GAC9B,IAAIG,EAAoBC,EAAEN,EAAKE,GAAM,CACpC,IAAIK,EAAI,IAAIC,MAAM,uBAAyBN,EAAM,KAEjD,MADAK,EAAEE,KAAO,mBACHF,EAEP,OAAOP,EAAIE,GAEZD,EAAeS,KAAO,WACrB,OAAOC,OAAOD,KAAKV,IAEpBC,EAAeW,QAAUR,EACzBS,EAAOC,QAAUb,EACjBA,EAAeE,GAAK,K,2VC/DPY,EAAiBC,oBAPF,WAC1B,GAAsB,qBAAXC,OAAwB,CACjC,IAAMC,EAAeC,SAASC,YAAY,cAC1CF,EAAMG,UAAU,UAAU,GAAM,GAChCJ,OAAOK,cAAcJ,MAGqC,KAE9DD,OAAOF,eAAiBA,EAEjB,IC0BFQ,ED1BQC,EAAoB,SAAAC,GAC/B,OAAKA,EAGEd,OAAOe,QAAQD,GACnBzB,KAAI,YAAmB,IAAD,mBAAhB2B,EAAG,KAAEC,EAAK,KACf,GACEjB,OAAOe,QAAQE,GAAOC,MACpB,mCAAEC,EAAQ,KAAEF,EAAK,WACF,UAAbE,GAAwBF,EAAMC,MAAK,SAAAE,GAAI,OAAIA,EAAKC,eAGpD,OAAOL,KAGVM,OAAOC,SAbD,IAgBEC,EAA2B,SAA3BA,EACXC,GAII,IAHJC,EAAI,uDAAG,GACPC,EAAW,uDAAG,GACdC,EAAW,uDAAG,GAEd,OAAY,OAARH,EACKE,EAELF,aAAeI,OACjBF,EAAY,GAAD,OAAID,IAAUD,EAAIpC,KAAI,kBAAMuC,KACvCH,EAAIK,SAAQ,SAAClC,EAAGmC,GACdP,EAAyB5B,EAAE,GAAD,OAAK8B,EAAI,YAAIK,EAAC,KAAKJ,EAAaC,MAErDD,GAEU,kBAARF,GACTzB,OAAOe,QAAQU,GAAKK,SAAQ,WAAeC,GAAO,IAAD,mBAAnBf,EAAG,KAAEC,EAAK,KAChCe,EAAK,UAAMN,EAAI,YAAIV,GACzB,GAAIC,aAAiBY,MAGnB,OAFAF,EAAYK,GAASf,EAAM5B,KAAI,SAAAO,GAAC,OAAIgC,KACpCJ,EAAyBP,EAAOe,EAAOL,EAAaC,IAC7C,EAETJ,EAAyBP,EAAOe,EAAOL,EAAaC,MAE/CD,QAVT,G,4NElCaM,EAJmBC,sBAAW,SAACC,EAAMC,GAChD,OAAO,qCAAOC,YAAU,EAACD,IAAKA,GAASD,O,iBCD3BG,GAAF,IAANC,OAAY,IAAJD,MA+FDE,EAzFoB,SAAAL,GACjC,IAAMC,EAAWK,mBACXC,EAAiBD,mBACjBE,EAAQC,aAAc,iBAAO,CACjCC,SAAS,EACTC,SAAS,EACTC,WAAU,SAACF,GACTF,EAAME,QAAUA,EACZA,GACFG,YAAW,WACTL,EAAMM,WAAaP,EAAUQ,QAAQC,aAAe,KACnD,IAGPF,WAAY,MAEd,OACE,oCACE,uBAAQG,QAAS,SAAAC,GAAC,OAAIV,EAAMI,YAAW,KAAM,gBAC7C,kBAAC,IAAQ,MACN,kBACC,uBACEO,YAAa,CAAEC,OAAO,QACtBC,MAAO,CAAED,OAAO,OAASE,UAAU,gBACnCC,UAAW,CAAEH,OAAO,OAASI,QAAS,GACtCC,MAAK,OACLC,QAAS,SAAAR,GAAC,OAAIV,EAAMI,YAAW,IAC/Be,gBAAc,EACdjB,QAASF,EAAME,SAEf,oCACE,uJAOA,kBAAC,GAAG,CACFkB,cAAe,kBACb,oCACE,kBAACzB,EAAI,KACH,uBACE0B,KAAK,UACLZ,QAAS,SAAAC,GAEPlB,EAAM8B,SAAS,MACfjB,YACE,kBAAMb,EAAM8B,SAAS7B,EAAIc,QAAQgB,UACjC,OAEF,iBAKN,kBAAC5B,EAAI,KACH,uBACE0B,KAAK,SACLZ,QAAS,SAAAC,GAEHlB,EAAM8B,WACR9B,EAAM8B,SAAS,MACfjB,YACE,kBAAMb,EAAM8B,SAAS7B,EAAIc,QAAQgB,UACjC,MAGJvB,EAAMI,YAAW,KACjB,qCAOVoB,YAAa,IACbjC,WAAYE,EACZgC,WAAYjC,EAAMiC,WAClBC,aAAclC,EAAMlB,e,sECpDrBqD,EAhCoC,SAAAC,GACjD,IAAQb,EAAwBa,EAAxBb,UAAcvB,EAAK,YAAKoC,EAAQ,GACxC,EAA4BC,mBAAS,GAAE,mBAAhCjB,EAAM,KAAEkB,EAAS,KAElBxB,EAAayB,mBAAQ,WACzB,OAAwB,OAAjBvC,EAAMwC,OAAkB,EAAIxC,EAAMc,WAAad,EAAMc,WAAa,KACxE,CAACd,EAAMwC,OAAQxC,EAAMc,aAClB2B,EAAgBnC,iBAAOQ,GAe7B,OAdA2B,EAAc1B,QAAUD,EACxB4B,qBAAU,WACR,IAAMC,EAAa,WACjB9B,YAAW,WACT,IAAM+B,EAAevE,SAASwE,gBAAgB7B,aAC9CsB,EAAUM,EAAeH,EAAc1B,aAK3C,OAFA4B,IACAxE,OAAO2E,iBAAiB,SAAUH,GAC3B,WACLxE,OAAO4E,oBAAoB,SAAUJ,MAEtC,IAED,qCACEtB,MAAO,CAAEG,QAAS,EAAGwB,OAAQ,EAAGC,SAAS,QACzCxB,MAAK,OACLF,UAAS,aAAIH,SAAQ8B,SAAS,QAAY3B,GAC1C4B,UAAQ,GACJnD,K,uDChCWoD,GAAY,kKAI7B,OAJ6B,oCAC/BC,MAAQ,CACNC,MAAO,KACPC,KAAM,MACP,EAkBA,OAlBA,8CACD,SAAkBD,EAAOC,GACvBC,KAAKC,SAAS,CAAEH,QAAOC,SACvBG,QAAQC,IAAIL,KAEb,oBACD,WACE,OAAIE,KAAKH,MAAMC,MAEX,uBACEM,QAAQ,eACRC,YAAaL,KAAKH,MAAME,KAAKO,eAC7BjC,KAAK,QACLkC,UAAQ,IAIPP,KAAKxD,MAAMgE,SAASR,KAAKxD,WACjC,EAtB8B,CAASiE,IAAMC,WCUhC/D,IAAF,IAANC,OAAY,IAAJD,MACVgE,GAAyC,SAAAnE,GAC7C,IAAMoE,EAASC,cACTpE,EAAMK,mBACNC,EAAiBD,mBACjBE,EAAQC,aAAc,iBAAO,CACjCC,SAAS,EACTE,WAAU,SAACF,GACTF,EAAME,QAAUA,EACZA,GACFG,YAAW,WACTL,EAAMM,WAAaP,EAAUQ,QAAQC,aAAe,GACpD/C,MACC,MAGP6C,WAAY,MAKd,OAHA4B,qBAAU,WACRgB,QAAQC,IAAI1D,KACX,IAED,oCACE,8OAUA,uBAAQgB,QAAS,SAAAC,GAAC,OAAIV,EAAMI,YAAW,KAAM,6BAC7C,kBAAC,IAAQ,MACN,kBACC,kBAAC,EAAe,CACdE,WAAYN,EAAMM,WAClBwD,UAAU,EACVC,KAAM,aACN5C,gBAAc,EACda,OACE,yBAAKvC,IAAKM,GACR,uBAAMiE,OAAO,UACX,kBAAC,GAAI,KACH,uBACE3C,KAAK,UACLZ,QAAS,SAAAC,GACP,IAAMpC,EAASmB,EAAIc,QAChB0D,iBACAC,WACC1E,EAAM8B,UACR9B,EAAM8B,SAAShD,KAEjB,iBAKN,kBAAC,GAAI,KACH,uBACE+C,KAAK,SACLZ,QAAS,SAAAC,GACP,IAAMpC,EAASmB,EAAIc,QAChB0D,iBACAC,WACC1E,EAAM8B,UACR9B,EAAM8B,SAAShD,GAEjB0B,EAAMI,YAAW,KACjB,mCAKN,kBAAC,GAAI,KACH,uBACEK,QAAS,SAAAC,GACPV,EAAMI,YAAW,KACjB,mBAQZ+D,SAAU,SAAAzD,GAAC,OAAIV,EAAMI,YAAW,IAChCF,QAASF,EAAME,QACfa,UAAW,CAAEC,QAAS,IAErBhB,EAAME,SACL,kBAAC,GAAY,MACV,kBACC,kBAAC,IAAQ,CACPkE,MAAO5E,EAAMlB,MACbmB,IAAKA,EAGL4E,QAAS,CAAEC,QAAO,aAAOC,QAAO,cAChCC,cAAe,QACfC,QAAS,SAAAC,GAAK,OAAId,EAAOQ,MAAM,CAAEA,MAAOO,IAAID,EAAMN,WAElD,kBAAC,IAASQ,KAAI,+BLlF1BC,IADM,IAANC,OAAgB,IAARC,SACA,IAARF,UACAG,GAAK,IAALA,OAWR,SAVK/G,OAAI,iBAAJA,IAAI,mBAAJA,IAAI,iBAUT,CAVKA,MAAI,KAWT,IAQMgH,GAAS,SAAChE,EAAeiE,GAC7B,IAAMC,EAAM,CAAEC,KAAM,IACpB,OAAIF,IAASjH,EAAKoH,MACTF,EACED,IAASjH,EAAKqH,OACnBrE,GAAS,KAAOA,EAAQ,MAC1BkE,EAAIC,KAAO,EACJD,GACElE,GAAS,MAClBkE,EAAIC,KAAO,EACJD,GAEFA,EACED,IAASjH,EAAKsH,MACnBtE,EAAQ,KAAOA,EAAQ,KACzBkE,EAAIC,KAAO,GACJD,GACElE,GAAS,KAAOA,EAAQ,MACjCkE,EAAIC,KAAO,EACJD,GACElE,GAAS,MAClBkE,EAAIC,KAAO,EACJD,GAEFA,OAXF,GAkDDvF,GAAM,IAANA,OAAQD,GAAI,IAAJA,KAEV6F,GAAmDC,aAAS,SAAAjG,GAEhE,IAAQkG,EAAelG,EAAfkG,KAAMC,EAASnG,EAATmG,KACdzC,QAAQC,IAAI,kBAAmByC,eAAKpG,IACpC,MAAoCqC,oBAAS,kBAAMrC,EAAMqG,qBAAkB,mBAApEC,EAAU,KAAEC,EAAa,KAC1BC,EAAalG,iBAAO6F,GAI1BzD,qBAAU,WACJ8D,EAAWzF,UAAYoF,IACzBD,EAAKO,cACLD,EAAWzF,QAAUoF,KAEtB,CAACA,IACJzD,qBAAU,WAKR,IAAQ/D,EAAmBuH,EAAKQ,iBAAxB/H,eACRd,OAAOD,KAAK0I,GAAYK,QACtBhI,GACAuH,EAAKU,eAAe,CAClBjI,qBAEH,CAAC2H,IAEJ,IAAMO,EACJT,eAAKD,EAAM,CAAEW,mBAAmB,KAAW,GACrCC,EAAqDb,EAArDa,kBAAmBL,EAAkCR,EAAlCQ,eACrBM,GADuDd,EAAlBe,cAChB,SAArBD,EAAqBE,GACzB,OAAIA,EAAUlD,SAEV,kBAACqB,GAAQ,CACPvG,MAAOoI,EAAU7J,GACjB8J,MAAOD,EAAUE,MACjBvI,IAAKqI,EAAU7J,IAEd6J,EAAUlD,SAAS9G,KAAI,SAAAgK,GACtB,OAAOF,EAAmBE,OAMhC,kBAAC7B,GAAQ,CACPvG,MAAOoI,EAAU7J,GACjB8J,MAAOD,EAAUE,MACjBvI,IAAKqI,EAAU7J,OAmBfgK,EAAmBN,EAAkB,cAAe,CACxDF,aAAcA,EAAaS,cAMvBC,EAAgBR,EAAkB,aAAc,CACpDS,cAAe,UACfX,aAAcA,EAAaY,aAMvBC,EAAiBX,EAAkB,cAAe,CACtDS,cAAe,UACfX,aAAcA,EAAac,cAMvBC,EAASb,EAAkB,MAAO,CACtCF,aAAcA,EAAagB,MAMvBC,EAAWf,EAAkB,QAAS,CAC1CF,aAAcA,EAAaO,QAG7B,EAAqCV,IAA7BY,EAAW,EAAXA,YAAaK,EAAW,EAAXA,YAErB,EACE3H,EAAM+H,eAAeT,IAAgB,GAAE,IADjC3I,sBAAc,MAAG,GAAE,EAAEqJ,EAAS,EAATA,UAEvBC,EAAY,SAAH,GAAiC,IAA3BC,EAAW,EAAXA,YAAaC,EAAM,EAANA,OAChC,GAAKD,EAAL,CAGA,IAAME,EAASlC,EAAKQ,iBACd2B,EAAMC,cAAIF,EAAQF,EAAYK,aAC9BC,EAAYH,EAAIF,EAAOtI,OAC7BwI,EAAII,OAAON,EAAOtI,MAAO,GACzBwI,EAAII,OAAOP,EAAYrI,MAAO,EAAG2I,GACjCtC,EAAKU,eAAe,CAClBjI,eAAgByJ,EAAOzJ,mBAGrB+J,EAAa,SAAC1J,EAAUa,GAC5B,IAAMuI,EAAS1B,IACH4B,cAAIF,EAAQpJ,GACpByJ,OAAO5I,EAAO,GAClByG,EAAWtH,GAAUyJ,OAAO5I,EAAO,GACnCqG,EAAKU,eAAe,CAClBjI,eAAgByJ,EAAOzJ,iBAEzB4H,EAAc,eAAKD,KAmNfqC,EAjN2B,SAA3BC,EACJjK,GAEI,IADJkK,EAAM,uDAAG,iBAEHC,EAAwBjL,OAAOe,QAAQD,GAC7C,MAAM,GAAN,mBACKmK,EACA3J,QAAO,YAAQ,OAAR,iBAAQ,GAAW0C,KAAKkH,QAAQ,SAAW,KAClD7L,KAAI,WAAe0C,GAAO,IACrBoJ,EADoB,mBAAnBC,EAAI,KAAEC,EAAI,KAETlK,EAAQ,UAAM6J,EAAM,YAAII,GACxBE,EAAU,CACdC,MAAOF,EAAKE,OAsCd,MApCkB,WAAdF,EAAKrH,KACPmH,EACE,kBAAC,GAAI,CAAC5B,MAAO8B,EAAK9B,MAAOvI,IAAKG,GAC3B+H,EAAkB/H,EAAS,aAC1B6H,aAAcyB,cAAIzB,EAAc7H,IAC7BmK,GAFJpC,CAIE,kBAAC,EAAW,QAGI,QAAdmC,EAAKrH,KAGdmH,EACE,kBAAC,GAAI,CAAC5B,MAAO8B,EAAK9B,MAAOvI,IAAKG,GAC3B+H,EAAkB/H,EAAS,aAC1B6H,aAAcT,eAAKkC,cAAIzB,EAAc7H,GAAW,CAC9C8H,mBAAmB,KAElBqC,GAJJpC,CAME,kBAAC,EAAO,CAAC9E,WAAYjC,EAAMiC,eAGX,YAAdiH,EAAKrH,OACdmH,EACE,kBAAC,GAAI,CAAC5B,MAAO8B,EAAK9B,MAAOvI,IAAKG,GAC3B+H,EAAkB/H,EAAS,aAC1B6H,aAAcyB,cAAIzB,EAAc7H,IAC7BmK,GAFJpC,CAIE,kBAAC,GAAa,SAKhBiC,MACP,CACJ,uBAAUnK,IAAG,WAAcwK,WAAS,EAACC,sBAAsB,GACxDR,EACE3J,QAAO,YAAQ,OAAR,iBAAQ,GAAW0C,KAAKkH,QAAQ,UAAY,KACnD7L,KAAI,WAAe0C,GAAO,IAGrB2J,EAEAC,EALoB,mBAAnBP,EAAI,KAAEC,EAAI,KAETlK,EAAQ,UAAM6J,EAAM,YAAII,GAkJ9B,OAhJAM,EAAWjD,EAAWtH,IAAa,GAEjB,oBAAdkK,EAAKrH,KACP2H,EACE,kBAAC,IAAe,CAACC,UAAWxB,GAC1B,kBAAC,IAAS,CAACM,YAAavJ,IACrB,SAAA0K,GACC,OACE,yCACMA,EAASC,eAAc,CAC3B1J,IAAKyJ,EAASE,WAEbL,EAASrM,KAAI,SAAC2M,EAAGC,GAChB,IAAMjL,EAAG,UAAMG,EAAQ,YAAI8K,EAAE,KAC7B,OACE,kBAAC,IAAS,CAACjL,IAAKA,EAAKkL,YAAalL,EAAKgB,MAAOiK,IAC3C,SAAAJ,GACC,OACE,uCACE7K,IAAKA,EACLoB,IAAKyJ,EAASE,UACVF,EAASM,gBAGb,uBACE3I,MAAO,CAAE2B,OAAO,SAChBnE,IAAG,aAAQiL,GACXG,QAAS,CACP,wBAASP,EAASQ,gBAChB,uBAAMrI,KAAK,OAAOhD,IAAK,UAEzB,uBACEgD,KAAK,SACLhD,IAAK,SACLoC,QAAS,SAAAC,GAAC,OACRwH,EAAW1J,EAAU8K,QAK1BlB,EACCjK,EAAesK,GAAMtK,eAAe,GAAD,OAChCK,EAAQ,YAAI8K,EAAE,6BAShCJ,EAASS,iBAOC,iBAAdjB,EAAKrH,OACd2H,EACE,kBAAC,IAAe,CAACC,UAAWxB,GAC1B,kBAAC,IAAS,CAACM,YAAavJ,IACrB,SAAA0K,GACC,OACE,yCACMA,EAASC,eAAc,CAC3B1J,IAAKyJ,EAASE,WAEbL,EAASrM,KAAI,SAAC2M,EAAGC,GAChB,IAAMjL,EAAG,UAAMG,EAAQ,YAAI8K,EAAE,KAE7B,OACE,kBAAC,IAAS,CAACjL,IAAKA,EAAKkL,YAAalL,EAAKgB,MAAOiK,IAC3C,SAAAJ,GACC,OACE,uCACE7K,IAAKA,EACLoB,IAAKyJ,EAASE,UACVF,EAASM,eAAc,CAC3BI,UAAU,6BAEV,kBAAC,GAAI,KACH,wBAASV,EAASQ,gBAChB,uBAAMrI,KAAK,WAGf,kBAAC,GAAI,KACFkF,EAAkBlI,EAAK,CAEtBgI,aAAcyB,cAAInC,EAAMtH,IAFzBkI,CAGE,kBAAC,EAAW,QAEjB,kBAAC,GAAI,KACH,uBACE9F,QAAS,SAAAC,GAAC,OACRwH,EAAW1J,EAAU8K,IAEvBjI,KAAK,SACLR,MAAO,CACLgJ,MAAM,MACNC,OAAO,qBAUxBZ,EAASS,kBAStB,kBAAC3E,GAAK,CAAC+E,aAAW,EAACC,OAAQtB,EAAK9B,MAAOvI,IAAG,iBAAYe,IACpD,uBACE6K,KAAK,OACLxJ,QAAS,SAAAxD,GAEP,KADc6K,cAAInC,EAAM0C,IAAW,IACxBI,GAIT,OAFA3C,EAAWtH,GAAY,CAAC,SACxBuH,EAAc,eAAKD,IAIhBA,EAAWtH,KACdsH,EAAWtH,GAAY,IAEzBsH,EAAWtH,GAAU0L,KAAK,IAC1BnE,EAAc,eAAKD,MACnB,eAEC4C,EAAK9B,OAEToC,SAUQZ,CAAyBjK,GAEhD,OACE,kBAAC,IAAQ,MACN,WACC,OAAO,oCACP,uBAAyBqB,EAAM2K,YAAYC,aAharC,CAAEC,SAAU,CAAEjF,KAAM,IAAMkF,WAAY,CAAElF,KAAM,MAialD,uBACEyD,WAAS,EACT0B,iBAAkB,CAAC,KACnBzB,sBAAsB,GAEtB,kBAAC9D,GAAK,CAAC+E,aAAW,EAACC,OAAM,2BAAU3L,IAAI,KACrC,uBAAKmM,OAAQ,IACX,sBAASvF,GAAOzF,EAAM2K,YAAYC,aAAcnM,EAAKqH,QACnD,kBAAC,GAAI,CAACsB,MAAO,gBACVC,EACC,uBACEvF,SAAU,SAAAZ,GAAC,OAAIqF,EAAc,KAC7B0E,YAAU,EACV5J,MAAO,CAAEI,MAAM,QACfyJ,cAAe,CAAEC,UAAW,IAAKjI,SAAU,QAC3CiH,YAAY,iCACZjK,YAAU,EACVkL,sBAAoB,EACpBC,sBAAoB,GAEnBrL,EAAMsL,eAAepO,KACpB,SAACqO,EAAkB1L,GACjB,OAAI0L,EAAiBlO,GACZ2J,EAAmBuE,GAG1B,kBAAClG,GAAQ,CACPmG,UAAQ,EACR1M,MAAOyM,EAA4B,UACnCpE,MAAOoE,EAA4B,UACnC1M,IAAK0M,EAA4B,WAEhCA,EACCA,EAA4B,WAC5BrO,KAAI,SAAAgK,GACJ,OAAOF,EAAmBE,cAU5C,sBAASzB,GAAOzF,EAAM2K,YAAYC,aAAcnM,EAAKsH,OACnD,kBAAC,GAAI,CACHqB,MACE,mEAEE,uBAASD,MAAM,8IACb,uBAAMtF,KAAK,yBAKhB0F,EACC,uBACEkE,gBAAiB,SACjBC,kBAAmB,cAM1B1D,GACC,kBAAC,WAAQ,CAACnJ,IAAI,QACZ,sBAAS4G,GAAOzF,EAAM2K,YAAYC,aAAcnM,EAAKsH,OACnD,kBAAC,GAAI,CAACqB,MAAO,8CACVM,EACC,uBACE+D,gBAAiB,SACjBC,kBAAmB,cAK1B/D,GACC,oCACE,sBACMlC,GAAOzF,EAAM2K,YAAYC,aAAcnM,EAAKqH,QAEhD,kBAAC,GAAI,CACHsB,MACE,uCAEE,uBAASD,MAAM,0IACb,uBAAMtF,KAAK,yBAKhB+F,EAAO,kBAAC,EAAW,CAACuC,YAAa,4BAGtC,sBACM1E,GAAOzF,EAAM2K,YAAYC,aAAcnM,EAAKqH,QAEhD,kBAAC,GAAI,CAACsB,MAAO,wCACVU,EAAS,kBAAC,EAAW,CAACqC,YAAa,YAUnDxB,EAAehC,QACd,kBAACnB,GAAK,CAAC+E,aAAW,EAACC,OAAQ,iCAAS3L,IAAI,KACrC8J,YAUjB3C,GAAgB2F,YAAc,0BACf1H,WAAM2H,KACnBxL,GAA6B,CAC3ByL,eAAc,SAAC7L,EAAO8L,EAAeC,GACnC,IAAMC,EAAQnO,OAAOD,KAAKkO,GAAe,GACzC,GAAKE,EAAL,CAGA,IAAMlN,EAAQgN,EAAcE,GAC5BtI,QAAQC,IAAI,iBAAkBqI,EAAOD,EAAUC,IACjC,gBAAVA,EACFhM,EAAMiM,iBAAiBnN,GAEvBkB,EAAMkM,kBAAkBF,EAAOD,EAAUC,MAG7CG,eAAc,SAACnM,EAAOoM,MAdxBhM,CAeG4F,K,qBMtGOqG,G,UChcGC,GA3CwB,SAAH,GAA2B,IAArB7K,EAAK,EAALA,MAAOL,EAAM,EAANA,OACzCZ,EAAQC,aAAc,iBAAO,CACjC8L,QAAS,KAITC,QAAS,EACTC,WAAY,KACZC,WAAU,WACRlM,EAAMgM,QAAU,EAChBhM,EAAMiM,WAAa,MAErBE,WAAU,WACRnM,EAAMgM,QAAU,OAWpB,OAPA9J,qBAAU,WACRkK,aAAapM,EAAM+L,SACnB/L,EAAMkM,aACNlM,EAAM+L,QAAU1L,YAAW,WACzBL,EAAMmM,eACL,OACF,CAACvL,EAAQK,IAEV,kBAAC,IAAQ,MACN,kBACC,wBACEJ,MAAO,CACLwL,SAAS,WACTC,OAAQ,EACRC,IAAK,EACLC,KAAM,EACNP,WAAYjM,EAAMiM,WAClBD,QAAShM,EAAMgM,UAGhBS,KAAKC,MAAMzL,GAAM,IAAGwL,KAAKC,MAAM9L,Q,qBClBpC+L,GAA+B,SAAAnN,GACnC,MAA2BA,EAAnBoN,eAAO,OAAO,EACtB,EC1Ba,SACbC,EACAlE,GAEA,MAA+B9G,mBAAe,CAAEZ,MAAO,KAAML,OAAQ,OAAO,mBAArEkM,EAAW,KAAEC,EAAO,KAC3B,MAAO,CACL,kBAAC,UAAWpE,GACT,YAA+B,IAA5BzD,EAAI,EAAJA,KAOF,OALEA,EAAKjE,QAAU6L,EAAY7L,OAC3BiE,EAAKtE,SAAWkM,EAAYlM,QAE5BmM,EAAQ7H,GAEH2H,EAAO,eAAK3H,OAGvB4H,EAAY7L,MACZ6L,EAAYlM,QDQiBoM,EAC7B,WACE,OACE,yBAAKnM,MAAO,CAAEwL,SAAS,WAAaC,OAAQ,IAEzCM,GAAW,kBAAC,GAAM,CAAC3L,MAAOA,EAAOL,OAAQpB,EAAMoB,SAC/CpB,EAAMgE,YAIb,CACEyJ,eAAe,IAIlB,mBAfMC,EAAK,KAAEjM,EAAK,KAAEL,EAAM,KAgBrBuM,EAAYC,sBAChB1P,KAAS8B,EAAM6N,qBAAsBT,EAAU,IAAM,GACrD,CAACpN,EAAM6N,uBAQT,OANAnL,qBAAU,WACRgB,QAAQC,IAAI,aAEZgK,EAAUvM,KACT,CAACA,EAAQpB,EAAM8N,WAAY9N,EAAMyH,aAE7B,oCAAGiG,IExDZ,GAA+BK,wBAAkC,CAC/D7H,KAAM,OADA8H,GAAQ,GAARA,SAAUC,GAAQ,GAARA,SCGV9N,GAAI,IAAJA,KA+CO+N,GAjCgD,SAAH,GAGrD,IAFL/H,EAAI,EAAJA,KACAe,EAAS,EAATA,UAMA,OAJAxE,qBAAU,WACRgB,QAAQC,IAAI,gCACX,IAGD,kBAAC,IAAQ,MACN,WACC,IAAQkE,EAAkB1B,EAAlB0B,IAAKjI,EAAauG,EAAbvG,EAAGwH,EAAUjB,EAAViB,MACV/J,EAAMwK,GAAOA,EAAIsG,QAAWvO,EAClC,OACE,kBAACqO,GAAQ,MACN,YAAe,IACVG,EADE,EAAJlI,KACyBa,kBAAkB1J,EAAvB6I,CAA2BgB,GAQjD,OAPIE,IACFgH,EACE,2BACE,kBAAC,GAAI,CAAChH,MAAOA,GAAQgH,KAIpB,oCAAGA,U,gCC3BlBC,GAAe,SAAArO,GACnB,IAAQQ,EAAUR,EAAVQ,MACF2F,EAAOnG,EAAMQ,MAAM8N,MAAMtO,EAAMJ,GAC7BsE,EAAwDiC,EAAxDjC,UAAWvF,EAA6CwH,EAA7CxH,eAAgB2I,EAA6BnB,EAA7BmB,YAAaK,EAAgBxB,EAAhBwB,YAE1CT,GADY1G,EAAM+N,YACN/N,EAAMuH,eAAeT,IAGvC,EAA8BlB,eAAKzH,GAAkB,GAAI,CACvDmI,mBAAmB,IADb9C,EAAQ,EAARA,SAAawK,EAAI,kBAGnBC,EAAmB,eAAQD,GAC7B7G,WACK8G,EAAoBC,oBACpBD,EAAoB3P,OAS7B,IAAM6P,EAA0B,SAA1BA,IAAkE,IAAvCC,EAAI,uDAAG1H,EAAW2H,EAAI,uDAAG7K,EAKxD,GACE4K,EAAKjQ,gBACLiQ,EAAKjQ,eAAeqF,UACkB,oBAAtC4K,EAAKjQ,eAAeqF,SAASnC,KAO7B,OAAOgN,EAAK3R,KAAI,SAAC4R,EAAOlP,GACtB,IAAMmP,EAAOH,EAAKjQ,eAAeqF,SAASE,UAC1C,EACEkC,eAAK0I,EAAMnQ,eAAgB,CAAEmI,mBAAmB,KAAW,GADrD9C,EAAQ,EAARA,SAAawK,EAAI,kBAKzB,OAHsB9P,EACpBkQ,EAAKjQ,eAAeqF,SAASrF,gBAEbI,MAAK,SAAAE,GAAI,OAAKuP,EAAKvP,MAEjC,uBACEJ,IAAG,cAASe,GACZgE,QAAQ,eACRC,YAAY,6CACZhC,KAAK,UACLkC,UAAQ,IAKZ,kBAACgL,EAAI,eAAClQ,IAAG,cAASe,IAAS4O,GACxBxK,GACC2K,EACEC,EAAKjQ,eAAeqF,SACpBA,OAKL,GACL4K,EAAKjQ,gBACLiQ,EAAKjQ,eAAeqF,UACkB,QAAtC4K,EAAKjQ,eAAeqF,SAASnC,KAC7B,CAEA,IAAMkN,EACJ,kBAAC,IAAQ,MACN,kBAAM,kBAAC,GAAG,CAAC9M,WAAYjC,EAAMiC,WAAY+M,KAAG,EAAC9M,aAAc2M,OAGhE,OAAOE,EAEP,OAAOF,GAGX,OACE3K,KACEgD,EAAUvI,iBACXuI,EAAUvI,eAAeqF,WACzBkD,EAAUvI,eAAeqF,SAASiL,eAChC/H,EAAUvI,eAAeqF,UACxBkD,EAAUvI,eAAeqF,SAASiL,eACS,oBAA3C/H,EAAUvI,eAAeqF,SAASnC,MAClCmC,GACAA,EAAS2C,SACX,kBAAC,GAAY,MACV,SAAA3G,GAGC,OADsBtB,EAAkBwI,EAAUvI,gBAChCI,MAAK,SAAAE,GAAI,OAAKwP,EAAoBxP,MAEhD,uBACE2E,QAAQ,eACRC,YAAY,6CACZhC,KAAK,UACLkC,UAAQ,IAKZ,kBAACG,EAAS,iBAAKuK,EAAyBzO,GACrCgE,GAAY2K,SAmEZO,GAvDoCjL,IAAM2H,MACvD,SAAC5L,GAIC,IAAQQ,EAAUR,EAAVQ,MAEJ2O,EAAiBd,GAAarO,GAClC,OACE,kBAAC,IAAQ,MACN,WACC,IAAMmG,EAAOnG,EAAMQ,MAAM8N,MAAMtO,EAAMJ,GACrC,OACE,kBAAC,GAAK,CACJwN,SAAU5M,EAAM4O,UAChB3H,WAAYtB,EAAKsB,WACjBrG,OACEpB,EAAMQ,MAAM6O,cACZrP,EAAMQ,MAAM6O,aAAazP,IAAMI,EAAMJ,EACjCI,EAAMQ,MAAM6O,aAAaC,EACzBtP,EAAMQ,MAAM+O,cAAcvP,EAAMJ,GAEtCkO,WAAY9N,EAAMQ,MAAMsN,WACxBD,qBAAsB,SAAAzM,GACpBpB,EAAMQ,MAAMmC,WAAWvB,EAAQpB,EAAMJ,KAGvC,kBAAC,IAAQ,MACN,WACC,IAAI4P,EAgBJ,OAfKhP,EAAM4O,YACTD,EAAiBd,GAAarO,IAI9BwP,EADErJ,EAAKwB,aAAewH,EAEpB,kBAAC,GAAqB,CACpBhJ,KAAMA,EACNe,UAAWiI,IAKKA,EAEf,oCAAGK,a,mBC5GbC,GAxD4D,SAAAzP,GACzE,OACE,kBAAC,IAAQ,MACN,WACC,IAAM0P,EAAiB1P,EAAMQ,MAAMmP,UAC7BC,EACJ5P,EAAMQ,MAAM+N,aACZvO,EAAMQ,MAAM+N,YAAY3O,IAAMI,EAAM6P,QAChCC,GAAaJ,GAAkBE,EAC/BG,EAAM,oBAAgBH,EAAgB,UAAY,WACxD,OACE,oCACE,yBACExF,UAAU,iBACV/I,MAAO,CACL0O,OAAQD,EAAYC,EAAS,KAC7BjD,OAAQ8C,EAAgB,KAAO,EAC/BI,UAAWJ,EAAgB,cAAgB,QAG3CA,GACA,wBACEK,QAAQ,cACRC,QACE,oCACE,uBAAM1L,OAAO,UACX,sBAAMrE,KAAI,KACR,uBACEsK,KAAK,OACLxJ,QAAS,SAAAC,GACPlB,EAAMQ,MAAM2P,eAAenQ,EAAMoQ,OAEnCvO,KAAK,aAGT,sBAAM1B,KAAI,KACR,uBACEsK,KAAK,SACL5I,KAAK,SACLZ,QAAS,SAAAC,GAAC,OAAIlB,EAAMQ,MAAM6P,WAAWrQ,EAAM6P,gBAOrD,yBAAKzF,UAAU,qBAAqB/I,MAAO,CAACiJ,OAAOtK,EAAMQ,MAAM8P,gBAAgB,cAAc,e,kBC5D/FnQ,IAAF,IAANC,OAAY,IAAJD,MA0DD,OAAKC,QAAL,EAtDwC,SAAAJ,GACrD,IAAQkG,EAAsBlG,EAAtBkG,KAAMqK,EAAgBvQ,EAAhBuQ,YACNxJ,EAAsCb,EAAtCa,kBAAmBL,EAAmBR,EAAnBQ,eACrB8J,EAAiBzJ,EAAkB,cAAe,CACtDF,aAAc0J,EAAYE,YAC1BrH,MAAO,CAAC,CAAElK,UAAU,EAAM0E,QAAS,uDAEQ,EAAhB8C,IAArB+J,mBAAW,MAAG,GAAE,EAQxB,OACE,oCACE,kBAAC,GAAI,CAACrJ,MAAM,gBACToJ,EACC,uBAAUE,MAAK,KACb,wBAAU5R,MAAO,MAAO,aACxB,wBAAUA,MAAO,MAAO,kBACxB,wBAAUA,MAAO,MAAO,kBACxB,wBAAUA,MAAO,MAAO,mBACxB,wBAAUA,MAAO,MAAO,sBAK7B2R,EAAYvT,KAAI,SAAAyT,GACf,OACE,kBAAC,GAAI,CAACvJ,MAAOuJ,EAAO9R,IAAK8R,GACtB5J,EAAkB,QAAD,OAAS4J,GAAS,CAClC9J,aAAc0J,EAAYK,KAAKD,GAC/BvH,MAAO,CAAC,CAAElK,UAAU,EAAM0E,QAAS,wEAFpCmD,CAIC,sBAAO2J,MAAK,KACV,uBAAO5R,MAAO,GAAE,KAChB,uBAAOA,MAAO,GAAE,KAChB,uBAAOA,MAAO,GAAE,KAChB,uBAAOA,MAAO,GAAE,KAChB,uBAAOA,MAAO,GAAE,KAChB,uBAAOA,MAAO,GAAE,KAChB,uBAAOA,MAAO,IAAG,MACjB,uBAAOA,MAAO,IAAG,gB,+BRvC3B+R,GAAmC,CACvCC,IAAK,GACLC,GAAI,GACJC,GAAI,GACJC,GAAI,GACJC,GAAI,GACJC,GAAI,KA+eN,SAXY9E,KAAI,gBAAJA,EAAI,kBAWhB,CAXYA,QAAI,KAsDT,IAAM+E,GAAmC,CAC9CL,GAAI,KACJC,GAAI,KACJC,GAAI,IACJC,GAAI,IACJC,GAAI,KAGAE,GAAkC,CACtCL,GAAII,GAAoBJ,IAGpBM,GAAoB,CAAER,IAAK,GAAIC,GAAI,GAAIC,GAAI,EAAGC,GAAI,EAAGC,GAAI,EAAGC,GAAI,GA0SvDI,GAxSK,SAACvR,GACnB,IAAMwR,EAAQC,cACRjR,EAAkBC,aAItB,SAAA0H,GAAM,MAAK,CACTuJ,UAAW,EACX1O,OAAQ,CAAC,EAAG,GACZ2O,QAASd,GACTJ,YAAaY,GACbT,KAAMU,GACN,+BACE,OAAOM,KAAQC,YAEjB,sBACE,OAA6B,OAAtBrR,EAAM+N,aAAwB/N,EAAM4O,UAAS,WAC5C5O,EAAMsR,0BACV,IAGN,mBACE,OAAOtR,EAAM+N,aAAe/N,EAAM+N,YAAY3O,GAEhD,aACE,OAAOwG,eACL,CACEkI,MAAO9N,EAAM8N,MACbqD,QAASnR,EAAMmR,QACff,KAAMpQ,EAAMoQ,KACZH,YAAajQ,EAAMuR,gBAErB,CAAEjL,mBAAmB,KAGzBkL,KAAM3F,GAAK4F,OACX,eACE,OAAOzR,EAAMwR,OAAS3F,GAAK4F,QAE7B,gBACE,OAAOzR,EAAMwR,OAAS3F,GAAK6F,SAE7BC,WAAU,SAAC1U,GACT+C,EAAMwR,KAAOvU,EAAE2U,OAAOtT,OAExBwP,MAAO,GACPR,WAAY,KACZuE,kBAAkB,EAClB,wBACE,MAAO,CACL5B,YAAajQ,EAAMuR,eACnBnB,KAAMpQ,EAAMoQ,OAGhB,qBACE,OAAO/S,OAAOD,KAAK4C,EAAMiQ,cAE3B,qBACE,OAAO5S,OAAOyU,YACZ9R,EAAMuR,eAAe7U,KAAI,SAAAyT,GAAK,MAAI,CAChCA,EACAnQ,EAAMmR,QAAQhB,IAAU,SAI9B4B,UAAS,WACP,OAA2C,IAApC1U,OAAOD,KAAK4C,EAAM8N,OAAO3H,QAElC6L,SAAQ,SAAClE,GACP,IAAM1P,EAAUf,OAAOyU,YACrBzU,OAAOe,QAAQ0P,GAAOpR,KAAI,mCAAE2B,EAAG,KAAEuR,EAAI,WAAqB,CACxDvR,EAAI,2BAECuR,GAAI,IACPlM,UACEkM,EAAK9I,aACL9G,EAAMuH,eAAeqI,EAAK9I,aAAapD,iBAI/C1D,EAAM8N,MAAQ1P,GAEhB6T,WAAU,SAACC,EAAgBf,GACrBgB,KAAKC,UAAUpS,EAAMmR,UAAYgB,KAAKC,UAAUjB,KAGpDjO,QAAQC,IAAI,gBAAiByC,eAAK5F,EAAMmR,SAAUA,GAClDnR,EAAMmR,QAAUA,IAElBkB,cAAa,SAAC/E,EAAYgF,GACxBpP,QAAQC,IAAI,gBAAiBmK,EAAYtN,EAAM8N,OAE/C9N,EAAMsN,WAAa3F,EAAO2F,YAAcA,GAE1CiF,uBAAsB,SAACtC,GAAkC,IAArBuC,EAAc,uDAAG,EACnDxS,EAAMiQ,YAAc5S,OAAOyU,YACzB7B,EAAYvT,KAAI,SAAAyT,GAAK,MAAI,CACvBA,EACAS,GAAoBT,GAASqC,QAInCC,oBAAmB,SAAC7K,GAA+B,IAAxB6K,EAAoB,UAAD,6CAAC,EAC7CzS,EAAMuS,uBAAuB3K,EAAOqI,YAAYwC,GAChDzS,EAAMoQ,KAAI,2BACLpQ,EAAMoQ,MACNxI,EAAOwI,MAEZpQ,EAAM0S,6BAA4B,IAEpC7C,WAAU,SAACxR,GACTsU,iBAAO3S,EAAM8N,MAAOzP,GACpB2S,KAGF,eACE,OAAOpL,eACL,CACEuL,QAASnR,EAAM4S,eACf1B,UAAWlR,EAAMkR,UACjB1O,OAAQxC,EAAMwC,OACdyN,YAAajQ,EAAMiQ,YACnBG,KAAMpQ,EAAMoQ,KACZyC,mBAAoB7S,EAAMqS,cAC1BS,eAAgB9S,EAAMiS,WACtBc,SAAU/S,EAAM+S,SAChBC,aAAchT,EAAMgT,aACpBlD,gBAAiB9P,EAAM8P,iBAKzB,CAAExJ,mBAAmB,KAIzBuI,aAAc,KACdoE,gBAAe,SAACpE,GACd7O,EAAM6O,aAAeA,GAEvBkE,SAAQ,SAACG,EAASC,EAAUC,GAC1BpT,EAAMiT,gBAAgBG,IAExBJ,aAAY,WACVhT,EAAMiT,gBAAgB,OAExBI,SAAQ,SAAChV,GACP,OAAO2B,EAAMmR,QAAQnR,EAAMsN,YAAY/O,MAAK,SAAA+U,GAAC,OAAIA,EAAElU,IAAMf,MAE3DkV,yBAAwB,SAAClV,GACvB,OAAOhB,OAAOyU,YACZzU,OAAOe,QAAQ4B,EAAMmR,SAASzU,KAAI,mCAAc,MAAM,CAAb,KAAO,KAExC6B,MAAK,SAACoH,GAAmB,OAAKA,EAAKvG,IAAMf,WAIrD0Q,cAAa,SAAC1Q,GACZ,IAAMsH,EAAO3F,EAAMqT,SAAShV,GAC5B,OAAOsH,GAAQA,EAAKmJ,GAEtB3M,WAAU,SAACvB,EAAQvC,GACjB,IAAMmV,EAAWxT,EAAM8N,MAAMzP,GACvBsH,EAAO3F,EAAMqT,SAAShV,GACtBoV,EAAmBzT,EAAMuT,yBAAyBlV,GACxD,GAAKmV,EAASvM,YAUd,GAAe,OAAXrG,QAA8B8S,IAAX9S,EAAvB,CAIA,IAAMkO,EAAIrC,KAAKkH,KAAK/S,EAASZ,EAAMkR,WACnCvL,EAAKmJ,EAAIA,GAAK,GACdnJ,EAAKiO,KAAOjO,EAAKmJ,EACjBnJ,EAAKkO,KAAOlO,EAAKmJ,QAhBfzR,OAAOuK,OAAO6L,GAAkBtU,SAAQ,SAAAwG,GAClCA,WACKA,EAAKiO,YACLjO,EAAKkO,UAmBpBC,WAAU,WACR,IAAM1U,EAAIgS,KAAQC,WAEZ+B,EAAmB,CACvBhU,IACAsE,UAAW,KACXuD,YAAY,EACZ9I,eAAgB,GAChB2I,YAAa,KACbK,YAAa,KACbE,IAAK,MAEP0M,cAAI/T,EAAM8N,MAAO1O,EAAGgU,GACpBpC,KAGFjD,YAAa,KACbtC,iBAAgB,SAACnN,GACf,IAAKA,EAKH,OAJA0B,EAAM+N,YAAYrK,UAAY,KAC9B1D,EAAM+N,YAAY5P,eAAiB,KACnC6B,EAAM+N,YAAY5G,YAAc,iBACzBnH,EAAM+N,YAAYnH,MAG3B,IAAMF,EAAY1G,EAAMuH,eAAejJ,GAEvC0B,EAAM+N,YAAYrK,UAAYgD,EAAUhD,UACxC1D,EAAM+N,YAAY5P,eAAiB,GAC/BuI,EAAUc,YACZxH,EAAM+N,YAAY5G,YAAcnH,EAAM6R,iBAEtCkC,cAAI/T,EAAM+N,YAAa,QAAS,KAQlC/N,EAAM+N,YAAYjH,YAAcxI,GAIlCoN,kBAAiB,SAACF,EAAOlN,GACvB0B,EAAM+N,YAAYvC,GAASlN,GAE7B,gBACE,OAA6B,OAAtB0B,EAAM+N,aAEf4B,eAAc,SAAC5B,GACb/N,EAAM+N,YAAcA,GAEtB,qBACE,IAAMxG,EAAiB,GAgBvB,OAfqB,SAAfyM,IAGA,IAFJnM,EAA0C,uDAAGF,EAAOlG,WACpDwS,EAA0C,uCAE1CpM,EAAI1I,SAAQ,SAAAuH,GACVa,EAAeb,EAAU7J,IAAM6J,EAC3BuN,IACFvN,EAAUuN,OAASA,GAEjBvN,EAAUlD,UACZwQ,EAAatN,EAAUlD,SAAUkD,MAIvCsN,GACOzM,GAET,qBAEE,IAAM2M,EAAqBvM,EAAOlG,WAAW9C,QAC3C,SAAA+H,GAAS,OAAIA,EAAUyN,SAGnBC,EAAoBzM,EAAOlG,WAAW9C,QAC1C,SAAA+H,GAAS,OAAKA,EAAUyN,SAGpBE,EAAQ,YACT,IAAIC,IAAIJ,EAAmBxX,KAAI,SAAAgK,GAAS,OAAIA,EAAUyN,WAGrDI,EAAc,GAUpB,OATAF,EAASlV,SAAQ,SAAAgV,GAAU,IAAD,EAClBK,EAAcN,EAAmBvV,QACrC,SAAA+H,GAAS,OAAIA,EAAUyN,QAAUA,KAEnCI,EAAYrK,MAAI,oBAAIiK,EAAQK,GAAW,2BAAaL,GAAK,OAE3DC,EAAkBjV,SAAQ,SAAAuH,GACxB6N,EAAYrK,KAAKxD,MAEZ6N,GAETE,0BAA0B,EAC1B/B,4BAA2B,SAAC+B,GAC1BzU,EAAMyU,yBAA2BA,MAGrC,CAAEhT,WAAYjC,EAAMiC,WAAY6L,WAAY9N,EAAM8N,aAEpD,OAAOtN,G,SSryBM0U,GA/C0B,SAAH,GAA2B,IAArBzT,EAAK,EAALA,MAAOL,EAAM,EAANA,OAC3CZ,EAAQC,aAAc,iBAAO,CACjC8L,QAAS,KAITC,QAAS,EACTC,WAAY,KACZ0I,YAAW,WACT3U,EAAMgM,QAAU,EAChBhM,EAAMiM,WAAa,MAErB2I,YAAW,WACT5U,EAAMgM,QAAU,OAWpB,OAPA9J,qBAAU,WACRkK,aAAapM,EAAM+L,SACnB/L,EAAM2U,cACN3U,EAAM+L,QAAU1L,YAAW,WACzBL,EAAM4U,gBACL,OACF,CAAChU,EAAQK,IAEV,kBAAC,IAAQ,MACN,kBACC,yBACEJ,MAAO,CACLwL,SAAS,WACTC,OAAQ,EACRC,IAAK,EACLsI,MAAO,GACP5I,WAAYjM,EAAMiM,WAClBD,QAAShM,EAAMgM,QACfnC,MAAM,sBACNiL,WAAW,SAGX7T,GAASL,GAAM,UAAO6L,KAAKC,MAAMzL,GAAM,YAAIwL,KAAKC,MAAM9L,KACrDK,GAAK,UAAQwL,KAAKC,MAAMzL,GAAM,OAC9BL,GAAM,UAAO6L,KAAKC,MAAM9L,GAAO,W,cChCtCmU,GAAuBC,wBAAcC,cAwVrCC,GAAUzR,IAAM2H,KACpB,IAAKxL,OAAiB,CAAE6I,KAAM,OAA9B,EAxV+B,SAAAjJ,GAC/B,IAAM2V,EAASrV,kBAAO,GAChBsV,EAAkBtV,mBAClBuV,EAAoBvV,mBACpBE,EAAQ+Q,GAAYvR,GACpB8V,EAAarV,aAAc,iBAAO,CACtCsV,eAAe,EACfC,iBAAgB,SAACD,GACfD,EAAWC,cAAgBA,GAE7BE,UAAW,EACXC,aAAY,SAACzU,GACXqU,EAAWG,UAAYxU,GAEzBmJ,aAAc,EACduL,gBAAe,WACTP,EAAW7U,SAAW6U,EAAW7U,QAAQqV,cAC3CN,EAAWlL,aACTgL,EAAW7U,SAAW6U,EAAW7U,QAAQqV,kBAIjD1T,qBAAU,WACRlC,EAAMuS,uBACJlV,OAAOD,KAAK4C,EAAMiQ,aAClBzQ,EAAMgT,kBAEP,CAAChT,EAAMgT,iBACNhT,EAAMD,aACRC,EAAMD,WAAWgB,QAAUP,GAE7BkC,qBAAU,WACRgB,QAAQC,IAAI,kCACZ1F,MACC,CAACuC,EAAMmR,UACVjP,qBAAU,WAIR,IAAM2T,EAAOnY,oBACX,kBAAM2C,YAAW,kBAAMiV,EAAWK,oBAAmB,KACrD,KAIF,OAFAE,IACAlY,OAAO2E,iBAAiB,SAAUuT,GAC3B,WACLlY,OAAO4E,oBAAoB,SAAUsT,MAEtC,IACH3T,qBAAU,WACHiT,EAAO5U,UACV4U,EAAO5U,SAAU,EACbf,EAAMkC,cACR1B,EAAMiS,WAAW,GAAWzS,EAAMkC,aAAayP,SAGjD9Q,WAAW5C,EAAgB+B,EAAMgC,aAAe,IAE9ChC,EAAMkC,eACJlC,EAAMgP,MACRxO,EAAMwR,KAAO3F,GAAK6F,SAEpB1R,EAAMgS,SAASxS,EAAMkC,aAAaoM,OAClC9N,EAAMuS,uBACJ/S,EAAMkC,aAAauO,YACnBzQ,EAAMgT,gBAGRnS,WAAW5C,EAAgB+B,EAAMgC,aAAe,MAKjD,CAAChC,EAAMkC,aAAclC,EAAMgC,cAE9BU,qBAAU,WACRgB,QAAQC,IAAI,WACX,IACHD,QAAQC,IAAI,SAAUnD,GACtB,MAAwBR,EAAhBgP,WAAG,OAAQ,EACbsH,EACJ,kBAACtI,GAAQ,CAAClP,MAAO,CAAEoH,KAAMlG,EAAMkG,OAC7B,kBAAC,IAAQ,MACN,kBACC,kBAACqP,GAEC,eACAlU,MAAO,CAAEkV,QAAU/V,EAAM+R,YAAuB,QAAT,QACvCnI,UAAU,UACN5J,EAAMgW,UAET3Y,OAAOe,QAAQ4B,EAAM8N,OAAOpR,KAAI,YAAkB,IAAD,mBAAf2B,EAAG,KAAEuR,EAAI,KAC1C,OACE,yBAAKhG,UAAW5J,EAAMsR,yBAA0BjT,IAAKA,GACnD,kBAAC,IAAQ,MACN,kBACC2B,EAAMiW,UACJ,kBAAC,GAAwB,CACvBjW,MAAOA,EACPqP,QAAShR,EACTuR,KAAMA,OAMd,kBAAC,GAAe,CACd5P,MAAOA,EACPZ,EAAGf,EACHoD,WAAYjC,EAAMiC,sBAUpC,GAAI+M,EACF,OAAOsH,EAET,IAAMI,EACJ,oCACE,kBAAC,IAAQ,MAAE,kBAAM,kBAAC,GAAO,CAACjV,MAAOqU,EAAWG,eAC5C,kBAAC,IAAQ,MACN,kBACC,oCACE,uBACE5U,MAAO,CAAEkV,QAAS/V,EAAM+R,YAAc,OAAS,SAC/C1O,YAAa,6BAEdyS,OAMLK,EAAc3W,EAAMwE,OACxB,yBAAK3F,IAAK,UAAWwC,MAAO,CAAEwL,SAAS,aACpC7M,EAAMwE,OAAOkS,IAGhB,yBACErV,MAAO,CACLwL,SAAS,WACT+J,YApJY,EAqJZC,WArJY,EAsJZC,aAtJY,GAwJdjY,IAAK,WAEJ6X,GAGL,OACE,oCAEE,kBAAC,IAAQ,MACN,kBACC,+BACGlW,EAAM8P,gBAAe,4KASxB9P,EAAM8P,gBAAe,kFAIjB,KAAI,cAGF,SAKV,kBAAC,IAAS,CACRlG,UAAU,MACVtI,SAAU,SAAArE,GACRqY,EAAWK,kBACXL,EAAWI,aAAazY,GAAKuC,EAAMwE,OAAS,EAAI,MAElDuS,eAAgB9Y,EAChB+Y,WAAY,CAAE9T,SAAS,QACvB+T,UAAW,CAAEpK,SAAS,YACtBxL,MAAO,CAAEwL,SAAU,YACnBqK,YAAalX,EAAMmX,oBAAkB,MACrCC,QAAS,IACTC,QAAS,MAERV,EACD,yBACE1W,IAAK2V,EACL/W,IAAI,UACJwC,MAAO,CACLiW,WAAW,OACXlW,OAAO,OACPwV,YA7MQ,IAgNV,kBAAC,IAAQ,MACN,WACC,OACE,uBACEjV,gBAAc,EACdwF,MAAO3G,EAAM+W,aACbC,UAAU,QACV/V,MAAK,OACL6C,SAAU9D,EAAMmP,UAChBjO,QAAS,SAAAR,GAAC,OAAIV,EAAM2P,eAAe,OACnCzP,QAASF,EAAMmP,UACf8H,cAAc,EACdpW,MAAO,CAAEwL,SAAU,WAAYzL,OAAO,QACtCD,YAAa,CAAEC,OAAO,QACtBG,UAAW,CACTC,QAAS,EACTJ,OAAO,wBACP8B,SAAS,SAGV1C,EAAMmP,WACL,kBAAC,GAAe,CACdhF,YAAamL,EACbzP,kBACG7F,EAAM+N,aACLlP,EACE+G,eAAK5F,EAAM+N,YAAY5P,eAAgB,CACrCmI,mBAAmB,KACf,GACN,mBAEJ,GAEF7E,WAAYjC,EAAMiC,WAClBkE,KAAM3F,EAAM+N,YACZtC,iBAAkBzL,EAAMyL,iBACxBC,kBAAmB1L,EAAM0L,kBACzBZ,eAAgB9K,EAAM8K,eACtBvD,eAAgBvH,EAAMuH,qBAQlC,uBAAMvD,OAAO,UACX,sBAAMrE,KAAI,KACR,kBAAC,IAAQ,MACN,kBACC,uBACE0B,KAAK,UACL4I,KAAK,OACLe,SAAUhL,EAAM4O,UAChBnO,QAAS/C,mBAASsC,EAAM8T,WAAY,KAAI,gCAOhD,sBAAMnU,KAAI,KACR,kBAAC,IAAQ,MACN,kBACC,uBACEqL,SAAUhL,EAAM4O,UAChBnO,QAAS,SAAAC,GAAC,OAAIV,EAAM0S,6BAA4B,KAAM,gCAO9D,sBAAM/S,KAAI,KACR,uBAAQc,QAAS,SAAAC,GAAC,OAAI4U,EAAWE,kBAAiB,KAAM,6BAI1D,sBAAM7V,KAAI,KACR,kBAAC,IAAQ,MACN,kBACC,sBAAOuQ,MAAK,CACVgH,YAAY,QACZ5V,SAAUtB,EAAM2R,WAChBrT,MAAO0B,EAAMwR,MAEb,sBAAO2F,OAAM,CAAC7Y,MAAOuN,GAAK4F,QAAO,gBACjC,sBAAO0F,OAAM,CAAC7Y,MAAOuN,GAAK6F,SAAQ,qBAKzClS,EAAM4B,eAAiB5B,EAAM4B,mBAIpC,kBAAC,IAAQ,MACN,kBACC,uBACEuB,UAAQ,EACRxB,gBAAc,EACdiW,cAAc,EACdzQ,MAAO,2BACPzG,QAASF,EAAMyU,yBACf1Q,KAAM,SAAArD,GAAC,OACL2U,EAAkB9U,QAAQ8W,yBACxB,SAACC,EAAK1P,GACA0P,GAGJtX,EAAMyS,oBAAoB7K,EAAQpI,EAAMgT,oBAI9CrO,SAAU,SAAAzD,GAAC,OAAIV,EAAM0S,6BAA4B,KAEjD,kBAAC,GAAc,CACbjT,IAAK4V,EACLtF,YAAa/P,EAAMuX,wBAK3B,kBAAC,IAAQ,MACN,kBACC,kBAAC,EAAe,CACdvV,OAAQ,KACRmC,SAAU,SAAAzD,GAAC,OAAI4U,EAAWE,kBAAiB,IAC3CtV,QAASoV,EAAWC,eAEpB,kBAAC,IAAS,CAACiC,UAAW,EAAGC,YAAa,GAAIC,IAAK1X,EAAMuB,kBAS/D,SAAC8H,EAAGsO,GAAC,OAAKA,EAAEnF,iBAAmBnJ,EAAEmJ,kBAGtBoF,GAA+C,SAAH,GAGlD,IAFLhU,EAAM,EAANA,OACGpE,EAAK,kBAER,OACE,kBAAC,KAAc,CAACoE,OAAQA,GACtB,kBAACsR,GAAY1V,K,cCrXJqY,gCACb,SAASrY,GACP,MAAuBA,EAAMsY,eAArBnH,EAAE,EAAFA,GAAID,EAAE,EAAFA,GAAID,EAAE,EAAFA,GACVsH,EAAc1a,OAAOe,QAAQoB,EAAMsY,gBAAgBvZ,MAAK,SAAAtB,GAAC,OAAa,IAATA,EAAE,MAAa,GAC5E+a,EAAWrH,GAAMD,GAAMD,EACvBwH,EAAa,2BAAQzY,EAAMsY,gBAAc,IAAEE,WAASD,kBAC1D,OACE,oCACE,yBAAKlX,MAAO,CAAEwL,SAAS,QAAUE,IAAK,EAAGC,KAAM,EAAGvL,MAAM,UACvDzB,EAAMgE,SAASyU,MAItB,CACEtH,GAAI,CACFlO,SAAU,KAEZiO,GAAI,CACFwH,SAAU,IACVzV,SAAU,KAEZgO,GAAI,CACFyH,SAAU,IACVzV,SAAU,MAEZ+N,GAAI,CACF0H,SAAU,KACVzV,SAAU,MAEZ8N,GAAI,CACF2H,SAAU,KACVzV,SAAU,MAEZ6N,IAAK,CACH4H,SAAU,Q,eCVDC,GAzBc,CAC3Btb,GAAI,aACJ+J,MAAO,qBACP6B,KAAM,QACN2P,WAAW,EACXC,KAAM,OACNlE,MAAO,OACPzQ,UAAU,IACV8D,WAAW,EACXrJ,eAAgB,CACdwL,YAAa,CACX/C,MAAO,iCACPvF,KAAM,WAGVmC,SAAU,CACR,CACEgE,WAAW,EACX3K,GAAI,gBACJ+J,MAAO,qBACP6B,KAAM,WACN/E,UAAW,IAAM4U,YCyBRC,GA9CiB,CAC9B1b,GAAI,gBACJ+J,MAAO,qBACP6B,KAAM,WACN4P,KAAM,OACNlE,MAAO,OACPiE,WAAW,EACX1U,UAAU,KACV8D,WAAW,EACXhE,SAAU,CACR,CACE3G,GAAI,sBACJ+J,MAAO,2BACP6B,KAAM,QACN/E,UAAW,KAASwM,MACpB1I,WAAW,EACXrJ,eAAgB,CACd+P,aAAc,CACZ7M,KAAM,eACNuF,MAAO,sBAOTpD,SAAU,CACR3G,GAAI,gBACJwE,KAAM,kBACNuF,MAAO,qBACPlD,UAAU,KACVvF,eAAgB,CACdqF,SAAU,CACRnC,KAAM,SACNuF,MAAO,SAETtI,MAAO,CACL+C,KAAM,SACNuF,MAAO,gBCDN4R,GArCc,CAC3B3b,GAAI,aACJ+J,MAAO,qBACP6B,KAAM,QACN2P,WAAW,EACXC,KAAM,OACNlE,MAAO,OACPzQ,UAAU,IACV8D,WAAW,EACXhE,SAAU,CACR,CACE3G,GAAI,mBACJ+J,MAAO,2BACP6B,KAAM,QACN/E,UAAW,IAAMwM,MACjB1I,WAAW,EACXrJ,eAAgB,CACdqF,SAAU,CACR3G,GAAI,aACJwE,KAAM,kBACNuF,MAAO,qBACPlD,UAAU,IACVvF,eAAgB,CACdqF,SAAU,CACRnC,KAAM,SACNuF,MAAO,SAETtI,MAAO,CACL+C,KAAM,SACNuF,MAAO,gBCpBN6R,GATe,CAC5B5b,GAAI,cACJ+J,MAAO,eACP6B,KAAM,SACN2P,WAAW,EACXC,KAAM,OACNlE,MAAO,OACPzQ,UAAU,K,mBCyCGgV,GA/Ca,CAC1B7b,GAAI,YACJ+J,MAAO,qBACP6B,KAAM,OACN2P,WAAW,EACXC,KAAM,OACNlE,MAAO,OACPzQ,UAAU,KACVF,SAAU,CACR,CACE3G,GAAI,eACJ+J,MAAO,iCACP6B,KAAM,UACN/E,UAAW,KAAKiV,UAGpBxa,eAAgB,CACdqF,SAAU,CACR3G,GAAI,eACJ+J,MAAO,qBACPvF,KAAM,kBACNqC,UAAW,KAAKiV,QAChBlK,eAAe,EACftQ,eAAgB,CACdya,IAAK,CACHhS,MAAO,eACPvF,KAAM,UAERhD,IAAK,CACHuI,MAAO,MACPvF,KAAM,UAERmC,SAAU,CACRoD,MAAO,iCACPvF,KAAM,W,mBCCDwX,GApCc,CAC3Bhc,GAAI,aACJ+J,MAAO,eACP6B,KAAM,QACN2P,WAAW,EACXC,KAAM,OACNlE,MAAO,OACPzQ,UAAU,KACV8D,WAAW,EACXhE,SAAU,CACR,CACE3G,GAAI,cACJ+J,MAAO,SACPlD,UAAW,KAAMoV,OACjBrQ,KAAM,WAGVtK,eAAgB,CACdqF,SAAU,CACR3G,GAAI,cACJwE,KAAM,kBACNuF,MAAO,SACPlD,UAAW,KAAMoV,OACjB3a,eAAgB,CACd4a,UAAW,CACTnS,MAAO,2BACPvF,KAAM,UAERsF,MAAO,CACLC,MAAO,eACPvF,KAAM,cCxBVuC,GAAS,IAAIoV,KAAa,CAC9BC,IAAK,iCACLC,QAAQ,CACNC,cAAc,qDC2BHN,GAnCc,CAC3Bhc,GAAI,YACJ+J,MAAO,kCACP6B,KAAM,WACN2P,WAAW,EACXC,KAAM,eACNlE,MAAO,qBACPzQ,UDIuC,SAAAlE,GACvC,MAA0B4Z,YAASzU,IAAInF,EAAMmF,KAAM,CACjDf,UACAyV,YAAa,iBAFPzJ,EAAI,EAAJA,KAAM0J,EAAO,EAAPA,QAIRC,EAAW/Z,EAAMgE,SAAmB9G,KAAI,SAAA8c,GAAC,kCAC1CA,EAAEha,OAAK,IACVqN,OAAQ,IAAI4M,SACV,QACA,YACA,QAAQ,8OAHF,CAcNja,EAAOga,EAAEha,MAAMuZ,UAAUtV,UAE7B,OACE,oCACE,wBACEiW,WAAY,CAAEC,SAAU,GACxBzU,KAAK,QACLqU,QAASA,EACTK,OAAM,KACNN,QAASA,EACTO,WAAYjK,GAAQA,EAAKA,KAAKA,KAAKiK,eClCzCrS,WAAW,EACXhE,SAAU,GACVrF,eAAgB,CACdqF,SAAU,CACR3G,GAAI,cACJwE,KAAM,kBACNuF,MAAO,SACP6H,eAAe,EACf/K,UAAW,KAAMoV,OACjB3a,eAAgB,CACd4a,UAAW,CACTnS,MAAO,2BACPvF,KAAM,UAERsF,MAAO,CACLC,MAAO,eACPvF,KAAM,YAIZsD,IAAK,CACHiC,MAAO,kBACPvF,KAAM,UACNuH,MAAO,CAAC,CAAElK,UAAU,EAAM0E,QAAS,yCClC5BwM,GAAO,CAClB,MAAS,CACP,WAAY,CACV,EAAK,WACL,YAAc,EACd,eAAkB,CAChB,YAAe,kCAEjB,YAAe,aACf,aAAe,EACf,IAAO,GACP,MAAS,gBAEX,WAAY,CACV,EAAK,WACL,YAAc,EACd,eAAkB,CAChB,SAAY,CACV,CACE,eAAkB,CAChB,SAAY,SACZ,MAAS,MAGb,CACE,eAAkB,CAChB,SAAY,SACZ,MAAS,QAKjB,YAAe,mBACf,aAAe,EACf,IAAO,KACP,MAAS,gBAEX,SAAY,CACV,EAAK,WACL,YAAc,EACd,eAAkB,GAClB,YAAe,gBACf,aAAe,EACf,IAAO,KACP,MAAS,gBAEX,WAAY,CACV,EAAK,WACL,UAAa,KACb,YAAc,EACd,eAAkB,GAClB,YAAe,KACf,YAAe,KACf,IAAO,MAET,SAAY,CACV,EAAK,WACL,YAAc,EACd,eAAkB,CAChB,SAAY,CACV,CACE,eAAkB,CAChB,IAAO,2BACP,SAAY,CACV,MAAS,CACP,SAAY,CACV,EAAK,WACL,YAAc,EACd,eAAkB,GAClB,YAAe,gBACf,aAAe,EACf,IAAO,KACP,MAAS,KAGb,QAAW,CACT,GAAM,CACJ,CACE,EAAK,EACL,EAAK,GACL,EAAK,EACL,EAAK,EACL,EAAK,WACL,KAAQ,GACR,KAAQ,GACR,OAAS,EACT,QAAU,KAIhB,KAAQ,CACN,IAAO,GACP,GAAM,GACN,GAAM,EACN,GAAM,EACN,GAAM,EACN,GAAM,GAER,YAAe,CACb,SAKR,CACE,eAAkB,CAChB,IAAO,2BACP,SAAY,CACV,MAAS,CACP,SAAY,CACV,EAAK,WACL,YAAc,EACd,eAAkB,CAChB,SAAY,CACV,CACE,eAAkB,CAChB,SAAY,eACZ,MAAS,MAGb,CACE,eAAkB,CAChB,SAAY,eACZ,MAAS,MAGb,CACE,eAAkB,CAChB,SAAY,eACZ,MAAS,OAIf,aAAgB,CACd,MAGJ,YAAe,sBACf,aAAe,EACf,IAAO,KACP,MAAS,gBAEX,SAAY,CACV,EAAK,WACL,YAAc,EACd,eAAkB,GAClB,YAAe,gBACf,aAAe,EACf,IAAO,KACP,MAAS,6BAGb,QAAW,CACT,GAAM,CACJ,CACE,EAAK,EACL,EAAK,GACL,EAAK,EACL,EAAK,EACL,EAAK,WACL,KAAQ,GACR,KAAQ,GACR,OAAS,EACT,QAAU,GAEZ,CACE,EAAK,EACL,EAAK,GACL,EAAK,EACL,EAAK,GACL,EAAK,WACL,KAAQ,GACR,KAAQ,GACR,OAAS,EACT,QAAU,KAIhB,KAAQ,CACN,IAAO,GACP,GAAM,GACN,GAAM,EACN,GAAM,EACN,GAAM,EACN,GAAM,GAER,YAAe,CACb,WAOZ,YAAe,YACf,YAAe,KACf,IAAO,MAET,SAAY,CACV,EAAK,WACL,YAAc,EACd,eAAkB,CAChB,IAAO,6NACP,SAAY,CACV,CACE,eAAkB,CAChB,UAAa,YACb,MAAS,iBAGb,CACE,eAAkB,CAChB,UAAa,OACb,MAAS,iBAGb,CACE,eAAkB,CAChB,UAAa,WACb,MAAS,iBAGb,CACE,eAAkB,CAChB,UAAa,QACb,MAAS,iBAGb,CACE,eAAkB,CAChB,UAAa,UACb,MAAS,iBAGb,CACE,eAAkB,CAChB,UAAa,WACb,MAAS,mBAKjB,YAAe,YACf,YAAe,KACf,IAAO,OAGX,QAAW,CACT,GAAM,CACJ,CACE,EAAK,EACL,EAAK,GACL,EAAK,EACL,EAAK,IACL,EAAK,WACL,KAAQ,GACR,KAAQ,GACR,OAAS,EACT,QAAU,GAEZ,CACE,EAAK,EACL,EAAK,GACL,EAAK,EACL,EAAK,IACL,EAAK,WACL,KAAQ,GACR,KAAQ,GACR,OAAS,EACT,QAAU,GAEZ,CACE,EAAK,EACL,EAAK,GACL,EAAK,EACL,EAAK,IACL,EAAK,WACL,KAAQ,GACR,KAAQ,GACR,OAAS,EACT,QAAU,GAEZ,CACE,EAAK,EACL,EAAK,GACL,EAAK,EACL,EAAK,IACL,EAAK,WACL,KAAQ,GACR,KAAQ,GACR,OAAS,EACT,QAAU,GAEZ,CACE,EAAK,EACL,EAAK,IACL,EAAK,EACL,EAAK,EACL,EAAK,WACL,KAAQ,IACR,KAAQ,IACR,OAAS,EACT,QAAU,GAEZ,CACE,EAAK,EACL,EAAK,IACL,EAAK,EACL,EAAK,IACL,EAAK,WACL,KAAQ,IACR,KAAQ,IACR,OAAS,EACT,QAAU,IAGd,GAAM,CACJ,CACE,EAAK,EACL,EAAK,GACL,EAAK,EACL,EAAK,IACL,EAAK,WACL,KAAQ,GACR,KAAQ,GACR,OAAS,EACT,QAAU,GAEZ,CACE,EAAK,EACL,EAAK,GACL,EAAK,EACL,EAAK,EACL,EAAK,WACL,KAAQ,GACR,KAAQ,GACR,OAAS,EACT,QAAU,GAEZ,CACE,EAAK,EACL,EAAK,GACL,EAAK,EACL,EAAK,GACL,EAAK,WACL,KAAQ,GACR,KAAQ,GACR,OAAS,EACT,QAAU,GAEZ,CACE,EAAK,EACL,EAAK,GACL,EAAK,EACL,EAAK,IACL,EAAK,WACL,KAAQ,GACR,KAAQ,GACR,OAAS,EACT,QAAU,GAEZ,CACE,EAAK,EACL,EAAK,IACL,EAAK,EACL,EAAK,IACL,EAAK,WACL,KAAQ,IACR,KAAQ,IACR,OAAS,EACT,QAAU,GAEZ,CACE,EAAK,EACL,EAAK,IACL,EAAK,EACL,EAAK,IACL,EAAK,WACL,KAAQ,IACR,KAAQ,IACR,OAAS,EACT,QAAU,KAIhB,KAAQ,CACN,IAAO,GACP,GAAM,GACN,GAAM,EACN,GAAM,EACN,GAAM,EACN,GAAM,GAER,YAAe,CACb,KACA,O,qBC3LEhM,GAAS,IAAIoV,KAAa,CAC9BC,IAAK,iCACLC,QAAS,CACPC,cAAe,qDAqDnBjW,QAAQC,IACNgP,KAAKC,UAAU,CAAC+F,GAAOI,GAAUC,GAAOC,GAAQC,GAAMG,GAAOiB,MAGhDC,OAtDO,WACpB,IAAM/I,EAAQC,cAEdtT,OAAOqT,MAAQA,EACf9O,qBAAU,WAERvE,OAAO2E,iBAAiB,SAAU0O,MAEpC,MAAuCnP,mBAAS,GAAE,mBAA3C2Q,EAAc,KAAEwH,EAAY,KAC7Bha,EAAQC,aAAc,iBAAO,CACjCga,gBAAiB,MAEnB,OACE,oCACE,kBAAC,KAAQ,CAAC5N,SAAU,CAAE6N,OAAQ,KAC9B,kBAAC,GAAS,CACR1H,eAAgBA,EAChBxO,OAAQ,SAACkS,GACP,OAAO,yBAAKrV,MAAO,CAAE0O,OAAO,eAAkB2G,IAEhD9U,cAAe,WACb,OACE,oCACE,sBAAMzB,KAAI,CAACiH,MAAM,4BACf,uBACEtI,MAAOkU,EACPlR,SAAU,SAACrE,GAAC,OAAK+c,EAAa/c,GAAK,OAGvC,sBAAM0C,KAAI,CAACiH,MAAM,6BACf,kBAAC,IAAQ,MACN,kBACC,uBACEtI,MAAO0B,EAAMia,gBACb3Y,SAAU,SAACrE,GAAC,OAAM+C,EAAMia,gBAAkBhd,GAAK,WAQ7D2G,OAAQA,GACRlC,aAAckO,GACdnO,WAAY,CAAC0W,GAAOI,GAAUC,GAAOC,GAAQC,GAAMG,GAAOiB,QCtP9Clb,QACW,cAA7BjB,OAAOwc,SAASC,UAEe,UAA7Bzc,OAAOwc,SAASC,UAEhBzc,OAAOwc,SAASC,SAASC,MACvB,2DCbN,IAAMC,GAAKzc,SAAS0c,eAAe,QACnCD,GAAKzZ,MAAMD,OAAO,OAClB4Z,IAAS3N,OAAO,kBAAC,GAAG,MAAIyN,IDkIlB,kBAAmBG,WACrBA,UAAUC,cAAcC,MAAMC,MAAK,SAAAC,GACjCA,EAAaC,kB","file":"static/js/main.c223c1f9.chunk.js","sourcesContent":["var map = {\n\t\".\": 133,\n\t\"./\": 133,\n\t\"./GraphQLLanguageService\": 156,\n\t\"./GraphQLLanguageService.d\": 316,\n\t\"./GraphQLLanguageService.d.ts\": 316,\n\t\"./GraphQLLanguageService.d.ts.map\": 633,\n\t\"./GraphQLLanguageService.js\": 156,\n\t\"./GraphQLLanguageService.js.map\": 634,\n\t\"./autocompleteUtils\": 88,\n\t\"./autocompleteUtils.d\": 317,\n\t\"./autocompleteUtils.d.ts\": 317,\n\t\"./autocompleteUtils.d.ts.map\": 635,\n\t\"./autocompleteUtils.js\": 88,\n\t\"./autocompleteUtils.js.map\": 636,\n\t\"./getAutocompleteSuggestions\": 114,\n\t\"./getAutocompleteSuggestions.d\": 318,\n\t\"./getAutocompleteSuggestions.d.ts\": 318,\n\t\"./getAutocompleteSuggestions.d.ts.map\": 637,\n\t\"./getAutocompleteSuggestions.js\": 114,\n\t\"./getAutocompleteSuggestions.js.map\": 638,\n\t\"./getDefinition\": 101,\n\t\"./getDefinition.d\": 319,\n\t\"./getDefinition.d.ts\": 319,\n\t\"./getDefinition.d.ts.map\": 639,\n\t\"./getDefinition.js\": 101,\n\t\"./getDefinition.js.map\": 640,\n\t\"./getDiagnostics\": 115,\n\t\"./getDiagnostics.d\": 320,\n\t\"./getDiagnostics.d.ts\": 320,\n\t\"./getDiagnostics.d.ts.map\": 641,\n\t\"./getDiagnostics.js\": 115,\n\t\"./getDiagnostics.js.map\": 642,\n\t\"./getHoverInformation\": 134,\n\t\"./getHoverInformation.d\": 321,\n\t\"./getHoverInformation.d.ts\": 321,\n\t\"./getHoverInformation.d.ts.map\": 643,\n\t\"./getHoverInformation.js\": 134,\n\t\"./getHoverInformation.js.map\": 644,\n\t\"./getOutline\": 155,\n\t\"./getOutline.d\": 322,\n\t\"./getOutline.d.ts\": 322,\n\t\"./getOutline.d.ts.map\": 645,\n\t\"./getOutline.js\": 155,\n\t\"./getOutline.js.map\": 646,\n\t\"./index\": 133,\n\t\"./index.d\": 323,\n\t\"./index.d.ts\": 323,\n\t\"./index.d.ts.map\": 647,\n\t\"./index.js\": 133,\n\t\"./index.js.map\": 648\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 315;","import { debounce } from 'lodash';\nlet doWindowResizeInitial = () => {\n  if (typeof window !== 'undefined') {\n    const event: Event = document.createEvent('HTMLEvents');\n    event.initEvent('resize', true, false);\n    window.dispatchEvent(event);\n  }\n};\nexport const doWindowResize = debounce(doWindowResizeInitial, 200);\n//@ts-ignore\nwindow.doWindowResize = doWindowResize;\n\nexport const findRequiredRules = componentProps => {\n  if (!componentProps) {\n    return [];\n  }\n  return Object.entries(componentProps)\n    .map(([key, value]) => {\n      if (\n        Object.entries(value).find(\n          ([propName, value]) =>\n            propName === 'rules' && value.find(rule => rule.required),\n        )\n      ) {\n        return key;\n      }\n    })\n    .filter(Boolean);\n};\n\nexport const getObjectKeysWhenIsArray = (\n  obj,\n  prev = '',\n  returnValue = {},\n  defaultPush = {},\n) => {\n  if (obj === null) {\n    return returnValue;\n  }\n  if (obj instanceof Array) {\n    returnValue[`${prev}`] = obj.map(() => defaultPush);\n    obj.forEach((e, i) => {\n      getObjectKeysWhenIsArray(e, `${prev}[${i}]`, returnValue, defaultPush);\n    });\n    return returnValue;\n  }\n  if (typeof obj === 'object') {\n    Object.entries(obj).forEach(([key, value], i) => {\n      const index = `${prev}.${key}`;\n      if (value instanceof Array) {\n        returnValue[index] = value.map(e => defaultPush);\n        getObjectKeysWhenIsArray(value, index, returnValue, defaultPush);\n        return true;\n      }\n      getObjectKeysWhenIsArray(value, index, returnValue, defaultPush);\n    });\n    return returnValue;\n  }\n};\n","import {\n  Form,\n  Select,\n  TreeSelect,\n  Input,\n  Switch,\n  Tooltip,\n  Icon,\n  Button,\n  Radio,\n  Collapse,\n  Row,\n  Col,\n  Divider,\n  Card,\n  Spin,\n} from 'antd';\nimport { FormComponentProps } from 'antd/lib/form';\nimport {\n  ComponentGroup,\n  ComponentType,\n  FPBItem,\n  ComponentProps,\n} from './useFPBStore';\nimport React, { useState, useEffect, Fragment, useRef } from 'react';\nimport { get } from 'lodash';\nimport CommonInput from './CommonInput';\nimport { DragDropContext, Droppable, Draggable } from 'react-beautiful-dnd';\nimport useSizeMe from './useSizeMe';\nimport { toJS } from 'mobx';\nimport { getObjectKeysWhenIsArray } from './utils';\nimport FPBForm from './FPBForm';\nimport GraphqlEditor from './GraphqlEditor';\nimport { observer, Observer } from 'mobx-react-lite';\n\nconst { Option, OptGroup } = Select;\nconst { TreeNode } = TreeSelect;\nconst { Panel } = Collapse;\nenum Size {\n  SMALL,\n  MIDDLE,\n  LARGE,\n}\n// xs\t<576\n// sm\t≥576\n// md\t≥768\n// lg\t≥992\n// xl\t≥1200\n// xxl ≥1600\nconst getFormItemCol = (width: number) => {\n  const col = { labelCol: { span: 24 }, wrapperCol: { span: 24 } };\n  // if (width >= 256) {\n  //   col.labelCol.span = 10;\n  //   col.wrapperCol.span = 14;\n  // }\n  return col;\n};\nconst getCol = (width: number, size: Size) => {\n  const col = { span: 24 };\n  if (size === Size.LARGE) {\n    return col;\n  } else if (size === Size.MIDDLE) {\n    if (width >= 576 && width < 1200) {\n      col.span = 8;\n      return col;\n    } else if (width >= 1200) {\n      col.span = 6;\n      return col;\n    }\n    return col;\n  } else if (size === Size.SMALL) {\n    if (width > 256 && width < 576) {\n      col.span = 12;\n      return col;\n    } else if (width >= 576 && width < 1200) {\n      col.span = 6;\n      return col;\n    } else if (width >= 1200) {\n      col.span = 4;\n      return col;\n    }\n    return col;\n  }\n};\nexport interface ItemSettingProps {\n  /**\n   * 分组组件\n   */\n  componentGroup: (ComponentGroup | ComponentType)[];\n  /**\n   * 平铺组件方便查找属性\n   */\n  flatComponents: { [id: string]: ComponentType };\n  /**\n   * item类型\n   * @param id id\n   */\n  onItemTypeChange(id: string);\n  /**\n   * item的属性改变\n   * @param field 字段\n   * @param value 值\n   */\n  onItemPropsChange(field: string, value: any);\n}\nexport interface ItemSettingFormProps\n  extends FormComponentProps,\n    ItemSettingProps {\n  /**\n   * 编辑中数据，用于初始化值\n   */\n  item: FPBItem;\n  parentStore: any;\n  components: ComponentType[];\n  /**\n   * 初始计数器\n   */\n  initialKeyCounter;\n}\n\nconst { create, Item } = Form;\n\nconst ItemSettingForm: React.SFC<ItemSettingFormProps> = observer(props => {\n  // const [render, setRender] = useState(false);\n  const { form, item } = props;\n  console.log('ItemSettingForm', toJS(props));\n  const [keyCounter, setKeyCounter] = useState(() => props.initialKeyCounter);\n  const recordItem = useRef(item);\n  // useEffect(() => {\n  //   setTimeout(() => setRender(true), 300);\n  // }, []);\n  useEffect(() => {\n    if (recordItem.current !== item) {\n      form.resetFields();\n      recordItem.current = item;\n    }\n  }, [item]);\n  useEffect(() => {\n    // if (!render) {\n    //   return;\n    // }\n    //临时解决方案\n    const { componentProps } = form.getFieldsValue();\n    Object.keys(keyCounter).length &&\n      componentProps &&\n      form.setFieldsValue({\n        componentProps,\n      });\n  }, [keyCounter]);\n\n  const initialValue: FPBItem | { [key: string]: any } =\n    toJS(item, { recurseEverything: true }) || {};\n  const { getFieldDecorator, getFieldsValue, getFieldValue } = form;\n  const renderTypeTreeNode = component => {\n    if (component.children) {\n      return (\n        <TreeNode\n          value={component.id}\n          title={component.label}\n          key={component.id}\n        >\n          {component.children.map(component => {\n            return renderTypeTreeNode(component);\n          })}\n        </TreeNode>\n      );\n    }\n    return (\n      <TreeNode\n        value={component.id}\n        title={component.label}\n        key={component.id}\n      />\n    );\n  };\n  // const [settingForm] = useSizeMe(size => {\n  //   const { width } = size;\n  //   return (\n  //     <>\n  //       <div></div>\n  //       {width && render&&(\n\n  //       )}\n  //     </>\n  //   );\n  // }, {});\n  // if (!render) {\n  //   return <>{/* <Spin spinning={true}/> */}</>;\n  // }\n  //组件类型\n  const componentTypeDec = getFieldDecorator('componentId', {\n    initialValue: initialValue.componentId,\n    //preserve: true\n  });\n  /**\n   * 自适应高度\n   */\n  const autoHeightDec = getFieldDecorator('autoHeight', {\n    valuePropName: 'checked',\n    initialValue: initialValue.autoHeight,\n    //preserve: true\n  });\n  /**\n   * 是否作为表单域\n   */\n  const isFormFieldDec = getFieldDecorator('isFormField', {\n    valuePropName: 'checked',\n    initialValue: initialValue.isFormField,\n    //preserve: true\n  });\n  /**\n   * 是否作为表单域id\n   */\n  const $idDec = getFieldDecorator('$id', {\n    initialValue: initialValue.$id,\n    //preserve: true\n  });\n  /**\n   * 是否作为表单域label\n   */\n  const labelDec = getFieldDecorator('label', {\n    initialValue: initialValue.label,\n    //preserve: true\n  });\n  const { componentId, isFormField } = getFieldsValue();\n  // console.log(props.flatComponents[componentId]);\n  const { componentProps = {}, formField } =\n    props.flatComponents[componentId] || {};\n  const sortProps = ({ destination, source }) => {\n    if (!destination) {\n      return;\n    }\n    const values = form.getFieldsValue();\n    const arr = get(values, destination.droppableId);\n    const dragValue = arr[source.index];\n    arr.splice(source.index, 1);\n    arr.splice(destination.index, 0, dragValue);\n    form.setFieldsValue({\n      componentProps: values.componentProps,\n    });\n  };\n  const deleteProp = (propName, index) => {\n    const values = getFieldsValue();\n    const arr = get(values, propName);\n    arr.splice(index, 1);\n    keyCounter[propName].splice(index, 1);\n    form.setFieldsValue({\n      componentProps: values.componentProps,\n    });\n    setKeyCounter({ ...keyCounter });\n  };\n  const createComponentPropsForm = (\n    componentProps: ComponentProps,\n    prefix = 'componentProps',\n  ) => {\n    const componentPropsEntries = Object.entries(componentProps);\n    return [\n      ...componentPropsEntries\n        .filter(([, prop]) => prop.type.indexOf('array') < 0)\n        .map(([name, prop], i) => {\n          let setting;\n          const propName = `${prefix}.${name}`;\n          const options = {\n            rules: prop.rules,\n          };\n          if (prop.type === 'string') {\n            setting = (\n              <Item label={prop.label} key={propName}>\n                {getFieldDecorator(propName, {\n                  initialValue: get(initialValue, propName),\n                  ...options,\n                  //preserve: true\n                })(<CommonInput />)}\n              </Item>\n            );\n          } else if (prop.type === 'FPR') {\n            // console.log('FPR', get(initialValue, propName));\n\n            setting = (\n              <Item label={prop.label} key={propName}>\n                {getFieldDecorator(propName, {\n                  initialValue: toJS(get(initialValue, propName), {\n                    recurseEverything: true,\n                  }),\n                  ...options,\n                  //preserve: true\n                })(<FPBForm components={props.components} />)}\n              </Item>\n            );\n          } else if (prop.type === 'graphql') {\n            setting = (\n              <Item label={prop.label} key={propName}>\n                {getFieldDecorator(propName, {\n                  initialValue: get(initialValue, propName),\n                  ...options,\n                  //preserve: true\n                })(<GraphqlEditor />)}\n              </Item>\n            );\n          }\n\n          return setting;\n        }),\n      <Collapse key={`settings`} accordion destroyInactivePanel={false}>\n        {componentPropsEntries\n          .filter(([, prop]) => prop.type.indexOf('array') >= 0)\n          .map(([name, prop], i) => {\n            let setting;\n            const propName = `${prefix}.${name}`;\n            let mapedArr;\n            mapedArr = keyCounter[propName] || [];\n            let renderAfterAddButtonComponent;\n            if (prop.type === 'array:component') {\n              renderAfterAddButtonComponent = (\n                <DragDropContext onDragEnd={sortProps}>\n                  <Droppable droppableId={propName}>\n                    {provided => {\n                      return (\n                        <div\n                          {...provided.droppableProps}\n                          ref={provided.innerRef}\n                        >\n                          {mapedArr.map((p, pi) => {\n                            const key = `${propName}[${pi}]`;\n                            return (\n                              <Draggable key={key} draggableId={key} index={pi}>\n                                {provided => {\n                                  return (\n                                    <div\n                                      key={key}\n                                      ref={provided.innerRef}\n                                      {...provided.draggableProps}\n                                      // className=\"ant-form ant-form-inline\"\n                                    >\n                                      <Card\n                                        style={{ margin: `5px 0` }}\n                                        key={`car${pi}`}\n                                        actions={[\n                                          <div {...provided.dragHandleProps}>\n                                            <Icon type=\"drag\" key={'drag'} />\n                                          </div>,\n                                          <Icon\n                                            type=\"delete\"\n                                            key={'delete'}\n                                            onClick={_ =>\n                                              deleteProp(propName, pi)\n                                            }\n                                          />,\n                                        ]}\n                                      >\n                                        {createComponentPropsForm(\n                                          componentProps[name].componentProps,\n                                          `${propName}[${pi}].componentProps`,\n                                        )}\n                                      </Card>\n                                    </div>\n                                  );\n                                }}\n                              </Draggable>\n                            );\n                          })}\n                          {provided.placeholder}\n                        </div>\n                      );\n                    }}\n                  </Droppable>\n                </DragDropContext>\n              );\n            } else if (prop.type === 'array:string') {\n              renderAfterAddButtonComponent = (\n                <DragDropContext onDragEnd={sortProps}>\n                  <Droppable droppableId={propName}>\n                    {provided => {\n                      return (\n                        <div\n                          {...provided.droppableProps}\n                          ref={provided.innerRef}\n                        >\n                          {mapedArr.map((p, pi) => {\n                            const key = `${propName}[${pi}]`;\n                            debugger;\n                            return (\n                              <Draggable key={key} draggableId={key} index={pi}>\n                                {provided => {\n                                  return (\n                                    <div\n                                      key={key}\n                                      ref={provided.innerRef}\n                                      {...provided.draggableProps}\n                                      className=\"ant-form ant-form-inline\"\n                                    >\n                                      <Item>\n                                        <div {...provided.dragHandleProps}>\n                                          <Icon type=\"drag\" />\n                                        </div>\n                                      </Item>\n                                      <Item>\n                                        {getFieldDecorator(key, {\n                                          //preserve: true,\n                                          initialValue: get(item, key),\n                                        })(<CommonInput />)}\n                                      </Item>\n                                      <Item>\n                                        <Icon\n                                          onClick={_ =>\n                                            deleteProp(propName, pi)\n                                          }\n                                          type=\"delete\"\n                                          style={{\n                                            color: `red`,\n                                            cursor: `pointer`,\n                                          }}\n                                        />\n                                      </Item>\n                                    </div>\n                                  );\n                                }}\n                              </Draggable>\n                            );\n                          })}\n                          {provided.placeholder}\n                        </div>\n                      );\n                    }}\n                  </Droppable>\n                </DragDropContext>\n              );\n            }\n            setting = (\n              <Panel forceRender header={prop.label} key={`setting${i}`}>\n                <Button\n                  icon=\"plus\"\n                  onClick={e => {\n                    const props = get(item, prefix) || {};\n                    if (!props[name]) {\n                      //没有则默认设置为空数组并默认添加一个\n                      keyCounter[propName] = [{}];\n                      setKeyCounter({ ...keyCounter });\n                      return;\n                    }\n                    //这里是有shouldHaveOne的情况，只走这里\n                    if (!keyCounter[propName]) {\n                      keyCounter[propName] = [];\n                    }\n                    keyCounter[propName].push({});\n                    setKeyCounter({ ...keyCounter });\n                  }}\n                >\n                  添加{prop.label}\n                </Button>\n                {renderAfterAddButtonComponent}\n              </Panel>\n            );\n\n            return setting;\n          })}\n      </Collapse>,\n    ];\n  };\n\n  const propsDecModels = createComponentPropsForm(componentProps);\n\n  return (\n    <Observer>\n      {() =>{\n        return <>\n        <Form {...getFormItemCol(props.parentStore.settingWidth)}>\n          <Collapse\n            accordion\n            defaultActiveKey={['1']}\n            destroyInactivePanel={false}\n          >\n            <Panel forceRender header={`基础设置`} key=\"1\">\n              <Row gutter={15}>\n                <Col {...getCol(props.parentStore.settingWidth, Size.MIDDLE)}>\n                  <Item label={'组件'}>\n                    {componentTypeDec(\n                      <TreeSelect\n                        onChange={_ => setKeyCounter({})}\n                        showSearch\n                        style={{ width: `100%` }}\n                        dropdownStyle={{ maxHeight: 400, overflow: 'auto' }}\n                        placeholder=\"请选择组件\"\n                        allowClear\n                        autoClearSearchValue\n                        treeDefaultExpandAll\n                      >\n                        {props.componentGroup.map(\n                          (groupOrComponent, index) => {\n                            if (groupOrComponent.id) {\n                              return renderTypeTreeNode(groupOrComponent);\n                            }\n                            return (\n                              <TreeNode\n                                disabled\n                                value={groupOrComponent['groupName']}\n                                title={groupOrComponent['groupName']}\n                                key={groupOrComponent['groupName']}\n                              >\n                                {groupOrComponent[\n                                  groupOrComponent['groupName']\n                                ].map(component => {\n                                  return renderTypeTreeNode(component);\n                                })}\n                              </TreeNode>\n                            );\n                          },\n                        )}\n                      </TreeSelect>,\n                    )}\n                  </Item>\n                </Col>\n                <Col {...getCol(props.parentStore.settingWidth, Size.SMALL)}>\n                  <Item\n                    label={\n                      <span>\n                        自适应高度&nbsp;\n                        <Tooltip title=\"开启后区块将自适应内容高度，不能进行纵向resize操作\">\n                          <Icon type=\"question-circle-o\" />\n                        </Tooltip>\n                      </span>\n                    }\n                  >\n                    {autoHeightDec(\n                      <Switch\n                        checkedChildren={'开'}\n                        unCheckedChildren={'关'}\n                      />,\n                    )}\n                  </Item>\n                </Col>\n\n                {formField && (\n                  <Fragment key=\"frag\">\n                    <Col {...getCol(props.parentStore.settingWidth, Size.SMALL)}>\n                      <Item label={'是否作为表单域'}>\n                        {isFormFieldDec(\n                          <Switch\n                            checkedChildren={'是'}\n                            unCheckedChildren={'否'}\n                          />,\n                        )}\n                      </Item>\n                    </Col>\n                    {isFormField && (\n                      <>\n                        <Col\n                          {...getCol(props.parentStore.settingWidth, Size.MIDDLE)}\n                        >\n                          <Item\n                            label={\n                              <span>\n                                id&nbsp;\n                                <Tooltip title=\"表单域传值字段，不填写默认为区块id，需保证唯一\">\n                                  <Icon type=\"question-circle-o\" />\n                                </Tooltip>\n                              </span>\n                            }\n                          >\n                            {$idDec(<CommonInput placeholder={'请填写id'} />)}\n                          </Item>\n                        </Col>\n                        <Col\n                          {...getCol(props.parentStore.settingWidth, Size.MIDDLE)}\n                        >\n                          <Item label={<span>label</span>}>\n                            {labelDec(<CommonInput placeholder={''} />)}\n                          </Item>\n                        </Col>\n                      </>\n                    )}\n                  </Fragment>\n                )}\n                {/* <Col></Col> */}\n              </Row>\n            </Panel>\n            {propsDecModels.length && (\n              <Panel forceRender header={'自定义设置'} key=\"2\">\n                {propsDecModels}\n              </Panel>\n            )}\n          </Collapse>\n        </Form>\n      </>\n      }}\n    </Observer>\n  );\n});\nItemSettingForm.displayName = 'ItemSettingFormObserver';\nexport default React.memo(\n  create<ItemSettingFormProps>({\n    onValuesChange(props, changedValues, allValues) {\n      const field = Object.keys(changedValues)[0];\n      if (!field) {\n        return;\n      }\n      const value = changedValues[field];\n      console.log('onValuesChange', field, allValues[field]);\n      if (field === 'componentId') {\n        props.onItemTypeChange(value);\n      } else {\n        props.onItemPropsChange(field, allValues[field]);\n      }\n    },\n    onFieldsChange(props, fields) {},\n  })(ItemSettingForm),\n);\n","import { Input } from \"antd\"\nimport { InputProps } from \"antd/lib/input\"\nimport React,{ SFC, forwardRef } from \"react\"\n\n/**\n * 通用input,带清除功能\n * @param props @interface InputProps\n */\nconst CommonInput:SFC<InputProps>=forwardRef((props,ref:React.LegacyRef<Input>)=>{\n    return <Input allowClear ref={ref} {...props}/>\n})\n\nexport default CommonInput","import React, { SFC, useRef, useEffect } from 'react';\nimport { Form, Button, Modal, Drawer } from 'antd';\nimport FullScreenModal from './FullScreenModal';\nimport FPB from './FPB';\nimport { ComponentType } from './useFPBStore';\nimport { FormComponentProps } from 'antd/lib/form';\nimport { useLocalStore, Observer } from 'mobx-react-lite';\nimport { doWindowResize } from './utils';\nconst { create, Item } = Form;\ninterface FPBFormProps {\n  components: ComponentType[];\n  onChange?(e);\n  value?;\n}\nconst FPBForm: SFC<FPBFormProps> = props => {\n  const ref: any = useRef();\n  const footerRef: any = useRef();\n  const store = useLocalStore(() => ({\n    visible: false,\n    destory: false,\n    setVisible(visible) {\n      store.visible = visible;\n      if (visible) {\n        setTimeout(() => {\n          store.minuHeight = footerRef.current.clientHeight + 21;\n        }, 0);\n      }\n    },\n    minuHeight: 0,\n  }));\n  return (\n    <>\n      <Button onClick={_ => store.setVisible(true)}>设计</Button>\n      <Observer>\n        {() => (\n          <Drawer\n            drawerStyle={{ height: `100%` }}\n            style={{ height: `100%`, transform: `translate(0)` }}\n            bodyStyle={{ height: `100%`, padding: 5 }}\n            width={`100%`}\n            onClose={_ => store.setVisible(false)}\n            destroyOnClose\n            visible={store.visible}\n          >\n            <>\n              <style>\n                {`\n            .react-grid-item > .react-resizable-handle{\n              display:block;\n            }\n            `}\n              </style>\n              <FPB\n                renderActions={() => (\n                  <>\n                    <Item>\n                      <Button\n                        type=\"primary\"\n                        onClick={_ => {\n                          //   ref.current.config;\n                          props.onChange(null);\n                          setTimeout(\n                            () => props.onChange(ref.current.config),\n                            200,\n                          );\n                        }}\n                      >\n                        保存\n                      </Button>\n                    </Item>\n                    <Item>\n                      <Button\n                        type=\"danger\"\n                        onClick={_ => {\n                          //   ref.current.config;\n                          if (props.onChange) {\n                            props.onChange(null);\n                            setTimeout(\n                              () => props.onChange(ref.current.config),\n                              200,\n                            );\n                          }\n                          store.setVisible(false);\n                        }}\n                      >\n                        保存并关闭\n                      </Button>\n                    </Item>\n                  </>\n                )}\n                renderDelay={200}\n                forwardRef={ref}\n                components={props.components}\n                defaultDatas={props.value}\n              />\n            </>\n          </Drawer>\n        )}\n      </Observer>\n    </>\n  );\n};\n\nexport default FPBForm;\n","import React, { useEffect, useState, SFC, useMemo, useRef } from 'react';\nimport { Modal } from 'antd';\nimport { ModalProps } from 'antd/lib/modal';\nimport ReactDOM from 'react-dom';\n\ninterface FullScreenModalProps extends ModalProps {\n  minuHeight?: number;\n}\n\nconst FullScreenModal: SFC<FullScreenModalProps> = allProps => {\n  const { bodyStyle, ...props } = allProps;\n  const [height, setHeight] = useState(0);\n\n  const minuHeight = useMemo(() => {\n    return props.footer === null ? 0 : props.minuHeight ? props.minuHeight : 53;\n  }, [props.footer, props.minuHeight]);\n  const minuHeightRef = useRef(minuHeight);\n  minuHeightRef.current = minuHeight;\n  useEffect(() => {\n    const caclHeight = () => {\n      setTimeout(() => {\n        const screenHeight = document.documentElement.clientHeight;\n        setHeight(screenHeight - minuHeightRef.current);\n      });\n    };\n    caclHeight();\n    window.addEventListener('resize', caclHeight);\n    return () => {\n      window.removeEventListener('resize', caclHeight);\n    };\n  }, []);\n  return (\n    <Modal\n      style={{ padding: 0, margin: 0, maxWidth: `100%` }}\n      width={`100%`}\n      bodyStyle={{ height, overflow: `auto`, ...bodyStyle }}\n      centered\n      {...props}\n    />\n  );\n};\nexport default FullScreenModal;\n","import React from 'react';\nimport { Alert } from 'antd';\ninterface ErrorWrapperProps {\n  children(props);\n}\nexport default class ErrorWrapper extends React.Component<ErrorWrapperProps> {\n  state = {\n    error: null,\n    info: null,\n  };\n  componentDidCatch(error, info) {\n    this.setState({ error, info });\n    console.log(error);\n    \n  }\n  render() {\n    if (this.state.error) {\n      return (\n        <Alert\n          message=\"错误\"\n          description={this.state.info.componentStack}\n          type=\"error\"\n          showIcon\n        />\n      );\n    }\n    return this.props.children(this.props);\n  }\n}\n","import React, { SFC, useRef, useEffect } from 'react';\nimport GraphiQL from 'graphiql';\nimport 'graphiql/graphiql.css';\nimport { useApolloClient } from '@apollo/react-hooks';\nimport gql from 'graphql-tag';\nimport FullScreenModal from './FullScreenModal';\nimport { printSchema } from 'graphql';\nimport { useLocalStore, Observer } from 'mobx-react-lite';\nimport { Button, Form } from 'antd';\nimport { doWindowResize } from './utils';\nimport ErrorWrapper from './ErrorWrapper';\ninterface GraphqlEditorProps {\n  onChange?(e);\n  value?;\n}\nconst { create, Item } = Form;\nconst GraphqlEditor: SFC<GraphqlEditorProps> = props => {\n  const client = useApolloClient();\n  const ref = useRef();\n  const footerRef: any = useRef();\n  const store = useLocalStore(() => ({\n    visible: false,\n    setVisible(visible) {\n      store.visible = visible;\n      if (visible) {\n        setTimeout(() => {\n          store.minuHeight = footerRef.current.clientHeight + 21;\n          doWindowResize();\n        }, 200);\n      }\n    },\n    minuHeight: 0,\n  }));\n  useEffect(() => {\n    console.log(ref);\n  }, []);\n  return (\n    <>\n      <style>\n        {`\n        \n        .graphiql-container .doc-explorer-title, .graphiql-container .history-title{\n            padding: 0px;\n            height: 34px;\n            line-height: 34px;\n        }\n        `}\n      </style>\n      <Button onClick={_ => store.setVisible(true)}>Graphql编辑器</Button>\n      <Observer>\n        {() => (\n          <FullScreenModal\n            minuHeight={store.minuHeight}\n            closable={false}\n            onOk={() => {}}\n            destroyOnClose\n            footer={\n              <div ref={footerRef}>\n                <Form layout=\"inline\">\n                  <Item>\n                    <Button\n                      type=\"primary\"\n                      onClick={_ => {\n                        const value = (ref.current as any)\n                          .getQueryEditor()\n                          .getValue();\n                        if (props.onChange) {\n                          props.onChange(value);\n                        }\n                      }}\n                    >\n                      保存\n                    </Button>\n                  </Item>\n                  <Item>\n                    <Button\n                      type=\"danger\"\n                      onClick={_ => {\n                        const value = (ref.current as any)\n                          .getQueryEditor()\n                          .getValue();\n                        if (props.onChange) {\n                          props.onChange(value);\n                        }\n                        store.setVisible(false);\n                      }}\n                    >\n                      保存并关闭\n                    </Button>\n                  </Item>\n                  <Item>\n                    <Button\n                      onClick={_ => {\n                        store.setVisible(false);\n                      }}\n                    >\n                      关闭\n                    </Button>\n                  </Item>\n                </Form>\n              </div>\n            }\n            onCancel={_ => store.setVisible(false)}\n            visible={store.visible}\n            bodyStyle={{ padding: 0 }}\n          >\n            {store.visible && (\n              <ErrorWrapper>\n                {() => (\n                  <GraphiQL\n                    query={props.value}\n                    ref={ref}\n                    // response={`{a:1}`}\n                    //   query={null}\n                    storage={{ getItem() {}, setItem() {} }}\n                    operationName={'query'}\n                    fetcher={param => client.query({ query: gql(param.query) })}\n                  >\n                    <GraphiQL.Logo>FPB Graphiql</GraphiQL.Logo>\n                  </GraphiQL>\n                )}\n              </ErrorWrapper>\n            )}\n          </FullScreenModal>\n        )}\n      </Observer>\n    </>\n  );\n};\nexport { GraphqlEditor as default };\n","import React, { ExoticComponent } from 'react';\nimport { useLocalStore, useForceUpdate } from 'mobx-react-lite';\nimport { doWindowResize } from './utils';\nimport { toJS, set, remove } from 'mobx';\nimport 'react-grid-layout/css/styles.css';\nimport 'react-resizable/css/styles.css';\nimport { Size } from 'react-split-pane';\nimport shortid from 'shortid';\nimport { ItemSettingProps } from './ItemSettingForm';\nimport { FormComponentProps, ValidationRule } from 'antd/lib/form';\nimport { RadioChangeEvent } from 'antd/lib/radio';\nimport { ApolloClient } from 'apollo-boost';\nimport debounce from 'lodash/debounce';\nconst emptyLayouts: BreakpointsLayouts = {\n  xxl: [],\n  xl: [],\n  lg: [],\n  md: [],\n  sm: [],\n  xs: [],\n};\ninterface Breakpoints {\n  xxl?: number;\n  xl?: number;\n  lg?: number;\n  md?: number;\n  sm?: number;\n  xs?: number;\n}\ntype ColNumber = 1 | 2 | 3 | 4 | 6 | 8 | 12 | 24;\ninterface Cols {\n  xxl?: ColNumber;\n  xl?: ColNumber;\n  lg?: ColNumber;\n  md?: ColNumber;\n  sm?: ColNumber;\n  xs?: ColNumber;\n}\n/**\n * RGL的基础配置\n */\nexport interface RGLConfig {\n  draggableCancel: string;\n  /**\n   * 元素单位高度\n   */\n  rowHeight?: number;\n  /**\n   * 元素间距\n   */\n  margin?: [number, number];\n  /**\n   *元素的断点布局\n   */\n  layouts: BreakpointsLayouts;\n  /**\n   * 响应断点宽度\n   */\n  breakpoints: Breakpoints;\n  /**\n   * 断点对应格子数\n   */\n  cols: Cols;\n}\n\n/**\n * RGL元素\n */\nexport interface RGLItem {\n  /**\n   * A string corresponding to the component key\n   */\n  i: string;\n  /**\n   * These are all in grid units, not pixels\n   */\n  x: number;\n  y: number;\n  w: number;\n  h: number;\n  minW?: number;\n  maxW?: number;\n  minH?: number;\n  maxH?: number;\n  // If true equal to `isDraggable: false, isResizable: false`.\n  static?: boolean;\n  moved?: boolean;\n  // If false, will not be draggable. Overrides `static`.\n  isDraggable?: boolean;\n  // If false, will not be resizable. Overrides `static`.\n  isResizable?: boolean;\n}\n\n/**\n * 断点布局\n */\nexport interface BreakpointsLayouts {\n  xxl?: RGLItem[];\n  xl?: RGLItem[];\n  lg?: RGLItem[];\n  md?: RGLItem[];\n  sm?: RGLItem[];\n  xs?: RGLItem[];\n}\n\n/**\n * 组件基础属性\n */\ninterface BaseComponentProp {\n  /**\n   * 属性名称\n   */\n  label: string;\n  /**\n   * 类型\n   */\n  type:\n    | 'array:component'\n    | 'array:string'\n    | 'string'\n    | 'number'\n    | 'FPR'\n    | 'graphql';\n  /**\n   * 校验规则\n   */\n  rules?: ValidationRule[];\n  /**\n   * 组件\n   */\n  Component?: React.ComponentClass | ExoticComponent | null | React.SFC;\n  /**\n   * type为array时是否默认增加一个元素\n   */\n  shouldHaveOne?: boolean;\n  /**\n   * 存在组件的话可设置组件默认属性\n   */\n  componentProps?: ComponentProps;\n}\nexport interface CommonComponentProp {\n  /**\n   * id,用于平铺组件查找,仅仅带有component类型的组件有\n   */\n  id: string;\n}\n/**\n * 数组组件属性\n */\nexport interface ArrayComponentProp\n  extends BaseComponentProp,\n    CommonComponentProp {\n  /**\n   * 类型\n   */\n  type: 'array:component';\n  /**\n   * 组件\n   */\n  Component: React.ComponentClass | ExoticComponent | React.SFC;\n  /**\n   * type为array时是否默认增加一个元素\n   */\n  shouldHaveOne?: boolean;\n  /**\n   * 存在组件的话可设置组件默认属性\n   */\n  componentProps?: ComponentProps;\n}\n/**\n * 数组字符串\n */\nexport interface ArrayStringProp extends BaseComponentProp {\n  /**\n   * 类型\n   */\n  type: 'array:string';\n  /**\n   * type为array时是否默认增加一个元素\n   */\n  shouldHaveOne?: boolean;\n}\n\nexport interface FPRProp extends BaseComponentProp {\n  type: 'FPR';\n}\n\nexport interface StringProp extends BaseComponentProp {\n  /**\n   * 类型\n   */\n  type: 'string';\n}\nexport interface GraphqlProp extends BaseComponentProp {\n  /**\n   * 类型\n   */\n  type: 'graphql';\n}\nexport type ComponentPropsCommon =\n  | FPRProp\n  | ArrayComponentProp\n  | ArrayStringProp\n  | StringProp\n  | GraphqlProp;\n\nexport type ComponentPropsChildren =\n  | FPRProp\n  | ArrayComponentProp\n  | ArrayStringProp\n  | StringProp;\n\nexport interface ComponentProps {\n  [propName: string]: ComponentPropsCommon;\n\n  children?: ComponentPropsChildren;\n}\n\n/**\n * 组件基础\n */\nexport interface BaseComponentType {\n  /**\n   * 主键\n   */\n  id: string;\n  /**\n   * 组件名称\n   */\n  label: string;\n  /**\n   * 组件引入名称\n   */\n  name: string;\n  asName?: string;\n  /**\n   * 子组件\n   */\n  children?: Omit<BaseComponentType, 'children'>[];\n  /**\n   * 父组件\n   */\n  parent?: BaseComponentType;\n  /**\n   * 组件,本想dynamic import 一下，但是webpack不支持\n   */\n  Component: React.ComponentClass | React.SFC;\n  /**\n   * 组件属性\n   */\n  componentProps?: ComponentProps;\n  /**\n   * 是否可为表单域\n   */\n  formField?: boolean;\n}\n\n/**\n * 组件类型\n */\nexport interface ComponentType extends BaseComponentType {\n  /**\n   * 引入路径\n   */\n  path: string;\n  /**\n   * 是否为默认引入\n   */\n  isDefault: boolean;\n  /**\n   * 分组\n   */\n  group?: string;\n}\n\nexport interface ComponentGroup {\n  [groupName: string]: ComponentType[] | string;\n}\n\nexport interface FPBProps extends FormComponentProps {\n  /**\n   * 断点差值\n   */\n  breakpointDiff?: number;\n  /**\n   * 外层自定义布局\n   * @param showPart 主要显示内容\n   */\n  layout?(showPart: React.ReactElement): React.ReactElement;\n  FPR?: boolean;\n  forwardRef?: any;\n  /**\n   * 延迟渲染，在模态框弹出动画非常有用，antd modal设置200即可\n   */\n  renderDelay?: number;\n  /**\n   * 渲染其他操作\n   */\n  renderActions?(): React.ReactElement;\n  defaultDatas?: FPBConfig;\n  /**\n   * 左侧布局的默认宽度\n   */\n  contentDefaultSize?: Size;\n  /**\n   * 导入组件\n   */\n  components: ComponentType[];\n  /**\n   * 父级断点，存在时可以锁死断点?很奇怪的是局部宽度响应了fpr\n   */\n  breakpoint?: Breakpoint;\n}\nexport interface ApolloFPBProps extends FPBProps {\n  client: ApolloClient<any>;\n}\nexport interface BreakpointsConfig {\n  breakpoints: string[];\n  cols: Cols;\n}\n\nexport interface FPBConfig {\n  /**\n   *元素的断点布局\n   */\n  layouts: BreakpointsLayouts;\n  /**\n   * 数据源\n   */\n  datas: FPBItemIndexListInitial;\n  /**\n   * 断点对应格子数\n   */\n  cols?: Cols;\n  /**\n   * 包含断点\n   */\n  breakpoints?: string[];\n}\nexport type Breakpoint = 'xxl' | 'xl' | 'lg' | 'md' | 'sm' | 'xs';\n/**\n * pb的store\n */\nexport interface FPBStore extends RGLConfig, ItemSettingProps {\n  /**\n   * 不让拖拽的样式名称\n   */\n  draggableCancelClassName: string;\n  /**\n   * 编辑元素窗口的标题，取i\n   */\n  editingTitle: string;\n  setBreakpointFromEntry(breakpoints: any, breakpointDiff?: number);\n  /**\n   * 获取全部配置项以及数据\n   */\n  config: FPBConfig;\n  /**\n   * 删除区块\n   * @param itemKey 主键\n   */\n  deleteItem(itemKey: string): void;\n  /**\n   * 模式\n   * @enum Mode\n   */\n  mode: Mode;\n  changeMode: (e: RadioChangeEvent) => void;\n  /**\n   * 模式\n   */\n  isPreview: boolean;\n  isDesign: boolean;\n  /**\n   * 索引数据源\n   */\n  datas: FPBItemIndexList;\n  hasLayout: () => boolean;\n  breakpoint: Breakpoint;\n  /**\n   * 断点数组的key\n   */\n  breakpointsArr: string[];\n  /**\n   * 获取当前所有断点的布局数组\n   */\n  computedLayout: BreakpointsLayouts;\n  /**\n   *断点计算配置用于表单初始值\n   */\n  breakpointsConfig: BreakpointsConfig;\n  /**\n   * 布局变更\n   * @param currentLayout 当前布局\n   * @param layouts 变更后布局\n   */\n  setLayouts(currentLayout: BreakpointsLayouts, layouts: BreakpointsLayouts);\n  /**\n   * 数据集合变更\n   *\n   * @param datas 数据集合\n   */\n  setDatas(datas);\n  /**\n   * 设置当前断点\n   * @param breakpoint 当前断点\n   * @param col 布局列\n   */\n  setBreakpoint(breakpoint, col?);\n  /**\n   * RGLConfig\n   */\n  jsConfig: RGLConfig;\n  /**\n   * 根据高度计算元素相对的h\n   * @param height 高度\n   * @param key 主键\n   */\n  caclHeight(height: number | null | undefined, key: string);\n  /**\n   * 创建一个元素\n   */\n  createItem();\n  /**\n   * 根据主键查询当前断点下的item\n   * @param key 主键\n   */\n  findItem(key: string): RGLItem;\n  /**\n   * 找出全部断点下的当前item\n   */\n  findItemInAllBreakpoints(key: string): { [point: string]: RGLItem };\n  /**\n   * 获取元素当前响应布局高度高度\n   * @param key 主键\n   */\n  getItemHeight(key): number;\n  /**\n   * item的resize事件\n   */\n  onResize: RGLItemCallBack;\n  onResizeStop: RGLItemCallBack;\n  /**\n   * 操作中的item\n   */\n  operatedItem: RGLItem;\n  /**\n   * 设置操作中数据\n   * @param item @interface RGLItem\n   */\n  setOperatedItem(item: RGLItem);\n  /**\n   * 编辑中的数据\n   */\n  editingItem: FPBItem;\n  /**\n   * 设置编辑中的数据\n   * @param item @interface FPBItem\n   */\n  setEditingItem(item: FPBItem);\n  /**\n   * 编辑状态\n   */\n  isEditing: boolean;\n  /**\n   * 平铺组件，方便查找\n   */\n  flatComponents: { [id: string]: ComponentType };\n  /**\n   * 组件的为formField,则编辑时默认表单域为true\n   */\n  defaultFormField: boolean;\n  /**\n   * 断点设置弹出\n   */\n  breakpointSettingVisible: boolean;\n  setBreakpointSettingVisible(breakpointSettingVisible: boolean);\n  /**\n   * 设置布局断点配置\n   */\n  setBreakpointConfig(values,setBreakpointConfig?:number);\n}\nexport type RGLItemCallBack = (\n  layout: RGLItem[],\n  /**\n   * 旧数据\n   */\n  oldItem: RGLItem,\n  /**\n   * 新数据\n   */\n  newItem: RGLItem,\n  placeholder: RGLItem,\n  e: MouseEvent,\n  element: HTMLElement,\n) => void;\nexport interface FPBItemIndexList {\n  [key: string]: FPBItem;\n}\nexport interface FPBItemIndexListInitial {\n  [key: string]: Omit<FPBItem, 'Component'>;\n}\n\nexport enum Mode {\n  /**\n   * 设计模式\n   */\n  DESIGN = 'design',\n  /**\n   * 预览模式\n   */\n  PRIVIEW = 'priview',\n}\n\n/**\n * fpb元素\n */\nexport interface FPBItem {\n  /**\n   * 主键\n   */\n  i: string;\n  /**\n   * 组件类\n   */\n  Component: React.ComponentClass | React.SFC;\n  /**\n   * 组件属性\n   */\n  componentProps: { [key: string]: any };\n  /**\n   * 自适应高度\n   */\n  autoHeight: boolean;\n  /**\n   * 组件id\n   */\n  componentId: string;\n  /**\n   * 是否为表单域\n   */\n  isFormField: boolean;\n  /**\n   * 表单域id,默认为i\n   */\n  $id: string;\n  /**\n   * 表单域的label\n   */\n  label?: string;\n}\n// xs\t<576px 响应式栅格，可为栅格数或一个包含其他属性的对象\tnumber|object\t-\n// sm\t≥576px 响应式栅格，可为栅格数或一个包含其他属性的对象\tnumber|object\t-\n// md\t≥768px 响应式栅格，可为栅格数或一个包含其他属性的对象\tnumber|object\t-\n// lg\t≥992px 响应式栅格，可为栅格数或一个包含其他属性的对象\tnumber|object\t-\n// xl\t≥1200px 响应式栅格，可为栅格数或一个包含其他属性的对象\tnumber|object\t-\n// xxl\nexport const breakpointsStandard: Breakpoints = {\n  xl: 1600,\n  lg: 1200,\n  md: 992,\n  sm: 768,\n  xs: 576,\n  // xs: 0\n};\nconst defaultbreakpoints: Breakpoints = {\n  lg: breakpointsStandard.lg,\n  // md: breakpointsStandard.md\n};\nconst defaultCols: Cols = { xxl: 12, xl: 12, lg: 8, md: 6, sm: 4, xs: 2 };\n\nconst useFPBStore = (props): FPBStore => {\n  const force = useForceUpdate();\n  const store: FPBStore = useLocalStore<\n    FPBStore,\n    Omit<Omit<FPBProps, 'form'>, 'apolloClient'>\n  >(\n    source => ({\n      rowHeight: 1,\n      margin: [0, 0],\n      layouts: emptyLayouts,\n      breakpoints: defaultbreakpoints,\n      cols: defaultCols,\n      get draggableCancelClassName() {\n        return shortid.generate();\n      },\n      get draggableCancel() {\n        return store.editingItem !== null || store.isPreview\n          ? `.${store.draggableCancelClassName}`\n          : '';\n      },\n      /*********************** */\n      get editingTitle() {\n        return store.editingItem && store.editingItem.i;\n      },\n      get config() {\n        return toJS<FPBConfig>(\n          {\n            datas: store.datas,\n            layouts: store.layouts,\n            cols: store.cols,\n            breakpoints: store.breakpointsArr,\n          },\n          { recurseEverything: true },\n        );\n      },\n      mode: Mode.DESIGN,\n      get isDesign() {\n        return store.mode === Mode.DESIGN;\n      },\n      get isPreview() {\n        return store.mode === Mode.PRIVIEW;\n      },\n      changeMode(e) {\n        store.mode = e.target.value;\n      },\n      datas: {},\n      breakpoint: 'lg',\n      defaultFormField: true,\n      get breakpointsConfig() {\n        return {\n          breakpoints: store.breakpointsArr,\n          cols: store.cols,\n        };\n      },\n      get breakpointsArr() {\n        return Object.keys(store.breakpoints);\n      },\n      get computedLayout() {\n        return Object.fromEntries(\n          store.breakpointsArr.map(point => [\n            point,\n            store.layouts[point] || [],\n          ]),\n        );\n      },\n      hasLayout() {\n        return Object.keys(store.datas).length !== 0;\n      },\n      setDatas(datas: any) {\n        const entries = Object.fromEntries(\n          Object.entries(datas).map(([key, data]: [string, any]) => [\n            key,\n            {\n              ...data,\n              Component:\n                data.componentId &&\n                store.flatComponents[data.componentId].Component,\n            },\n          ]),\n        ) as any;\n        store.datas = entries;\n      },\n      setLayouts(_currentLayout, layouts) {\n        if (JSON.stringify(store.layouts) == JSON.stringify(layouts)) {\n          return;\n        }\n        console.log('layout-change', toJS(store.layouts), layouts);\n        store.layouts = layouts;\n      },\n      setBreakpoint(breakpoint, _col) {\n        console.log('setBreakpoint', breakpoint, store.datas);\n\n        store.breakpoint = source.breakpoint || breakpoint;\n      },\n      setBreakpointFromEntry(breakpoints, breakpointDiff = 0) {\n        store.breakpoints = Object.fromEntries(\n          breakpoints.map(point => [\n            point,\n            breakpointsStandard[point] + breakpointDiff,\n          ]),\n        );\n      },\n      setBreakpointConfig(values,setBreakpointConfig=0) {\n        store.setBreakpointFromEntry(values.breakpoints,setBreakpointConfig);\n        store.cols = {\n          ...store.cols,\n          ...values.cols,\n        };\n        store.setBreakpointSettingVisible(false);\n      },\n      deleteItem(key) {\n        remove(store.datas, key);\n        force();\n        // setTimeout(doWindowResize,300)\n      },\n      get jsConfig() {\n        return toJS(\n          {\n            layouts: store.computedLayout,\n            rowHeight: store.rowHeight,\n            margin: store.margin,\n            breakpoints: store.breakpoints,\n            cols: store.cols,\n            onBreakpointChange: store.setBreakpoint,\n            onLayoutChange: store.setLayouts,\n            onResize: store.onResize,\n            onResizeStop: store.onResizeStop,\n            draggableCancel: store.draggableCancel,\n            //此处是个问题\n            // isDraggable: store.editingItem === null && !store.isPreview,\n            // isResizable: store.editingItem === null && !store.isPreview,\n          },\n          { recurseEverything: true },\n        );\n      },\n\n      operatedItem: null,\n      setOperatedItem(operatedItem) {\n        store.operatedItem = operatedItem;\n      },\n      onResize(_layout, _oldItem, newItem) {\n        store.setOperatedItem(newItem);\n      },\n      onResizeStop() {\n        store.setOperatedItem(null);\n      },\n      findItem(key) {\n        return store.layouts[store.breakpoint].find(b => b.i === key);\n      },\n      findItemInAllBreakpoints(key) {\n        return Object.fromEntries(\n          Object.entries(store.layouts).map(([point, items]) => [\n            point,\n            items.find((item: { i: string }) => item.i === key),\n          ]),\n        );\n      },\n      getItemHeight(key) {\n        const item = store.findItem(key);\n        return item && item.h;\n      },\n      caclHeight(height, key) {\n        const itemData = store.datas[key];\n        const item = store.findItem(key);\n        const breakpointsItems = store.findItemInAllBreakpoints(key);\n        if (!itemData.autoHeight) {\n          Object.values(breakpointsItems).forEach(item => {\n            if (item) {\n              delete item.maxH;\n              delete item.minH;\n            }\n          });\n\n          return;\n        }\n        if (height === null || height === undefined) {\n          return;\n        }\n        //store中对应的数据，非布局\n        const h = Math.ceil(height / store.rowHeight);\n        item.h = h || 30;\n        item.maxH = item.h;\n        item.minH = item.h;\n        // debounce(doWindowResize,200)\n        // console.log(store.layouts);\n\n        // store.setLayouts([] as any, store.layouts);\n      },\n      createItem() {\n        const i = shortid.generate();\n        // store.layouts[store.breakpoint].push(item);\n        const newItem: FPBItem = {\n          i,\n          Component: null,\n          autoHeight: true,\n          componentProps: {},\n          componentId: null,\n          isFormField: null,\n          $id: null,\n        };\n        set(store.datas, i, newItem);\n        force();\n        // setTimeout(doWindowResize, 200);\n      },\n      editingItem: null,\n      onItemTypeChange(value) {\n        if (!value) {\n          store.editingItem.Component = null;\n          store.editingItem.componentProps = null;\n          store.editingItem.isFormField = null;\n          delete store.editingItem.label;\n          return;\n        }\n        const component = store.flatComponents[value];\n\n        store.editingItem.Component = component.Component;\n        store.editingItem.componentProps = {};\n        if (component.formField) {\n          store.editingItem.isFormField = store.defaultFormField;\n          // store.editingItem.label = \"\";\n          set(store.editingItem, 'label', '');\n          // .label = '';\n          //这里默认给i值吧\n          // store.editingItem.$id = shortid.generate()\n        }\n\n        // Object.entries(component.componentProps).\n        // store.editingItem.componentProps = ;\n        store.editingItem.componentId = value;\n\n        // set(store.editingItem, field, value);\n      },\n      onItemPropsChange(field, value) {\n        store.editingItem[field] = value;\n      },\n      get isEditing() {\n        return store.editingItem !== null;\n      },\n      setEditingItem(editingItem) {\n        store.editingItem = editingItem;\n      },\n      get flatComponents() {\n        const flatComponents = {};\n        const dealChildren = (\n          arr: (ComponentType | BaseComponentType)[] = source.components,\n          parent?: ComponentType | BaseComponentType,\n        ) => {\n          arr.forEach(component => {\n            flatComponents[component.id] = component;\n            if (parent) {\n              component.parent = parent;\n            }\n            if (component.children) {\n              dealChildren(component.children, component);\n            }\n          });\n        };\n        dealChildren();\n        return flatComponents;\n      },\n      get componentGroup() {\n        //有分组组件\n        const componentsHasGroup = source.components.filter(\n          component => component.group,\n        );\n        //无分组组件\n        const componentsNoGroup = source.components.filter(\n          component => !component.group,\n        );\n        //全部分组\n        const allGroup = [\n          ...new Set(componentsHasGroup.map(component => component.group)),\n        ];\n        //自动分组\n        const returnGroup = [];\n        allGroup.forEach(group => {\n          const filterGroup = componentsHasGroup.filter(\n            component => component.group === group,\n          );\n          returnGroup.push({ [group]: filterGroup, groupName: group });\n        });\n        componentsNoGroup.forEach(component => {\n          returnGroup.push(component);\n        });\n        return returnGroup;\n      },\n      breakpointSettingVisible: false,\n      setBreakpointSettingVisible(breakpointSettingVisible) {\n        store.breakpointSettingVisible = breakpointSettingVisible;\n      },\n    }),\n    { components: props.components, breakpoint: props.breakpoint },\n  );\n  return store;\n};\n\nexport default useFPBStore;\n","import { useLocalStore, useObserver, Observer } from \"mobx-react-lite\";\nimport { Tag } from \"antd\";\nimport { useEffect } from \"react\";\nimport React from \"react\";\n\ninterface CalTagProps {\n  /**\n   * 计量宽高\n   */\n  height: number;\n  width: number;\n}\nconst CalTag: React.SFC<CalTagProps> = ({ width, height }) => {\n  const store = useLocalStore(() => ({\n    timeout: null, //计量维度定时器\n    /**\n     * 计量维度的透明度\n     */\n    opacity: 0,\n    transition: null,\n    showCalTag() {\n      store.opacity = 1;\n      store.transition = null;\n    },\n    hideCalTag() {\n      store.opacity = 0;\n      // store.transition= `opacity .5s`;\n    }\n  }));\n  useEffect(() => {\n    clearTimeout(store.timeout);\n    store.showCalTag();\n    store.timeout = setTimeout(() => {\n      store.hideCalTag();\n    }, 1000);\n  }, [height, width]);\n  return (\n    <Observer>\n      {() => (\n        <Tag\n          style={{\n            position: `absolute`,\n            zIndex: 2,\n            top: 0,\n            left: 0,\n            transition: store.transition,\n            opacity: store.opacity\n          }}\n        >\n          {Math.round(width)}x{Math.round(height)}\n        </Tag>\n      )}\n    </Observer>\n  );\n};\nexport default CalTag;\n","import useSizeMe from './useSizeMe';\nimport CalTag from './CalTag';\nimport debounce from 'lodash/debounce';\nimport { useEffect, useCallback } from 'react';\nimport React from 'react';\n/**\n * 区块\n */\nexport interface BlockProps {\n  /**\n   * 父元素自动响应高度\n   * @param height 区块内部高度\n   */\n  onParentHeightChange(height: number);\n  /**\n   * 外层height\n   */\n  height?: number;\n  /**\n   * 断点\n   */\n  breakpoint: string;\n  /**\n   * 开启计算高度\n   */\n  autoHeight: boolean;\n  /**\n   * 显示计量标签\n   */\n  showTag?: boolean;\n}\nconst Block: React.SFC<BlockProps> = props => {\n  const { showTag = true } = props;\n  const [sized, width, height] = useSizeMe(\n    () => {\n      return (\n        <div style={{ position: `relative`, zIndex: 0 }}>\n          {/* 计量维度的tag */}\n          {showTag && <CalTag width={width} height={props.height} />}\n          {props.children}\n        </div>\n      );\n    },\n    {\n      monitorHeight: true,\n      // refreshMode: showTag?'debounce':'throttle',\n      // refreshRate: showTag?200:16,\n    },\n  );\n  const setParent = useCallback(\n    debounce(props.onParentHeightChange, showTag ? 200 : 0),\n    [props.onParentHeightChange],\n  );\n  useEffect(() => {\n    console.log('setHeight');\n\n    setParent(height as number);\n  }, [height, props.breakpoint, props.autoHeight]);\n\n  return <>{sized}</>;\n};\nexport { Block as default };\n","import React, { useState } from \"react\";\nimport { SizeMe } from \"react-sizeme\";\nexport interface Size {\n  width: number;\n  height: number;\n}\n\nexport default function useSizeMe(\n  render,\n  options\n): [React.ReactElement, number, number] {\n  const [currentSize, setSize] = useState<Size>({ width: null, height: null });\n  return [\n    <SizeMe {...options}>\n      {({ size }: { size: Size }) => {\n        if (\n          size.width !== currentSize.width ||\n          size.height !== currentSize.height\n        ) {\n          setSize(size);\n        }\n        return render({ ...size });\n      }}\n    </SizeMe>,\n    currentSize.width,\n    currentSize.height\n  ];\n}\n","import { createContext } from \"react\";\nimport { FormComponentProps } from \"antd/lib/form\";\n\nconst { Provider, Consumer } = createContext<FormComponentProps>({\n  form: null\n});\nexport { Provider, Consumer };\n","import { SFC, useEffect } from 'react';\nimport { Form } from 'antd';\nimport { useObserver, Observer } from 'mobx-react-lite';\nimport { Consumer } from './FormContext';\nimport { FPBItem } from './useFPBStore';\nimport React from 'react';\nconst { Item } = Form;\n/**\n * FPB表单元素\n */\ninterface FormConsumerComponentProps {\n  /**\n   * 传入元素\n   */\n  item: FPBItem;\n  /**\n   * 传入的表单组件\n   */\n  component: React.ReactElement;\n}\nconst FormConsumerComponent: SFC<FormConsumerComponentProps> = ({\n  item,\n  component,\n}) => {\n  useEffect(() => {\n    console.log('FormConsumerComponentProps');\n  }, []);\n\n  return (\n    <Observer>\n      {() => {\n        const { $id, i, label } = item;\n        const id = ($id && $id.trim()) || i;\n        return (\n          <Consumer>\n            {({ form }) => {\n              let renderComponent = form.getFieldDecorator(id)(component);\n              if (label) {\n                renderComponent = (\n                  <Form>\n                    <Item label={label}>{renderComponent}</Item>\n                  </Form>\n                );\n              }\n              return <>{renderComponent}</>;\n            }}\n          </Consumer>\n        );\n      }}\n    </Observer>\n  );\n};\n\nexport default FormConsumerComponent;\n","import React, { SFC } from 'react';\nimport { FPBStore, ComponentType } from './useFPBStore';\nimport { Observer } from 'mobx-react-lite';\nimport Block from './Block';\nimport { toJS } from 'mobx';\nimport FormConsumerComponent from './FormConsumerComponent';\nimport FPB from './FPB';\nimport _ from 'lodash';\nimport ErrorWrapper from './ErrorWrapper';\nimport { findRequiredRules } from './utils';\nimport { Alert } from 'antd';\n\nexport interface ObservableBlockProps {\n  i;\n  store: FPBStore;\n  components: ComponentType[];\n}\nconst getComponent = props => {\n  const { store } = props;\n  const item = props.store.datas[props.i];\n  const { Component, componentProps, componentId, isFormField } = item;\n  const isEditing = store.editingItem === item;\n  const component = store.flatComponents[componentId];\n\n  // const component = store.flatComponents[componentId];\n  const { children, ...rest } = toJS(componentProps || {}, {\n    recurseEverything: true,\n  });\n  const finalComponentProps = { ...rest };\n  if (isFormField) {\n    delete finalComponentProps.defaultValue;\n    delete finalComponentProps.value;\n  }\n\n  // component.componentProps&&findRequiredRules(component.componentProps);\n  /**\n   *\n   * @param comp 组件类型\n   * @param chil 表单中的子元素部分\n   */\n  const renderComponentChildren = (comp = component, chil = children) => {\n    // console.log(toJS(children));\n    //debugger;\n    // //debugger\n\n    if (\n      comp.componentProps && //组件含有属性\n      comp.componentProps.children && //组件属性中包含子元素\n      comp.componentProps.children.type === 'array:component' //子元素为数组\n    ) {\n      // if(comp.componentProps.children.shouldHaveOne){\n      //   //debugger\n      //   chil.push({})\n      // }\n      // console.log('child');\n      return chil.map((child, i) => {\n        const Comp = comp.componentProps.children.Component; //获取子组件组件类型\n        const { children, ...rest } =\n          toJS(child.componentProps, { recurseEverything: true }) || {};\n        const requiredRules = findRequiredRules(\n          comp.componentProps.children.componentProps,\n        );\n        if (requiredRules.find(rule => !rest[rule])) {\n          return (\n            <Alert\n              key={`chil${i}`}\n              message=\"提示\"\n              description=\"属性不全请补齐\"\n              type=\"warning\"\n              showIcon\n            />\n          );\n        }\n        return (\n          <Comp key={`chil${i}`} {...rest}>\n            {children &&\n              renderComponentChildren(\n                comp.componentProps.children as any,\n                children,\n              )}\n          </Comp>\n        );\n      });\n    } else if (\n      comp.componentProps && //组件含有属性\n      comp.componentProps.children && //组件属性中包含子元素\n      comp.componentProps.children.type === 'FPR' //子元素为数组\n    ) {\n      // console.log('renderfpr');\n      const Comp = (\n        <Observer>\n          {() => <FPB components={props.components} FPR defaultDatas={chil}/>}\n        </Observer>\n      );\n      return Comp; //组件含有属性 //组件属性中包含子元素\n    } else {\n      return chil;\n    }\n  };\n  return (\n    Component && //存在Component并且\n    (!component.componentProps || //没有属性或者\n    !component.componentProps.children || //有属性没有子元素或者\n    !component.componentProps.children.shouldHaveOne || //或者有子元素不需要默认创建\n      (component.componentProps.children && //有子元素并且需要有默认元素并且类型还是数组的需要长度大于0\n        component.componentProps.children.shouldHaveOne &&\n        component.componentProps.children.type === 'array:component' &&\n        children &&\n        children.length)) && (\n      <ErrorWrapper>\n        {props => {\n          // console.log('rule',component.componentProps);\n          const requiredRules = findRequiredRules(component.componentProps);\n          if (requiredRules.find(rule => !finalComponentProps[rule])) {\n            return (\n              <Alert\n                message=\"提示\"\n                description=\"属性不全请补齐\"\n                type=\"warning\"\n                showIcon\n              />\n            );\n          }\n          return (\n            <Component {...finalComponentProps} {...props}>\n              {children && renderComponentChildren()}\n            </Component>\n          );\n        }}\n      </ErrorWrapper>\n    )\n  );\n};\n/**\n * 观察者区块\n * @param props @interface ObservableBlockProps\n */\nconst ObservableBlock: SFC<ObservableBlockProps> = React.memo(\n  (props: ObservableBlockProps) => {\n    // useEffect(() => {\n    //   console.log(\"mounted\");\n    // }, []);\n    const { store } = props;\n\n    let finalComponent = getComponent(props);\n    return (\n      <Observer>\n        {() => {\n          const item = props.store.datas[props.i];\n          return (\n            <Block\n              showTag={!store.isPreview}\n              autoHeight={item.autoHeight}\n              height={\n                props.store.operatedItem &&\n                props.store.operatedItem.i === props.i\n                  ? props.store.operatedItem.h\n                  : props.store.getItemHeight(props.i)\n              }\n              breakpoint={props.store.breakpoint}\n              onParentHeightChange={height => {\n                props.store.caclHeight(height, props.i);\n              }}\n            >\n              <Observer>\n                {() => {\n                  let renderedComponent;\n                  if (!store.isPreview) {\n                    finalComponent = getComponent(props);\n                  }\n\n                  if (item.isFormField && finalComponent) {\n                    renderedComponent = (\n                      <FormConsumerComponent\n                        item={item}\n                        component={finalComponent}\n                      />\n                    );\n                    //\n                  } else {\n                    renderedComponent = finalComponent;\n                  }\n                  return <>{renderedComponent}</>;\n                }}\n              </Observer>\n            </Block>\n          );\n        }}\n      </Observer>\n    );\n  },\n);\nexport default ObservableBlock;\n","import React from 'react';\nimport { Popover, Form, Button } from 'antd';\nimport { FPBStore, FPBItem } from './useFPBStore';\nimport { useObserver, Observer } from 'mobx-react-lite';\nexport interface ObservableBlockContainerProps {\n  /**\n   * 全局store\n   */\n  store: FPBStore;\n  /**\n   * itemkey\n   */\n  itemKey: string;\n  /**\n   * @interface FPBItem\n   */\n  data: FPBItem;\n}\nconst ObservableBlockContainer: React.SFC<ObservableBlockContainerProps> = props => {\n  return (\n    <Observer>\n      {() => {\n        const hasEditingItem = props.store.isEditing;\n        const isEditingItem =\n          props.store.editingItem &&\n          props.store.editingItem.i === props.itemKey;\n        const hasBorder = !hasEditingItem || isEditingItem;\n        const border = `1px solid ${isEditingItem ? '#e72727' : '#d3d3d3'}`;\n        return (\n          <>\n            <div\n              className=\"item-container\"\n              style={{\n                border: hasBorder ? border : null,\n                zIndex: isEditingItem ? null : 1,\n                boxSizing: isEditingItem ? 'content-box' : null,\n              }}\n            >\n              {!isEditingItem && (\n                <Popover\n                  trigger=\"contextMenu\"\n                  content={\n                    <>\n                      <Form layout=\"inline\">\n                        <Form.Item>\n                          <Button\n                            icon=\"edit\"\n                            onClick={_ => {\n                              props.store.setEditingItem(props.data);\n                            }}\n                            type=\"primary\"\n                          />\n                        </Form.Item>\n                        <Form.Item>\n                          <Button\n                            icon=\"delete\"\n                            type=\"danger\"\n                            onClick={_ => props.store.deleteItem(props.itemKey)}\n                          />\n                        </Form.Item>\n                      </Form>\n                    </>\n                  }\n                >\n                  <div className=\"function-container\" style={{cursor:props.store.draggableCancel?'not-allowed':null}}></div>\n                </Popover>\n              )}\n            </div>\n          </>\n        );\n      }}\n    </Observer>\n  );\n};\nexport default ObservableBlockContainer;\n","import React, { SFC } from \"react\";\nimport { Form, Modal, Checkbox, Radio } from \"antd\";\nimport { FormComponentProps } from \"antd/lib/form\";\nimport { BreakpointsConfig } from \"./useFPBStore\";\nconst { create, Item } = Form;\ninterface BreakpointFormProps extends FormComponentProps {\n  initialData: BreakpointsConfig;\n}\nconst BreakpointForm: React.SFC<BreakpointFormProps> = props => {\n  const { form, initialData } = props;\n  const { getFieldDecorator, getFieldsValue } = form;\n  const breakpointsDec = getFieldDecorator(\"breakpoints\", {\n    initialValue: initialData.breakpoints,\n    rules: [{ required: true, message: \"必须存在一个断点\" }]\n  });\n  const { breakpoints = [] } = getFieldsValue();\n\n  // xs\t<576px 响应式栅格，可为栅格数或一个包含其他属性的对象\tnumber|object\t-\n  // sm\t≥576px 响应式栅格，可为栅格数或一个包含其他属性的对象\tnumber|object\t-\n  // md\t≥768px 响应式栅格，可为栅格数或一个包含其他属性的对象\tnumber|object\t-\n  // lg\t≥992px 响应式栅格，可为栅格数或一个包含其他属性的对象\tnumber|object\t-\n  // xl\t≥1200px 响应式栅格，可为栅格数或一个包含其他属性的对象\tnumber|object\t-\n  // xxl ≥1600px 响应式栅格，可为栅格数或一个包含其他属性的对象\n  return (\n    <>\n      <Item label=\"断点\">\n        {breakpointsDec(\n          <Checkbox.Group>\n            <Checkbox value={\"xs\"}>{\"xs <576px\"}</Checkbox>\n            <Checkbox value={\"sm\"}>{\"sm ≥768px\"}</Checkbox>\n            <Checkbox value={\"md\"}>{\"md ≥992px\"}</Checkbox>\n            <Checkbox value={\"lg\"}>{\"lg ≥1200px\"}</Checkbox>\n            <Checkbox value={\"xl\"}>{\"xl ≥1600px\"}</Checkbox>\n            {/* <Checkbox value={\"xxl\"}>{\"xxl ≥1600px\"}</Checkbox> */}\n          </Checkbox.Group>\n        )}\n      </Item>\n      {breakpoints.map(point => {\n        return (\n          <Item label={point} key={point}>\n            {getFieldDecorator(`cols.${point}`, {\n              initialValue: initialData.cols[point],\n              rules: [{ required: true, message: \"请选择断点布局栅格数量\" }]\n            })(\n              <Radio.Group>\n                <Radio value={1}>1</Radio>\n                <Radio value={2}>2</Radio>\n                <Radio value={3}>3</Radio>\n                <Radio value={4}>4</Radio>\n                <Radio value={6}>6</Radio>\n                <Radio value={8}>8</Radio>\n                <Radio value={12}>12</Radio>\n                <Radio value={24}>24</Radio>\n              </Radio.Group>\n            )}\n          </Item>\n        );\n      })}\n    </>\n  );\n};\n\nexport default Form.create<BreakpointFormProps>()(BreakpointForm);\n","import { useLocalStore, useObserver, Observer } from 'mobx-react-lite';\nimport { Tag } from 'antd';\nimport { useEffect } from 'react';\nimport React from 'react';\n\ninterface CalTextProps {\n  /**\n   * 计量宽高\n   */\n  height?: number;\n  width?: number;\n}\nconst CalText: React.SFC<CalTextProps> = ({ width, height }) => {\n  const store = useLocalStore(() => ({\n    timeout: null, //计量维度定时器\n    /**\n     * 计量维度的透明度\n     */\n    opacity: 0,\n    transition: null,\n    showCalText() {\n      store.opacity = 1;\n      store.transition = null;\n    },\n    hideCalText() {\n      store.opacity = 0;\n      // store.transition= `opacity .5s`;\n    },\n  }));\n  useEffect(() => {\n    clearTimeout(store.timeout);\n    store.showCalText();\n    store.timeout = setTimeout(() => {\n      store.hideCalText();\n    }, 1000);\n  }, [height, width]);\n  return (\n    <Observer>\n      {() => (\n        <div\n          style={{\n            position: `absolute`,\n            zIndex: 2,\n            top: 0,\n            right: 10,\n            transition: store.transition,\n            opacity: store.opacity,\n            color: `rgba(0, 0, 0, 0.65)`,\n            fontWeight: `bold`,\n          }}\n        >\n          {(width && height && `${Math.round(width)}x${Math.round(height)}`) ||\n            (width &&  `${Math.round(width)}px`) ||\n            (height && `${Math.round(height)}px`)}\n        </div>\n      )}\n    </Observer>\n  );\n};\nexport default CalText;\n","import { Responsive, WidthProvider } from 'react-grid-layout';\nimport React, { useRef, useEffect, SFC, useMemo } from 'react';\nimport { Observer, useLocalStore } from 'mobx-react-lite';\nimport ReactJson from 'react-json-view';\nimport { doWindowResize, getObjectKeysWhenIsArray } from './utils';\nimport 'react-grid-layout/css/styles.css';\nimport 'react-resizable/css/styles.css';\nimport { Empty, Button, Form, Drawer, Radio, Modal } from 'antd';\nimport SplitPane from 'react-split-pane';\nimport ItemSettingForm from './ItemSettingForm';\nimport ObservableBlock from './ObservableBlock';\nimport ObservableBlockContainer from './ObservableBlockContainer';\nimport { Provider } from './FormContext';\nimport { debounce } from 'lodash';\nimport BreakpointForm from './BreakpointForm';\nimport useFPBStore, { FPBProps, Mode, ApolloFPBProps } from './useFPBStore';\nimport { toJS } from 'mobx';\nimport { ApolloProvider } from '@apollo/react-hooks';\nimport CalText from './CalText';\nimport FullScreenModal from './FullScreenModal';\nconst linePadding = 5;\nconst ResponsiveGridLayout = WidthProvider(Responsive);\nconst FPB: React.SFC<FPBProps> = props => {\n  const isInit = useRef(false);\n  const settingRef: any = useRef();\n  const breakpointFormRef = useRef<any>();\n  const store = useFPBStore(props);\n  const localStore = useLocalStore(() => ({\n    configVisible: false,\n    setConfigVisible(configVisible) {\n      localStore.configVisible = configVisible;\n    },\n    mainWidth: 0,\n    setMainWidth(width) {\n      localStore.mainWidth = width;\n    },\n    settingWidth: 0,\n    setSettingWidth() {\n      if (settingRef.current && settingRef.current.clientWidth) {\n        localStore.settingWidth =\n          settingRef.current && settingRef.current.clientWidth;\n      }\n    },\n  }));\n  useEffect(() => {\n    store.setBreakpointFromEntry(\n      Object.keys(store.breakpoints),\n      props.breakpointDiff,\n    );\n  }, [props.breakpointDiff]);\n  if (props.forwardRef) {\n    props.forwardRef.current = store;\n  }\n  useEffect(() => {\n    console.log('layout change & doWindowResize');\n    doWindowResize();\n  }, [store.layouts]);\n  useEffect(() => {\n    /**\n     * 初始化一下setting的宽度\n     */\n    const func = debounce(\n      () => setTimeout(() => localStore.setSettingWidth(), 0),\n      200,\n    );\n    func();\n    window.addEventListener('resize', func);\n    return () => {\n      window.removeEventListener('resize', func);\n    };\n  }, []);\n  useEffect(() => {\n    if (!isInit.current) {\n      isInit.current = true;\n      if (props.defaultDatas) {\n        store.setLayouts([] as any, props.defaultDatas.layouts);\n      }\n\n      setTimeout(doWindowResize, props.renderDelay || 0);\n    }\n    if (props.defaultDatas) {\n      if (props.FPR) {\n        store.mode = Mode.PRIVIEW;\n      }\n      store.setDatas(props.defaultDatas.datas);\n      store.setBreakpointFromEntry(\n        props.defaultDatas.breakpoints,\n        props.breakpointDiff,\n      );\n      // store.setLayouts([] as any, props.defaultDatas.layouts);\n      setTimeout(doWindowResize, props.renderDelay || 0);\n      //模态框动画弹出需要加renderDelay\n\n      // doWindowResize();\n    }\n  }, [props.defaultDatas, props.renderDelay]);\n\n  useEffect(() => {\n    console.log('mount');\n  }, []);\n  console.log('render', store);\n  const { FPR = false } = props;\n  const FPRPart = (\n    <Provider value={{ form: props.form }}>\n      <Observer>\n        {() => (\n          <ResponsiveGridLayout\n            // compactType={'horizontal'}\n            // useCSSTransforms={false}\n            style={{ display: !store.hasLayout() ? 'none' : 'block' }}\n            className=\"layout\"\n            {...store.jsConfig}\n          >\n            {Object.entries(store.datas).map(([key, data]) => {\n              return (\n                <div className={store.draggableCancelClassName} key={key}>\n                  <Observer>\n                    {() =>\n                      store.isDesign && (\n                        <ObservableBlockContainer\n                          store={store}\n                          itemKey={key}\n                          data={data}\n                        />\n                      )\n                    }\n                  </Observer>\n\n                  <ObservableBlock\n                    store={store}\n                    i={key}\n                    components={props.components}\n                  />\n                </div>\n              );\n            })}\n          </ResponsiveGridLayout>\n        )}\n      </Observer>\n    </Provider>\n  );\n  if (FPR) {\n    return FPRPart;\n  }\n  const showPart = (\n    <>\n      <Observer>{() => <CalText width={localStore.mainWidth} />}</Observer>\n      <Observer>\n        {() => (\n          <>\n            <Empty\n              style={{ display: store.hasLayout() ? 'none' : 'block' }}\n              description={'暂无元素'}\n            />\n            {FPRPart}\n          </>\n        )}\n      </Observer>\n    </>\n  );\n  const builderPart = props.layout ? (\n    <div key={'builder'} style={{ position: `relative` }}>\n      {props.layout(showPart)}\n    </div>\n  ) : (\n    <div\n      style={{\n        position: `relative`,\n        paddingLeft: linePadding,\n        paddingTop: linePadding,\n        paddingRight: linePadding,\n      }}\n      key={'builder'}\n    >\n      {showPart}\n    </div>\n  );\n  return (\n    <>\n      {/* 此处在预览模式下取消transition */}\n      <Observer>\n        {() => (\n          <style>\n            {store.draggableCancel\n              ? `\n        .react-grid-item{\n          transition:none!important\n        }\n        .react-grid-layout{\n          transition:none!important\n        }\n        ${\n          store.draggableCancel\n            ? `.react-grid-item > .react-resizable-handle{\n          display:none;\n        }`\n            : null\n        }\n        `\n              : null}\n          </style>\n        )}\n      </Observer>\n\n      <SplitPane\n        className=\"FPB\"\n        onChange={e => {\n          localStore.setSettingWidth();\n          localStore.setMainWidth(e - (props.layout ? 0 : 10));\n        }}\n        onDragFinished={doWindowResize}\n        pane1Style={{ overflow: `auto` }}\n        paneStyle={{ position: `relative` }}\n        style={{ position: 'relative' }}\n        defaultSize={props.contentDefaultSize || `50%`}\n        minSize={479}\n        maxSize={1600}\n      >\n        {builderPart}\n        <div\n          ref={settingRef}\n          key=\"setting\"\n          style={{\n            background: `#fff`,\n            height: `100%`,\n            paddingLeft: linePadding,\n          }}\n        >\n          <Observer>\n            {() => {\n              return (\n                <Drawer\n                  destroyOnClose\n                  title={store.editingTitle}\n                  placement=\"right\"\n                  width={`100%`}\n                  closable={store.isEditing}\n                  onClose={_ => store.setEditingItem(null)}\n                  visible={store.isEditing}\n                  getContainer={false}\n                  style={{ position: 'absolute', height: `100%` }}\n                  drawerStyle={{ height: `100%` }}\n                  bodyStyle={{\n                    padding: 0,\n                    height: `calc( 100% - 54.6px )`,\n                    overflow: `auto`,\n                  }}\n                >\n                  {store.isEditing && (\n                    <ItemSettingForm\n                      parentStore={localStore}\n                      initialKeyCounter={\n                        (store.editingItem &&\n                          getObjectKeysWhenIsArray(\n                            toJS(store.editingItem.componentProps, {\n                              recurseEverything: true,\n                            }) || {},\n                            'componentProps',\n                          )) ||\n                        {}\n                      }\n                      components={props.components}\n                      item={store.editingItem}\n                      onItemTypeChange={store.onItemTypeChange}\n                      onItemPropsChange={store.onItemPropsChange}\n                      componentGroup={store.componentGroup}\n                      flatComponents={store.flatComponents}\n                    />\n                  )}\n                </Drawer>\n              );\n            }}\n          </Observer>\n\n          <Form layout=\"inline\">\n            <Form.Item>\n              <Observer>\n                {() => (\n                  <Button\n                    type=\"primary\"\n                    icon=\"plus\"\n                    disabled={store.isPreview}\n                    onClick={debounce(store.createItem, 50)}\n                  >\n                    添加元素\n                  </Button>\n                )}\n              </Observer>\n            </Form.Item>\n            <Form.Item>\n              <Observer>\n                {() => (\n                  <Button\n                    disabled={store.isPreview}\n                    onClick={_ => store.setBreakpointSettingVisible(true)}\n                  >\n                    断点设置\n                  </Button>\n                )}\n              </Observer>\n            </Form.Item>\n            <Form.Item>\n              <Button onClick={_ => localStore.setConfigVisible(true)}>\n                查看配置\n              </Button>\n            </Form.Item>\n            <Form.Item>\n              <Observer>\n                {() => (\n                  <Radio.Group\n                    buttonStyle=\"solid\"\n                    onChange={store.changeMode}\n                    value={store.mode}\n                  >\n                    <Radio.Button value={Mode.DESIGN}>设计</Radio.Button>\n                    <Radio.Button value={Mode.PRIVIEW}>预览</Radio.Button>\n                  </Radio.Group>\n                )}\n              </Observer>\n            </Form.Item>\n            {props.renderActions && props.renderActions()}\n          </Form>\n        </div>\n      </SplitPane>\n      <Observer>\n        {() => (\n          <Modal\n            centered\n            destroyOnClose\n            maskClosable={false}\n            title={'设置断点'}\n            visible={store.breakpointSettingVisible}\n            onOk={_ =>\n              breakpointFormRef.current.validateFieldsAndScroll(\n                (err, values) => {\n                  if (err) {\n                    return;\n                  }\n                  store.setBreakpointConfig(values, props.breakpointDiff);\n                },\n              )\n            }\n            onCancel={_ => store.setBreakpointSettingVisible(false)}\n          >\n            <BreakpointForm\n              ref={breakpointFormRef}\n              initialData={store.breakpointsConfig}\n            />\n          </Modal>\n        )}\n      </Observer>\n      <Observer>\n        {() => (\n          <FullScreenModal\n            footer={null}\n            onCancel={_ => localStore.setConfigVisible(false)}\n            visible={localStore.configVisible}\n          >\n            <ReactJson collapsed={1} indentWidth={10} src={store.config} />\n          </FullScreenModal>\n        )}\n      </Observer>\n    </>\n  );\n};\nconst FormFPB = React.memo(\n  Form.create<FPBProps>({ name: 'FPB' })(FPB),\n  (p, n) => n.breakpointDiff === p.breakpointDiff,\n);\n\nexport const ApolloFPB: SFC<Omit<ApolloFPBProps, 'form'>> = ({\n  client,\n  ...props\n}) => {\n  return (\n    <ApolloProvider client={client}>\n      <FormFPB {...props} />\n    </ApolloProvider>\n  );\n};\nexport { FormFPB as default };\n","import { applyContainerQuery } from 'react-container-query';\nimport React from 'react';\n//测量尺\nexport default applyContainerQuery(\n  function(props: any) {\n    const { xs, sm, md } = props.containerQuery;\n    const nowBreakpoint=Object.entries(props.containerQuery).find(e => e[1] === true)[0];\n    const isMobile = xs || sm || md;\n    const childrenProps = { ...props.containerQuery, isMobile,nowBreakpoint };\n    return (\n      <>\n        <div style={{ position: `fixed`, top: 0, left: 0, width: `100%` }} />\n        {props.children(childrenProps)}\n      </>\n    );\n  },\n  {\n    xs: {\n      maxWidth: 575,\n    },\n    sm: {\n      minWidth: 576,\n      maxWidth: 767,\n    },\n    md: {\n      minWidth: 768,\n      maxWidth: 1024,\n    },\n    lg: {\n      minWidth: 1025,\n      maxWidth: 1199,\n    },\n    xl: {\n      minWidth: 1200,\n      maxWidth: 1599,\n    },\n    xxl: {\n      minWidth: 1600,\n    },\n  },\n);\n","import { Input } from 'antd';\nimport { ComponentType } from '../FPB/useFPBStore';\nconst input: ComponentType = {\n  id: 'antd-input',\n  label: '输入框',\n  name: 'Input',\n  isDefault: false,\n  path: 'antd',\n  group: 'antd',\n  Component: Input,\n  formField: true,\n  componentProps: {\n    placeholder: {\n      label: '空白占位符',\n      type: 'string',\n    },\n  },\n  children: [\n    {\n      formField: true,\n      id: 'antd-textarea',\n      label: '文本域',\n      name: 'TextArea',\n      Component: Input.TextArea,\n    },\n  ],\n};\nexport default input;\n","import { Input, Checkbox } from 'antd';\nimport { ComponentType } from '../FPB/useFPBStore';\nconst checkbox: ComponentType = {\n  id: 'antd-checkbox',\n  label: '复选框',\n  name: 'Checkbox',\n  path: 'antd',\n  group: 'antd',\n  isDefault: false,\n  Component: Checkbox,\n  formField: true,\n  children: [\n    {\n      id: 'antd-checkbox-group',\n      label: '复选框组',\n      name: 'Group',\n      Component: Checkbox.Group,\n      formField: true,\n      componentProps: {\n        defaultValue: {\n          type: 'array:string',\n          label: '默认值',\n        },\n        //不应该有值这个属性，有的话也应该与变量绑定后期再说\n        // value: {\n        //   type: \"array:string\",\n        //   label: \"值\"\n        // },\n        children: {\n          id: 'antd-checkbox',\n          type: 'array:component',\n          label: '复选框',\n          Component: Checkbox,\n          componentProps: {\n            children: {\n              type: 'string',\n              label: 'label',\n            },\n            value: {\n              type: 'string',\n              label: '值',\n            },\n          },\n        },\n      },\n    },\n  ],\n};\nexport default checkbox;\n","import { Input, Checkbox, Radio } from 'antd';\nimport { ComponentType } from '../FPB/useFPBStore';\nconst radio: ComponentType = {\n  id: 'antd-radio',\n  label: '单选框',\n  name: 'Radio',\n  isDefault: false,\n  path: 'antd',\n  group: 'antd',\n  Component: Radio,\n  formField: true,\n  children: [\n    {\n      id: 'antd-radio-group',\n      label: '单选框组',\n      name: 'Group',\n      Component: Radio.Group,\n      formField: true,\n      componentProps: {\n        children: {\n          id: 'antd-radio',\n          type: 'array:component',\n          label: '单选框',\n          Component: Radio,\n          componentProps: {\n            children: {\n              type: 'string',\n              label: 'label',\n            },\n            value: {\n              type: 'string',\n              label: '值',\n            },\n          },\n        },\n      },\n    },\n  ],\n};\nexport default radio;\n","import { Button } from 'antd';\nimport { ComponentType } from '../FPB/useFPBStore';\nconst button: ComponentType = {\n  id: 'antd-button',\n  label: '按钮',\n  name: 'Button',\n  isDefault: false,\n  path: 'antd',\n  group: 'antd',\n  Component: Button,\n};\nexport default button;\n","import { Input, Checkbox, Radio, Button, Tabs } from 'antd';\nimport { ComponentType } from '../FPB/useFPBStore';\nimport { Fragment } from 'react';\nconst tabs: ComponentType = {\n  id: 'antd-tabs',\n  label: '选项卡',\n  name: 'Tabs',\n  isDefault: false,\n  path: 'antd',\n  group: 'antd',\n  Component: Tabs,\n  children: [\n    {\n      id: 'antd-tabpane',\n      label: '选项卡标签',\n      name: 'TabPane',\n      Component: Tabs.TabPane,\n    },\n  ],\n  componentProps: {\n    children: {\n      id: 'antd-tabpane',\n      label: '子元素',\n      type: 'array:component',\n      Component: Tabs.TabPane,\n      shouldHaveOne: true,\n      componentProps: {\n        tab: {\n          label: '标题',\n          type: 'string',\n        },\n        key: {\n          label: 'key',\n          type: 'string',\n        },\n        children: {\n          label: '选项卡内容',\n          type: 'FPR',\n          // Component: Fragment,\n          // componentProps: {\n          //   children: {\n          //     label: \"内容\",\n          //     type: \"string\"\n          //   }\n          // }\n        },\n      },\n    },\n  },\n};\nexport default tabs;\n","import { Input, Checkbox, Radio, Table } from 'antd';\nimport { ComponentType } from '../FPB/useFPBStore';\nconst table: ComponentType = {\n  id: 'antd-table',\n  label: '表格',\n  name: 'Table',\n  isDefault: false,\n  path: 'antd',\n  group: 'antd',\n  Component: Table,\n  formField: false,\n  children: [\n    {\n      id: 'antd-column',\n      label: '列',\n      Component: Table.Column,\n      name: 'Column',\n    },\n  ],\n  componentProps: {\n    children: {\n      id: 'antd-column',\n      type: 'array:component',\n      label: '列',\n      Component: Table.Column,\n      componentProps: {\n        dataIndex: {\n          label: '数据索引',\n          type: 'string',\n        },\n        title: {\n          label: '标题',\n          type: 'string',\n        },\n      },\n    },\n  },\n};\nexport default table;\n","import React, { SFC } from 'react';\nimport { Table, Row, Col } from 'antd';\nimport { useQuery } from '@apollo/react-hooks';\nimport gql from 'graphql-tag';\nimport ApolloClient from 'apollo-boost';\ninterface GqlTableProps {\n  gql: string;\n}\nconst client = new ApolloClient({\n  uri: 'https://api.github.com/graphql',\n  headers:{\n    Authorization:'Bearer 62babf1d9e1c93ce12700649436e1f9035a5866c'\n  }\n});\nconst DemoGqlTable: SFC<GqlTableProps> = props => {\n  const { data, loading } = useQuery(gql(props.gql), {\n    client,\n    fetchPolicy: 'network-only',\n  });\n  const columns = (props.children as any[]).map(c => ({\n    ...c.props,\n    render: new Function(\n      'props',\n      'dataIndex',\n      'React',\n      `\n      \n    return (text,record,index)=>{\n      console.log('global vars',props,record,index) \n      if(dataIndex==='avatarUrl'){\n        return React.createElement('img',{width:50,src:text})\n      }\n      return text\n    }\n  `,\n    )(props, c.props.dataIndex,React),\n  }));\n  return (\n    <>\n      <Table\n        pagination={{ pageSize: 5 }}\n        size=\"small\"\n        columns={columns}\n        rowKey={`id`}\n        loading={loading}\n        dataSource={data && data.data.data.dataSource}\n      />\n    </>\n  );\n};\n\nexport { DemoGqlTable as default };\n","import { Input, Checkbox, Radio, Table } from 'antd';\nimport { ComponentType } from '../FPB/useFPBStore';\nimport GqlTable from '../components/GqlTable';\nconst table: ComponentType = {\n  id: 'gql-table',\n  label: 'Graphql查询表格',\n  name: 'GqlTable',\n  isDefault: true,\n  path: '@/components',\n  group: '自定义',\n  Component: GqlTable,\n  formField: false,\n  children: [],\n  componentProps: {\n    children: {\n      id: 'antd-column',\n      type: 'array:component',\n      label: '列',\n      shouldHaveOne: true,\n      Component: Table.Column,\n      componentProps: {\n        dataIndex: {\n          label: '数据索引',\n          type: 'string',\n        },\n        title: {\n          label: '标题',\n          type: 'string',\n        },\n      },\n    },\n    gql: {\n      label: 'gql查询',\n      type: 'graphql',\n      rules: [{ required: true, message: '请完成gql查询' }],\n    },\n  },\n};\nexport default table;\n","export const data = {\n  \"datas\": {\n    \"jffT1f5-\": {\n      \"i\": \"jffT1f5-\",\n      \"autoHeight\": true,\n      \"componentProps\": {\n        \"placeholder\": \"请填写姓名\"\n      },\n      \"componentId\": \"antd-input\",\n      \"isFormField\": true,\n      \"$id\": \"\",\n      \"label\": \"姓名\"\n    },\n    \"EiX7-eXY\": {\n      \"i\": \"EiX7-eXY\",\n      \"autoHeight\": true,\n      \"componentProps\": {\n        \"children\": [\n          {\n            \"componentProps\": {\n              \"children\": \"男\",\n              \"value\": \"0\"\n            }\n          },\n          {\n            \"componentProps\": {\n              \"children\": \"女\",\n              \"value\": \"1\"\n            }\n          }\n        ]\n      },\n      \"componentId\": \"antd-radio-group\",\n      \"isFormField\": true,\n      \"$id\": null,\n      \"label\": \"性别\"\n    },\n    \"I7WU2m2d\": {\n      \"i\": \"I7WU2m2d\",\n      \"autoHeight\": true,\n      \"componentProps\": {},\n      \"componentId\": \"antd-textarea\",\n      \"isFormField\": true,\n      \"$id\": null,\n      \"label\": \"备注\"\n    },\n    \"65oj8LJ5\": {\n      \"i\": \"65oj8LJ5\",\n      \"Component\": null,\n      \"autoHeight\": true,\n      \"componentProps\": {},\n      \"componentId\": null,\n      \"isFormField\": null,\n      \"$id\": null\n    },\n    \"vHSD40rC\": {\n      \"i\": \"vHSD40rC\",\n      \"autoHeight\": true,\n      \"componentProps\": {\n        \"children\": [\n          {\n            \"componentProps\": {\n              \"tab\": \"个人简介\",\n              \"children\": {\n                \"datas\": {\n                  \"UZFE4QAw\": {\n                    \"i\": \"UZFE4QAw\",\n                    \"autoHeight\": true,\n                    \"componentProps\": {},\n                    \"componentId\": \"antd-textarea\",\n                    \"isFormField\": true,\n                    \"$id\": null,\n                    \"label\": \"\"\n                  }\n                },\n                \"layouts\": {\n                  \"lg\": [\n                    {\n                      \"w\": 8,\n                      \"h\": 52,\n                      \"x\": 0,\n                      \"y\": 0,\n                      \"i\": \"UZFE4QAw\",\n                      \"minH\": 52,\n                      \"maxH\": 52,\n                      \"moved\": false,\n                      \"static\": false\n                    }\n                  ]\n                },\n                \"cols\": {\n                  \"xxl\": 12,\n                  \"xl\": 12,\n                  \"lg\": 8,\n                  \"md\": 6,\n                  \"sm\": 4,\n                  \"xs\": 2\n                },\n                \"breakpoints\": [\n                  \"lg\"\n                ]\n              }\n            }\n          },\n          {\n            \"componentProps\": {\n              \"tab\": \"意见建议\",\n              \"children\": {\n                \"datas\": {\n                  \"tQYZg3nI\": {\n                    \"i\": \"tQYZg3nI\",\n                    \"autoHeight\": true,\n                    \"componentProps\": {\n                      \"children\": [\n                        {\n                          \"componentProps\": {\n                            \"children\": \"环境\",\n                            \"value\": \"0\"\n                          }\n                        },\n                        {\n                          \"componentProps\": {\n                            \"children\": \"建设\",\n                            \"value\": \"1\"\n                          }\n                        },\n                        {\n                          \"componentProps\": {\n                            \"children\": \"待遇\",\n                            \"value\": \"2\"\n                          }\n                        }\n                      ],\n                      \"defaultValue\": [\n                        \"1\"\n                      ]\n                    },\n                    \"componentId\": \"antd-checkbox-group\",\n                    \"isFormField\": true,\n                    \"$id\": null,\n                    \"label\": \"方向\"\n                  },\n                  \"Ge9XaTpD\": {\n                    \"i\": \"Ge9XaTpD\",\n                    \"autoHeight\": true,\n                    \"componentProps\": {},\n                    \"componentId\": \"antd-textarea\",\n                    \"isFormField\": true,\n                    \"$id\": null,\n                    \"label\": \"具体内容\"\n                  }\n                },\n                \"layouts\": {\n                  \"lg\": [\n                    {\n                      \"w\": 8,\n                      \"h\": 79,\n                      \"x\": 0,\n                      \"y\": 0,\n                      \"i\": \"tQYZg3nI\",\n                      \"minH\": 79,\n                      \"maxH\": 79,\n                      \"moved\": false,\n                      \"static\": false\n                    },\n                    {\n                      \"w\": 8,\n                      \"h\": 91,\n                      \"x\": 0,\n                      \"y\": 79,\n                      \"i\": \"Ge9XaTpD\",\n                      \"minH\": 91,\n                      \"maxH\": 91,\n                      \"moved\": false,\n                      \"static\": false\n                    }\n                  ]\n                },\n                \"cols\": {\n                  \"xxl\": 12,\n                  \"xl\": 12,\n                  \"lg\": 8,\n                  \"md\": 6,\n                  \"sm\": 4,\n                  \"xs\": 2\n                },\n                \"breakpoints\": [\n                  \"lg\"\n                ]\n              }\n            }\n          }\n        ]\n      },\n      \"componentId\": \"antd-tabs\",\n      \"isFormField\": null,\n      \"$id\": null\n    },\n    \"EVRnWB1b\": {\n      \"i\": \"EVRnWB1b\",\n      \"autoHeight\": true,\n      \"componentProps\": {\n        \"gql\": \"{\\n  data:repository(name:\\\"antd\\\",owner:\\\"ant-design\\\"){\\n    data:stargazers(first:100){\\n      dataSource:nodes{\\n        name\\n        avatarUrl\\n        company\\n        email\\n        location\\n      }\\n    }\\n  }\\n}\",\n        \"children\": [\n          {\n            \"componentProps\": {\n              \"dataIndex\": \"avatarUrl\",\n              \"title\": \"头像\"\n            }\n          },\n          {\n            \"componentProps\": {\n              \"dataIndex\": \"name\",\n              \"title\": \"姓名\"\n            }\n          },\n          {\n            \"componentProps\": {\n              \"dataIndex\": \"nickname\",\n              \"title\": \"昵称\"\n            }\n          },\n          {\n            \"componentProps\": {\n              \"dataIndex\": \"email\",\n              \"title\": \"邮箱\"\n            }\n          },\n          {\n            \"componentProps\": {\n              \"dataIndex\": \"company\",\n              \"title\": \"公司\"\n            }\n          },\n          {\n            \"componentProps\": {\n              \"dataIndex\": \"location\",\n              \"title\": \"坐标\"\n            }\n          }\n        ]\n      },\n      \"componentId\": \"gql-table\",\n      \"isFormField\": null,\n      \"$id\": null\n    }\n  },\n  \"layouts\": {\n    \"lg\": [\n      {\n        \"w\": 4,\n        \"h\": 79,\n        \"x\": 0,\n        \"y\": 338,\n        \"i\": \"jffT1f5-\",\n        \"minH\": 79,\n        \"maxH\": 79,\n        \"moved\": false,\n        \"static\": false\n      },\n      {\n        \"w\": 3,\n        \"h\": 79,\n        \"x\": 5,\n        \"y\": 338,\n        \"i\": \"EiX7-eXY\",\n        \"minH\": 79,\n        \"maxH\": 79,\n        \"moved\": false,\n        \"static\": false\n      },\n      {\n        \"w\": 8,\n        \"h\": 91,\n        \"x\": 0,\n        \"y\": 417,\n        \"i\": \"I7WU2m2d\",\n        \"minH\": 91,\n        \"maxH\": 91,\n        \"moved\": false,\n        \"static\": false\n      },\n      {\n        \"w\": 1,\n        \"h\": 30,\n        \"x\": 4,\n        \"y\": 338,\n        \"i\": \"65oj8LJ5\",\n        \"minH\": 30,\n        \"maxH\": 30,\n        \"moved\": false,\n        \"static\": false\n      },\n      {\n        \"w\": 8,\n        \"h\": 112,\n        \"x\": 0,\n        \"y\": 0,\n        \"i\": \"vHSD40rC\",\n        \"minH\": 112,\n        \"maxH\": 112,\n        \"moved\": false,\n        \"static\": false\n      },\n      {\n        \"w\": 8,\n        \"h\": 226,\n        \"x\": 0,\n        \"y\": 112,\n        \"i\": \"EVRnWB1b\",\n        \"minH\": 226,\n        \"maxH\": 226,\n        \"moved\": false,\n        \"static\": false\n      }\n    ],\n    \"md\": [\n      {\n        \"w\": 6,\n        \"h\": 79,\n        \"x\": 0,\n        \"y\": 170,\n        \"i\": \"jffT1f5-\",\n        \"minH\": 79,\n        \"maxH\": 79,\n        \"moved\": false,\n        \"static\": false\n      },\n      {\n        \"w\": 6,\n        \"h\": 79,\n        \"x\": 0,\n        \"y\": 0,\n        \"i\": \"EiX7-eXY\",\n        \"minH\": 79,\n        \"maxH\": 79,\n        \"moved\": false,\n        \"static\": false\n      },\n      {\n        \"w\": 6,\n        \"h\": 91,\n        \"x\": 0,\n        \"y\": 79,\n        \"i\": \"I7WU2m2d\",\n        \"minH\": 91,\n        \"maxH\": 91,\n        \"moved\": false,\n        \"static\": false\n      },\n      {\n        \"w\": 6,\n        \"h\": 30,\n        \"x\": 0,\n        \"y\": 773,\n        \"i\": \"65oj8LJ5\",\n        \"minH\": 30,\n        \"maxH\": 30,\n        \"moved\": false,\n        \"static\": false\n      },\n      {\n        \"w\": 6,\n        \"h\": 112,\n        \"x\": 0,\n        \"y\": 661,\n        \"i\": \"vHSD40rC\",\n        \"minH\": 112,\n        \"maxH\": 112,\n        \"moved\": false,\n        \"static\": false\n      },\n      {\n        \"w\": 6,\n        \"h\": 412,\n        \"x\": 0,\n        \"y\": 249,\n        \"i\": \"EVRnWB1b\",\n        \"minH\": 412,\n        \"maxH\": 412,\n        \"moved\": false,\n        \"static\": false\n      }\n    ]\n  },\n  \"cols\": {\n    \"xxl\": 12,\n    \"xl\": 12,\n    \"lg\": 8,\n    \"md\": 6,\n    \"sm\": 4,\n    \"xs\": 2\n  },\n  \"breakpoints\": [\n    \"lg\",\n    \"md\"\n  ]\n}\n","import React, { useEffect, useState } from 'react';\nimport { ApolloFPB } from './FPB';\nimport './FPB/index.less';\nimport ApolloClient from 'apollo-boost';\nimport input from './demo-components/input';\nimport checkbox from './demo-components/checkbox';\nimport radio from './demo-components/radio';\nimport button from './demo-components/button';\nimport tabs from './demo-components/tabs';\nimport table from './demo-components/table';\nimport gqltable from './demo-components/gql-table';\nimport { data } from './data';\nimport { useForceUpdate, useLocalStore, Observer } from 'mobx-react-lite';\nimport DevTools from 'mobx-react-devtools';\nimport { InputNumber, Form } from 'antd';\nconst testData = {\n  datas: {\n    uOTp7fcS: {\n      i: 'uOTp7fcS',\n      autoHeight: true,\n      componentProps: {\n        children: [\n          {\n            componentProps: {\n              tab: '2',\n              key: '2',\n              children: {\n                datas: {\n                  OMLIhzcr: {\n                    i: 'OMLIhzcr',\n                    autoHeight: true,\n                    componentProps: {},\n                    componentId: 'antd-textarea',\n                    isFormField: true,\n                    $id: null,\n                    label: '',\n                  },\n                },\n                layouts: {\n                  lg: [\n                    {\n                      w: 8,\n                      h: 52,\n                      x: 0,\n                      y: 0,\n                      i: 'OMLIhzcr',\n                      minH: 52,\n                      maxH: 52,\n                      moved: false,\n                      static: false,\n                    },\n                  ],\n                },\n                cols: {\n                  xxl: 12,\n                  xl: 12,\n                  lg: 8,\n                  md: 6,\n                  sm: 4,\n                  xs: 2,\n                },\n                breakpoints: ['lg'],\n              },\n            },\n          },\n          {\n            componentProps: {\n              tab: '1',\n              key: '1',\n              children: {\n                datas: {\n                  KsgHBima: {\n                    i: 'KsgHBima',\n                    autoHeight: true,\n                    componentProps: {},\n                    componentId: 'antd-textarea',\n                    isFormField: true,\n                    $id: null,\n                    label: '',\n                  },\n                },\n                layouts: {\n                  lg: [\n                    {\n                      w: 8,\n                      h: 52,\n                      x: 0,\n                      y: 0,\n                      i: 'KsgHBima',\n                      minH: 52,\n                      maxH: 52,\n                      moved: false,\n                      static: false,\n                    },\n                  ],\n                },\n                cols: {\n                  xxl: 12,\n                  xl: 12,\n                  lg: 8,\n                  md: 6,\n                  sm: 4,\n                  xs: 2,\n                },\n                breakpoints: ['lg'],\n              },\n            },\n          },\n        ],\n      },\n      componentId: 'antd-tabs',\n      isFormField: null,\n      $id: null,\n    },\n  },\n  layouts: {\n    lg: [\n      {\n        w: 4,\n        h: 79,\n        x: 0,\n        y: 338,\n        i: 'jffT1f5-',\n        minH: 79,\n        maxH: 79,\n        moved: false,\n        static: false,\n      },\n      {\n        w: 3,\n        h: 79,\n        x: 5,\n        y: 338,\n        i: 'EiX7-eXY',\n        minH: 79,\n        maxH: 79,\n        moved: false,\n        static: false,\n      },\n      {\n        w: 8,\n        h: 91,\n        x: 0,\n        y: 417,\n        i: 'I7WU2m2d',\n        minH: 91,\n        maxH: 91,\n        moved: false,\n        static: false,\n      },\n      {\n        w: 1,\n        h: 30,\n        x: 4,\n        y: 338,\n        i: '65oj8LJ5',\n        minH: 30,\n        maxH: 30,\n        moved: false,\n        static: false,\n      },\n      {\n        w: 8,\n        h: 112,\n        x: 0,\n        y: 0,\n        i: 'vHSD40rC',\n        minH: 112,\n        maxH: 112,\n        moved: false,\n        static: false,\n      },\n      {\n        w: 8,\n        h: 226,\n        x: 0,\n        y: 112,\n        i: 'EVRnWB1b',\n        minH: 226,\n        maxH: 226,\n        moved: false,\n        static: false,\n      },\n    ],\n    md: [\n      {\n        w: 6,\n        h: 112,\n        x: 0,\n        y: 0,\n        i: 'uOTp7fcS',\n        minH: 112,\n        maxH: 112,\n        moved: false,\n        static: false,\n      },\n    ],\n  },\n  cols: {\n    xxl: 12,\n    xl: 12,\n    lg: 8,\n    md: 6,\n    sm: 4,\n    xs: 2,\n  },\n  breakpoints: ['lg', 'md'],\n};\nconst client = new ApolloClient({\n  uri: 'https://api.github.com/graphql',\n  headers: {\n    Authorization: 'Bearer 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',\n  },\n});\nconst App: React.FC = () => {\n  const force = useForceUpdate();\n  //@ts-ignore\n  window.force = force;\n  useEffect(() => {\n    // 这种情况应该避免，尽量去用sizeMe监听容器\n    window.addEventListener('resize', force);\n  });\n  const [breakpointDiff, setBreakDiff] = useState(0);\n  const store = useLocalStore(() => ({\n    breakpointDiff1: 0,\n  }));\n  return (\n    <>\n      <DevTools position={{ bottom: 0 }} />\n      <ApolloFPB\n        breakpointDiff={breakpointDiff}\n        layout={(showPart) => {\n          return <div style={{ border: `10px solid` }}>{showPart}</div>;\n        }}\n        renderActions={() => {\n          return (\n            <>\n              <Form.Item label=\"断点差值\">\n                <InputNumber\n                  value={breakpointDiff}\n                  onChange={(e) => setBreakDiff(e || 0)}\n                />\n              </Form.Item>\n              <Form.Item label=\"断点差值1\">\n                <Observer>\n                  {() => (\n                    <InputNumber\n                      value={store.breakpointDiff1}\n                      onChange={(e) => (store.breakpointDiff1 = e || 0)}\n                    />\n                  )}\n                </Observer>\n              </Form.Item>\n            </>\n          );\n        }}\n        client={client}\n        defaultDatas={data as any}\n        components={[input, checkbox, radio, button, tabs, table, gqltable]}\n      />\n      {/* <Test/> */}\n    </>\n  );\n};\nconsole.log(\n  JSON.stringify([input, checkbox, radio, button, tabs, table, gqltable]),\n);\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      (process as { env: { [key: string]: string } }).env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\nconst root=document.getElementById('root');\nroot.style.height=`100%`\nReactDOM.render(<App />,root );\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}