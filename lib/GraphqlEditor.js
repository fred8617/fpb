"use strict";var _button=_interopRequireDefault(require("antd/lib/button"));Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0,require("antd/lib/button/style/css");require("antd/lib/form/style/css");var _form=_interopRequireDefault(require("antd/lib/form")),_react=_interopRequireWildcard(require("react")),_graphiql=_interopRequireDefault(require("graphiql"));require("graphiql/graphiql.css");var _reactHooks=require("@apollo/react-hooks"),_graphqlTag=_interopRequireDefault(require("graphql-tag")),_FullScreenModal=_interopRequireDefault(require("./FullScreenModal")),_mobxReactLite=require("mobx-react-lite"),_utils=require("./utils"),_ErrorWrapper=_interopRequireDefault(require("./ErrorWrapper"));function _getRequireWildcardCache(){if("function"!=typeof WeakMap)return null;var a=new WeakMap;return _getRequireWildcardCache=function(){return a},a}function _interopRequireWildcard(a){if(a&&a.__esModule)return a;var b=_getRequireWildcardCache();if(b&&b.has(a))return b.get(a);var c={};if(null!=a){var d=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var e in a)if(Object.prototype.hasOwnProperty.call(a,e)){var f=d?Object.getOwnPropertyDescriptor(a,e):null;f&&(f.get||f.set)?Object.defineProperty(c,e,f):c[e]=a[e]}}return c.default=a,b&&b.set(a,c),c}function _interopRequireDefault(a){return a&&a.__esModule?a:{default:a}}var create=_form.default.create,Item=_form.default.Item,GraphqlEditor=function(a){var b=(0,_reactHooks.useApolloClient)(),c=(0,_react.useRef)(),d=(0,_react.useRef)(),e=(0,_mobxReactLite.useLocalStore)(function(){return{visible:!1,setVisible:function setVisible(a){e.visible=a,a&&setTimeout(function(){e.minuHeight=d.current.clientHeight+21,(0,_utils.doWindowResize)()},200)},minuHeight:0}});return(0,_react.useEffect)(function(){console.log(c)},[]),_react.default.createElement(_react.default.Fragment,null,_react.default.createElement("style",null,"\n        \n        .graphiql-container .doc-explorer-title, .graphiql-container .history-title{\n            padding: 0px;\n            height: 34px;\n            line-height: 34px;\n        }\n        "),_react.default.createElement(_button.default,{onClick:function onClick(){return e.setVisible(!0)}},"Graphql\u7F16\u8F91\u5668"),_react.default.createElement(_mobxReactLite.Observer,null,function(){return _react.default.createElement(_FullScreenModal.default,{minuHeight:e.minuHeight,closable:!1,onOk:function onOk(){},destroyOnClose:!0,footer:_react.default.createElement("div",{ref:d},_react.default.createElement(_form.default,{layout:"inline"},_react.default.createElement(Item,null,_react.default.createElement(_button.default,{type:"primary",onClick:function onClick(){var b=c.current.getQueryEditor().getValue();a.onChange&&a.onChange(b)}},"\u4FDD\u5B58")),_react.default.createElement(Item,null,_react.default.createElement(_button.default,{type:"danger",onClick:function onClick(){var b=c.current.getQueryEditor().getValue();a.onChange&&a.onChange(b),e.setVisible(!1)}},"\u4FDD\u5B58\u5E76\u5173\u95ED")),_react.default.createElement(Item,null,_react.default.createElement(_button.default,{onClick:function onClick(){e.setVisible(!1)}},"\u5173\u95ED")))),onCancel:function onCancel(){return e.setVisible(!1)},visible:e.visible,bodyStyle:{padding:0}},e.visible&&_react.default.createElement(_ErrorWrapper.default,null,function(){return _react.default.createElement(_graphiql.default,{query:a.value,ref:c// response={`{a:1}`}
//   query={null}
,storage:{getItem:function getItem(){},setItem:function setItem(){}},operationName:"query",fetcher:function fetcher(a){return b.query({query:(0,_graphqlTag.default)(a.query)})}},_react.default.createElement(_graphiql.default.Logo,null,"FPB Graphiql"))}))}))};exports.default=GraphqlEditor;
//# sourceMappingURL=GraphqlEditor.js.map