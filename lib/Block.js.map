{"version":3,"sources":["../src/FPB/Block.tsx"],"names":["Block","props","showTag","position","zIndex","width","height","children","monitorHeight","sized","setParent","onParentHeightChange","breakpoint","autoHeight"],"mappings":"uiDA+BA,GAAMA,CAAAA,KAA4B,CAAG,SAAAC,CAAK,CAAI,OACjBA,CADiB,CACpCC,OADoC,CACpCA,CADoC,iBAEb,wBAC7B,UAAM,CACJ,MACE,qCAAK,KAAK,CAAE,CAAEC,QAAQ,WAAV,CAAwBC,MAAM,CAAE,CAAhC,CAAZ,EAEGF,CAAO,EAAI,6BAAC,eAAD,EAAQ,KAAK,CAAEG,CAAf,CAAsB,MAAM,CAAEJ,CAAK,CAACK,MAApC,EAFd,CAGGL,CAAK,CAACM,QAHT,CAMH,CAT4B,CAU7B,CACEC,aAAa,GACb;AACA;AAHF,CAV6B,CAFa,uBAErCC,CAFqC,MAE9BJ,CAF8B,MAEvBC,CAFuB,MAkBtCI,CAAS,CAAG,uBAChB,sBAAST,CAAK,CAACU,oBAAf,CAAqCT,CAAO,CAAG,GAAH,CAAS,CAArD,CADgB,CAEhB,CAACD,CAAK,CAACU,oBAAP,CAFgB,CAlB0B,CA4B5C,MANA,qBAAU,UAAM,CAGdD,CAAS,CAACJ,CAAD,CACV,CAJD,CAIG,CAACA,CAAD,CAASL,CAAK,CAACW,UAAf,CAA2BX,CAAK,CAACY,UAAjC,CAJH,CAMA,CAAO,0DAAGJ,CAAH,CACR,CA7BD,C","sourcesContent":["import useSizeMe from './useSizeMe';\r\nimport CalTag from './CalTag';\r\nimport debounce from 'lodash/debounce';\r\nimport { useEffect, useCallback } from 'react';\r\nimport React from 'react';\r\n/**\r\n * 区块\r\n */\r\nexport interface BlockProps {\r\n  /**\r\n   * 父元素自动响应高度\r\n   * @param height 区块内部高度\r\n   */\r\n  onParentHeightChange(height: number);\r\n  /**\r\n   * 外层height\r\n   */\r\n  height?: number;\r\n  /**\r\n   * 断点\r\n   */\r\n  breakpoint: string;\r\n  /**\r\n   * 开启计算高度\r\n   */\r\n  autoHeight: boolean;\r\n  /**\r\n   * 显示计量标签\r\n   */\r\n  showTag?: boolean;\r\n}\r\nconst Block: React.SFC<BlockProps> = props => {\r\n  const { showTag = true } = props;\r\n  const [sized, width, height] = useSizeMe(\r\n    () => {\r\n      return (\r\n        <div style={{ position: `relative`, zIndex: 0 }}>\r\n          {/* 计量维度的tag */}\r\n          {showTag && <CalTag width={width} height={props.height} />}\r\n          {props.children}\r\n        </div>\r\n      );\r\n    },\r\n    {\r\n      monitorHeight: true,\r\n      // refreshMode: showTag?'debounce':'throttle',\r\n      // refreshRate: showTag?200:16,\r\n    },\r\n  );\r\n  const setParent = useCallback(\r\n    debounce(props.onParentHeightChange, showTag ? 200 : 0),\r\n    [props.onParentHeightChange],\r\n  );\r\n  useEffect(() => {\r\n    console.log('setHeight');\r\n\r\n    setParent(height as number);\r\n  }, [height, props.breakpoint, props.autoHeight]);\r\n\r\n  return <>{sized}</>;\r\n};\r\nexport { Block as default };\r\n"],"file":"Block.js"}