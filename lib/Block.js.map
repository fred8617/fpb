{"version":3,"file":"Block.js","names":["Block","props","showTag","useSizeMe","position","zIndex","width","height","children","monitorHeight","sized","setParent","useCallback","debounce","onParentHeightChange","useEffect","breakpoint","autoHeight"],"sources":["../src/fpb/Block.tsx"],"sourcesContent":["import useSizeMe from './useSizeMe';\nimport CalTag from './CalTag';\nimport debounce from 'lodash/debounce';\nimport { useEffect, useCallback } from 'react';\nimport React from 'react';\n/**\n * 区块\n */\nexport interface BlockProps {\n  /**\n   * 父元素自动响应高度\n   * @param height 区块内部高度\n   */\n  onParentHeightChange(height: number);\n  /**\n   * 外层height\n   */\n  height?: number;\n  /**\n   * 断点\n   */\n  breakpoint: string;\n  /**\n   * 开启计算高度\n   */\n  autoHeight: boolean;\n  /**\n   * 显示计量标签\n   */\n  showTag?: boolean;\n}\nconst Block: React.SFC<BlockProps> = props => {\n  const { showTag = true } = props;\n  const [sized, width, height] = useSizeMe(\n    () => {\n      return (\n        <div style={{ position: `relative`, zIndex: 0 }}>\n          {/* 计量维度的tag */}\n          {showTag && <CalTag width={width} height={props.height} />}\n          {props.children}\n        </div>\n      );\n    },\n    {\n      monitorHeight: true,\n      // refreshMode: showTag?'debounce':'throttle',\n      // refreshRate: showTag?200:16,\n    },\n  );\n  const setParent = useCallback(\n    debounce(props.onParentHeightChange, showTag ? 200 : 0),\n    [props.onParentHeightChange],\n  );\n  useEffect(() => {\n    console.log('setHeight');\n\n    setParent(height as number);\n  }, [height, props.breakpoint, props.autoHeight]);\n\n  return <>{sized}</>;\n};\nexport { Block as default };\n"],"mappings":";;;;;;;AAAA;AACA;AACA;AACA;AAA+C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AA4B/C,IAAMA,KAA4B,GAAG,SAA/BA,KAA4B,CAAGC,KAAK,EAAI;EAC5C,qBAA2BA,KAAK,CAAxBC,OAAO;IAAPA,OAAO,+BAAG,IAAI;EACtB,iBAA+B,IAAAC,mBAAS,EACtC,YAAM;MACJ,oBACE;QAAK,KAAK,EAAE;UAAEC,QAAQ,YAAY;UAAEC,MAAM,EAAE;QAAE;MAAE,GAE7CH,OAAO,iBAAI,6BAAC,eAAM;QAAC,KAAK,EAAEI,KAAM;QAAC,MAAM,EAAEL,KAAK,CAACM;MAAO,EAAG,EACzDN,KAAK,CAACO,QAAQ,CACX;IAEV,CAAC,EACD;MACEC,aAAa,EAAE;MACf;MACA;IACF,CAAC,CACF;IAAA;IAfMC,KAAK;IAAEJ,KAAK;IAAEC,MAAM;EAgB3B,IAAMI,SAAS,GAAG,IAAAC,kBAAW,EAC3B,IAAAC,iBAAQ,EAACZ,KAAK,CAACa,oBAAoB,EAAEZ,OAAO,GAAG,GAAG,GAAG,CAAC,CAAC,EACvD,CAACD,KAAK,CAACa,oBAAoB,CAAC,CAC7B;EACD,IAAAC,gBAAS,EAAC,YAAM;IAGdJ,SAAS,CAACJ,MAAM,CAAW;EAC7B,CAAC,EAAE,CAACA,MAAM,EAAEN,KAAK,CAACe,UAAU,EAAEf,KAAK,CAACgB,UAAU,CAAC,CAAC;EAEhD,oBAAO,4DAAGP,KAAK,CAAI;AACrB,CAAC;AAAC"}