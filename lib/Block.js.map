{"version":3,"sources":["../src/fpb/Block.tsx"],"names":["Block","props","showTag","position","zIndex","width","height","children","monitorHeight","sized","setParent","onParentHeightChange","breakpoint","autoHeight"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;AACA;;;;;;;;;;;;;;;;AA4BA,IAAMA,KAA4B,GAAG,SAA/BA,KAA+B,CAAAC,KAAK,EAAI;AAAA,uBACjBA,KADiB,CACpCC,OADoC;AAAA,MACpCA,OADoC,+BAC1B,IAD0B;;AAAA,mBAEb,yBAC7B,YAAM;AACJ,WACE;AAAK,MAAA,KAAK,EAAE;AAAEC,QAAAA,QAAQ,YAAV;AAAwBC,QAAAA,MAAM,EAAE;AAAhC;AAAZ,OAEGF,OAAO,IAAI,6BAAC,eAAD;AAAQ,MAAA,KAAK,EAAEG,KAAf;AAAsB,MAAA,MAAM,EAAEJ,KAAK,CAACK;AAApC,MAFd,EAGGL,KAAK,CAACM,QAHT,CADF;AAOD,GAT4B,EAU7B;AACEC,IAAAA,aAAa,EAAE,IADjB,CAEE;AACA;;AAHF,GAV6B,CAFa;AAAA;AAAA,MAErCC,KAFqC;AAAA,MAE9BJ,KAF8B;AAAA,MAEvBC,MAFuB;;AAkB5C,MAAMI,SAAS,GAAG,wBAChB,uBAAST,KAAK,CAACU,oBAAf,EAAqCT,OAAO,GAAG,GAAH,GAAS,CAArD,CADgB,EAEhB,CAACD,KAAK,CAACU,oBAAP,CAFgB,CAAlB;AAIA,wBAAU,YAAM;AAGdD,IAAAA,SAAS,CAACJ,MAAD,CAAT;AACD,GAJD,EAIG,CAACA,MAAD,EAASL,KAAK,CAACW,UAAf,EAA2BX,KAAK,CAACY,UAAjC,CAJH;AAMA,SAAO,4DAAGJ,KAAH,CAAP;AACD,CA7BD","sourcesContent":["import useSizeMe from './useSizeMe';\r\nimport CalTag from './CalTag';\r\nimport debounce from 'lodash/debounce';\r\nimport { useEffect, useCallback } from 'react';\r\nimport React from 'react';\r\n/**\r\n * 区块\r\n */\r\nexport interface BlockProps {\r\n  /**\r\n   * 父元素自动响应高度\r\n   * @param height 区块内部高度\r\n   */\r\n  onParentHeightChange(height: number);\r\n  /**\r\n   * 外层height\r\n   */\r\n  height?: number;\r\n  /**\r\n   * 断点\r\n   */\r\n  breakpoint: string;\r\n  /**\r\n   * 开启计算高度\r\n   */\r\n  autoHeight: boolean;\r\n  /**\r\n   * 显示计量标签\r\n   */\r\n  showTag?: boolean;\r\n}\r\nconst Block: React.SFC<BlockProps> = props => {\r\n  const { showTag = true } = props;\r\n  const [sized, width, height] = useSizeMe(\r\n    () => {\r\n      return (\r\n        <div style={{ position: `relative`, zIndex: 0 }}>\r\n          {/* 计量维度的tag */}\r\n          {showTag && <CalTag width={width} height={props.height} />}\r\n          {props.children}\r\n        </div>\r\n      );\r\n    },\r\n    {\r\n      monitorHeight: true,\r\n      // refreshMode: showTag?'debounce':'throttle',\r\n      // refreshRate: showTag?200:16,\r\n    },\r\n  );\r\n  const setParent = useCallback(\r\n    debounce(props.onParentHeightChange, showTag ? 200 : 0),\r\n    [props.onParentHeightChange],\r\n  );\r\n  useEffect(() => {\r\n    console.log('setHeight');\r\n\r\n    setParent(height as number);\r\n  }, [height, props.breakpoint, props.autoHeight]);\r\n\r\n  return <>{sized}</>;\r\n};\r\nexport { Block as default };\r\n"],"file":"Block.js"}