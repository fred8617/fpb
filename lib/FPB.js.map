{"version":3,"file":"FPB.js","names":["linePadding","ResponsiveGridLayout","WidthProvider","Responsive","FPB","props","isInit","useRef","settingRef","breakpointFormRef","store","useFPBStore","localStore","useLocalStore","configVisible","setConfigVisible","mainWidth","setMainWidth","width","settingWidth","setSettingWidth","current","clientWidth","useEffect","setBreakpointFromEntry","Object","keys","breakpoints","breakpointDiff","forwardRef","doWindowResize","layouts","func","setTimeout","window","addEventListener","removeEventListener","defaultDatas","setLayouts","renderDelay","FPR","mode","Mode","PRIVIEW","setDatas","datas","FPRPart","form","display","hasLayout","jsConfig","entries","map","key","data","draggableCancelClassName","isDesign","components","showPart","builderPart","layout","position","paddingLeft","paddingTop","paddingRight","draggableCancel","e","overflow","contentDefaultSize","background","height","editingTitle","isEditing","_","setEditingItem","padding","editingItem","getObjectKeysWhenIsArray","toJS","componentProps","recurseEverything","onItemTypeChange","onItemPropsChange","componentGroup","flatComponents","isPreview","createItem","setBreakpointSettingVisible","changeMode","DESIGN","renderActions","breakpointSettingVisible","validateFieldsAndScroll","err","values","setBreakpointConfig","breakpointsConfig","config","FormFPB","React","memo","create","name","p","n","ApolloFPB","client"],"sources":["../src/fpb/FPB.tsx"],"sourcesContent":["import { Responsive, WidthProvider } from 'react-grid-layout';\nimport React, { useRef, useEffect, SFC, useMemo } from 'react';\nimport { Observer, useLocalStore } from 'mobx-react-lite';\nimport ReactJson from 'react-json-view';\nimport { doWindowResize, getObjectKeysWhenIsArray } from './utils';\nimport 'react-grid-layout/css/styles.css';\nimport 'react-resizable/css/styles.css';\nimport { Empty, Button, Form, Drawer, Radio, Modal } from 'antd';\nimport SplitPane from 'react-split-pane';\nimport ItemSettingForm from './ItemSettingForm';\nimport ObservableBlock from './ObservableBlock';\nimport ObservableBlockContainer from './ObservableBlockContainer';\nimport { Provider } from './FormContext';\nimport { debounce } from 'lodash';\nimport BreakpointForm from './BreakpointForm';\nimport useFPBStore, { FPBProps, Mode, ApolloFPBProps } from './useFPBStore';\nimport { toJS } from 'mobx';\nimport { ApolloProvider } from '@apollo/react-hooks';\nimport CalText from './CalText';\nimport FullScreenModal from './FullScreenModal';\nconst linePadding = 5;\nconst ResponsiveGridLayout = WidthProvider(Responsive);\nconst FPB: React.SFC<FPBProps> = props => {\n  const isInit = useRef(false);\n  const settingRef: any = useRef();\n  const breakpointFormRef = useRef<any>();\n  const store = useFPBStore(props);\n  const localStore = useLocalStore(() => ({\n    configVisible: false,\n    setConfigVisible(configVisible) {\n      localStore.configVisible = configVisible;\n    },\n    mainWidth: 0,\n    setMainWidth(width) {\n      localStore.mainWidth = width;\n    },\n    settingWidth: 0,\n    setSettingWidth() {\n      if (settingRef.current && settingRef.current.clientWidth) {\n        localStore.settingWidth =\n          settingRef.current && settingRef.current.clientWidth;\n      }\n    },\n  }));\n  useEffect(() => {\n    store.setBreakpointFromEntry(\n      Object.keys(store.breakpoints),\n      props.breakpointDiff,\n    );\n  }, [props.breakpointDiff]);\n  if (props.forwardRef) {\n    props.forwardRef.current = store;\n  }\n  useEffect(() => {\n    console.log('layout change & doWindowResize');\n    doWindowResize();\n  }, [store.layouts]);\n  useEffect(() => {\n    /**\n     * 初始化一下setting的宽度\n     */\n    const func = debounce(\n      () => setTimeout(() => localStore.setSettingWidth(), 0),\n      200,\n    );\n    func();\n    window.addEventListener('resize', func);\n    return () => {\n      window.removeEventListener('resize', func);\n    };\n  }, []);\n  useEffect(() => {\n    if (!isInit.current) {\n      isInit.current = true;\n      if (props.defaultDatas) {\n        store.setLayouts([] as any, props.defaultDatas.layouts);\n      }\n\n      setTimeout(doWindowResize, props.renderDelay || 0);\n    }\n    if (props.defaultDatas) {\n      if (props.FPR) {\n        store.mode = Mode.PRIVIEW;\n      }\n      store.setDatas(props.defaultDatas.datas);\n      store.setBreakpointFromEntry(\n        props.defaultDatas.breakpoints,\n        props.breakpointDiff,\n      );\n      // store.setLayouts([] as any, props.defaultDatas.layouts);\n      setTimeout(doWindowResize, props.renderDelay || 0);\n      //模态框动画弹出需要加renderDelay\n\n      // doWindowResize();\n    }\n  }, [props.defaultDatas, props.renderDelay]);\n\n  useEffect(() => {\n    console.log('mount');\n  }, []);\n  console.log('render', store);\n  const { FPR = false } = props;\n  const FPRPart = (\n    <Provider value={{ form: props.form }}>\n      <Observer>\n        {() => (\n          <ResponsiveGridLayout\n            // compactType={'horizontal'}\n            // useCSSTransforms={false}\n            style={{ display: !store.hasLayout() ? 'none' : 'block' }}\n            className=\"layout\"\n            {...store.jsConfig}\n          >\n            {Object.entries(store.datas).map(([key, data]) => {\n              return (\n                <div className={store.draggableCancelClassName} key={key}>\n                  <Observer>\n                    {() =>\n                      store.isDesign && (\n                        <ObservableBlockContainer\n                          store={store}\n                          itemKey={key}\n                          data={data}\n                        />\n                      )\n                    }\n                  </Observer>\n\n                  <ObservableBlock\n                    store={store}\n                    i={key}\n                    components={props.components}\n                  />\n                </div>\n              );\n            })}\n          </ResponsiveGridLayout>\n        )}\n      </Observer>\n    </Provider>\n  );\n  if (FPR) {\n    return FPRPart;\n  }\n  const showPart = (\n    <>\n      <Observer>{() => <CalText width={localStore.mainWidth} />}</Observer>\n      <Observer>\n        {() => (\n          <>\n            <Empty\n              style={{ display: store.hasLayout() ? 'none' : 'block' }}\n              description={'暂无元素'}\n            />\n            {FPRPart}\n          </>\n        )}\n      </Observer>\n    </>\n  );\n  const builderPart = props.layout ? (\n    <div key={'builder'} style={{ position: `relative` }}>\n      {props.layout(showPart)}\n    </div>\n  ) : (\n    <div\n      style={{\n        position: `relative`,\n        paddingLeft: linePadding,\n        paddingTop: linePadding,\n        paddingRight: linePadding,\n      }}\n      key={'builder'}\n    >\n      {showPart}\n    </div>\n  );\n  return (\n    <>\n      {/* 此处在预览模式下取消transition */}\n      <Observer>\n        {() => (\n          <style>\n            {store.draggableCancel\n              ? `\n        .react-grid-item{\n          transition:none!important\n        }\n        .react-grid-layout{\n          transition:none!important\n        }\n        ${\n          store.draggableCancel\n            ? `.react-grid-item > .react-resizable-handle{\n          display:none;\n        }`\n            : null\n        }\n        `\n              : null}\n          </style>\n        )}\n      </Observer>\n\n      <SplitPane\n        className=\"FPB\"\n        onChange={e => {\n          localStore.setSettingWidth();\n          localStore.setMainWidth(e - (props.layout ? 0 : 10));\n        }}\n        onDragFinished={doWindowResize}\n        pane1Style={{ overflow: `auto` }}\n        paneStyle={{ position: `relative` }}\n        style={{ position: 'relative' }}\n        defaultSize={props.contentDefaultSize || `50%`}\n        minSize={479}\n        maxSize={1600}\n      >\n        {builderPart}\n        <div\n          ref={settingRef}\n          key=\"setting\"\n          style={{\n            background: `#fff`,\n            height: `100%`,\n            paddingLeft: linePadding,\n          }}\n        >\n          <Observer>\n            {() => {\n              return (\n                <Drawer\n                  destroyOnClose\n                  title={store.editingTitle}\n                  placement=\"right\"\n                  width={`100%`}\n                  closable={store.isEditing}\n                  onClose={_ => store.setEditingItem(null)}\n                  visible={store.isEditing}\n                  getContainer={false}\n                  style={{ position: 'absolute', height: `100%` }}\n                  drawerStyle={{ height: `100%` }}\n                  bodyStyle={{\n                    padding: 0,\n                    height: `calc( 100% - 54.6px )`,\n                    overflow: `auto`,\n                  }}\n                >\n                  {store.isEditing && (\n                    <ItemSettingForm\n                      parentStore={localStore}\n                      initialKeyCounter={\n                        (store.editingItem &&\n                          getObjectKeysWhenIsArray(\n                            toJS(store.editingItem.componentProps, {\n                              recurseEverything: true,\n                            }) || {},\n                            'componentProps',\n                          )) ||\n                        {}\n                      }\n                      components={props.components}\n                      item={store.editingItem}\n                      onItemTypeChange={store.onItemTypeChange}\n                      onItemPropsChange={store.onItemPropsChange}\n                      componentGroup={store.componentGroup}\n                      flatComponents={store.flatComponents}\n                    />\n                  )}\n                </Drawer>\n              );\n            }}\n          </Observer>\n\n          <Form layout=\"inline\">\n            <Form.Item>\n              <Observer>\n                {() => (\n                  <Button\n                    type=\"primary\"\n                    icon=\"plus\"\n                    disabled={store.isPreview}\n                    onClick={debounce(store.createItem, 50)}\n                  >\n                    添加元素\n                  </Button>\n                )}\n              </Observer>\n            </Form.Item>\n            <Form.Item>\n              <Observer>\n                {() => (\n                  <Button\n                    disabled={store.isPreview}\n                    onClick={_ => store.setBreakpointSettingVisible(true)}\n                  >\n                    断点设置\n                  </Button>\n                )}\n              </Observer>\n            </Form.Item>\n            <Form.Item>\n              <Button onClick={_ => localStore.setConfigVisible(true)}>\n                查看配置\n              </Button>\n            </Form.Item>\n            <Form.Item>\n              <Observer>\n                {() => (\n                  <Radio.Group\n                    buttonStyle=\"solid\"\n                    onChange={store.changeMode}\n                    value={store.mode}\n                  >\n                    <Radio.Button value={Mode.DESIGN}>设计</Radio.Button>\n                    <Radio.Button value={Mode.PRIVIEW}>预览</Radio.Button>\n                  </Radio.Group>\n                )}\n              </Observer>\n            </Form.Item>\n            {props.renderActions && props.renderActions()}\n          </Form>\n        </div>\n      </SplitPane>\n      <Observer>\n        {() => (\n          <Modal\n            centered\n            destroyOnClose\n            maskClosable={false}\n            title={'设置断点'}\n            visible={store.breakpointSettingVisible}\n            onOk={_ =>\n              breakpointFormRef.current.validateFieldsAndScroll(\n                (err, values) => {\n                  if (err) {\n                    return;\n                  }\n                  store.setBreakpointConfig(values, props.breakpointDiff);\n                },\n              )\n            }\n            onCancel={_ => store.setBreakpointSettingVisible(false)}\n          >\n            <BreakpointForm\n              ref={breakpointFormRef}\n              initialData={store.breakpointsConfig}\n            />\n          </Modal>\n        )}\n      </Observer>\n      <Observer>\n        {() => (\n          <FullScreenModal\n            footer={null}\n            onCancel={_ => localStore.setConfigVisible(false)}\n            visible={localStore.configVisible}\n          >\n            <ReactJson collapsed={1} indentWidth={10} src={store.config} />\n          </FullScreenModal>\n        )}\n      </Observer>\n    </>\n  );\n};\nconst FormFPB = React.memo(\n  Form.create<FPBProps>({ name: 'FPB' })(FPB),\n  (p, n) => n.breakpointDiff === p.breakpointDiff,\n);\n\nexport const ApolloFPB: SFC<Omit<ApolloFPBProps, 'form'>> = ({\n  client,\n  ...props\n}) => {\n  return (\n    <ApolloProvider client={client}>\n      <FormFPB {...props} />\n    </ApolloProvider>\n  );\n};\nexport { FormFPB as default };\n"],"mappings":"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"}